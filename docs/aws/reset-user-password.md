# Reset User AWS Console Password

## User Has Resources In AWS

### Design

If a user needs a reset of their AWS password, this will be done manually.

### Process

Note: in this example we will reset a user password in the `osio-dev` account.

1. Login to the `osio-dev` account AWS console. URL: https://619539278362.signin.aws.amazon.com/console.
2. Open the [IAM console](https://console.aws.amazon.com/iam/).
3. Go to `Users` -> relevant user -> Security Credentials
4. Select `Console Password` -> `Manage`.
5. Select `Set password` -> `Autogenerated password`.
6. Keep the password, encrypt it using the user's GPG key and send over by mail.

## User Has **No** Resources In AWS

### Design

If a user needs a reset of their AWS password, this will be done using automated processes via App-Interface. Since a User is an (almost) idempotent entity in AWS, in order to reset a user password, we will remove their role for that AWS account, and restore that role afterwords. This will delete the user (without deleting any additional resources, apart for the users's access keys) and create a new user with the same ID, with a new randomly generated password.

### Process

Note: in this example we will reset a user password in the `osio` account.

1. Create a Merge Request in app-interface to remove the relevant role from the user file. Example: https://gitlab.cee.redhat.com/service/app-interface/merge_requests/623
2. After merging the Merge Request (and after the jenkins job finishes), validate that the user no longer exists in the `osio` AWS account (under the [IAM console](https://console.aws.amazon.com/iam/)).
3. Create a Merge Request in app-interface to restore the relevant role to the user file. Example: https://gitlab.cee.redhat.com/service/app-interface/merge_requests/624
4. After merging the Merge Request (and after the jenkins job finishes), validate that the user is present in the `osio` AWS account.

A mail invitation is automatically sent the the user with the relevant information to login to the AWS console.
