apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: turnpike
  name: turnpike-routes
  annotations:
    qontract.recycle: "true"
data:
  backends.yml: |
    - name: turnpike
      route: /api/turnpike
      origin: http://web:5000/api/turnpike
      auth:
        saml: "True"
    - name: healthcheck
      route: /_healthcheck
      origin: http://web:5000/_healthcheck
    - name: platform-docs
      route: /docs/
      origin: http://platform-docs.platform-docs-stage.svc.cluster.local/
      auth:
        saml: "True"
    - name: rhsm-subscriptions
      route: /app/rhsm-subscriptions/actuator
      origin: http://rhsm-subscriptions-worker-monitoring.rhsm-stage.svc.cluster.local:8080/actuator
      auth:
        saml: "'subscription-watch-admins' in user['Role']"
    - name: rhsm-conduit
      route: /app/rhsm-conduit/actuator
      origin: http://rhsm-conduit.rhsm-stage.svc.cluster.local:8080/actuator
      auth:
        saml: "'subscription-watch-admins' in user['Role']"
    - name: policies-engine
      route: /api/policies-engine/
      origin: http://policies-engine.policies-stage.svc.cluster.local:8080/
      auth:
        saml: "True"
