$schema: /app-interface/prometheus-rule-test-1.yml

rule_files:
  - /insights-stage/rhsm-api-proxy-stage/rhsm-system-profile-bridge.prometheusrules.yml

evaluation_interval: 10m

tests:
  - interval: 1m
    input_series:
      - series: up{job="rhsm-system-profile-bridge-service", namespace="rhsm-api-proxy-stage"}
        values: '1 0 0 0 0 0 0 0'
    alert_rule_test:
      - eval_time: 0m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
        # None: no alerts are sent until the application has been down for 15m
      - eval_time: 1m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
          # None: no alerts are sent until the application has been down for 15m
      - eval_time: 2m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
          # None: no alerts are sent until the application has been down for 15m
      - eval_time: 3m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
        # None: no alerts are sent until the application has been down for 15m
      - eval_time: 4m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
        # None: no alerts are sent until the application has been down for 15m
      - eval_time: 5m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
        # None: no alerts are sent until the application has been down for 15m
      - eval_time: 6m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
        # None: no alerts are sent until the application has been down for 15m
      - eval_time: 7m
        alertname: rhsm-system-profile-bridge is down - stage
        exp_alerts:
          # ?