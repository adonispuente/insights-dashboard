apiVersion: v1
data:
  grafana-datasource.json: |-
    {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": "-- Grafana --",
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "type": "dashboard"
            }
          ]
        },
        "editable": true,
        "gnetId": null,
        "graphTooltip": 0,
        "id": 177,
        "iteration": 1596013195309,
        "links": [],
        "panels": [
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 0
            },
            "id": 20,
            "panels": [],
            "title": "Current values",
            "type": "row"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#d44a3a",
              "rgba(237, 129, 40, 0.89)",
              "#299c46"
            ],
            "datasource": "$datasource",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 0,
              "y": 1
            },
            "id": 8,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\"}[$__range]))",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "thresholds": "0.1,1",
            "title": "Manager requests",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#d44a3a",
              "rgba(237, 129, 40, 0.89)",
              "#299c46"
            ],
            "datasource": "$datasource",
            "decimals": 2,
            "format": "percentunit",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 3,
              "y": 1
            },
            "id": 14,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\", code=~\"2.*\"}[$__range])) / sum(increase(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\"}[$__range]))",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.9,0.2",
            "title": "Manager 2xx ratio",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 6,
              "y": 1
            },
            "id": 9,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(sum(kube_pod_container_status_restarts_total{namespace=\"patchman-engine-$namespace\", container=\"patchman-engine-manager\"}))",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Manager restarts",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 9,
              "y": 1
            },
            "id": 24,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(sum(kube_pod_container_status_restarts_total{namespace=\"patchman-engine-$namespace\", container=\"patchman-engine-listener\"}))",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Listener restarts",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 12,
              "y": 1
            },
            "id": 41,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(sum(kube_pod_container_status_restarts_total{namespace=\"patchman-engine-$namespace\", container=~\"patchman-engine-evaluator-upload\"}))",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Evaluator-upload restarts",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 15,
              "y": 1
            },
            "id": 45,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(sum(kube_pod_container_status_restarts_total{namespace=\"patchman-engine-$namespace\", container=~\"patchman-engine-evaluator-recalc\"}))",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Evaluator-recalc restarts",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 18,
              "y": 1
            },
            "id": 32,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(kube_pod_container_status_restarts_total{namespace=\"patchman-engine-$namespace\", container=\"patchman-engine-vmaas-sync\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "VMaaS-sync restarts",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 21,
              "y": 1
            },
            "id": 26,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(kube_pod_container_status_restarts_total{namespace=\"patchman-engine-$namespace\", container=\"patchman-engine-database\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Database restarts",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "decimals": 2,
            "format": "percentunit",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 0,
              "y": 4
            },
            "id": 25,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\", code=~\"5.*\"}[$__range])) / sum(increase(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\"}[$__range]))",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.05,0.2",
            "title": "Manager 5xx ratio",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": true,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "decimals": 2,
            "format": "percentunit",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 3,
              "y": 4
            },
            "id": 28,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\", code=~\"4.*\"}[$__range])) / sum(increase(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\"}[$__range]))",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.05,0.2",
            "title": "Manager 4xx ratio",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "description": "Systems evaluated using component \"patchman-engine-evaluator-upload\".",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 12,
              "y": 4
            },
            "id": 49,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(patchman_engine_evaluator_evaluation{kubernetes_namespace=\"patchman-engine-$namespace\", deployment=~\"patchman-engine-evaluator-upload-.*\", type=\"success\", role=~\"mnm|mnm-ci\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Evaluated uploads",
            "transparent": false,
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "description": "Systems evaluated using component \"patchman-engine-evaluator-recalc\".",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 15,
              "y": 4
            },
            "id": 48,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(patchman_engine_evaluator_evaluation{kubernetes_namespace=\"patchman-engine-$namespace\", deployment=~\"patchman-engine-evaluator-recalc-.*\", type=\"success\", role=~\"mnm|mnm-ci\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Evaluated recalcs",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "$datasource",
            "description": "Messages processed using Listener",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 18,
              "y": 4
            },
            "id": 50,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(patchman_engine_listener_kafka_message_received{kubernetes_namespace=\"patchman-engine-$namespace\", event=~\"$event\", role=~\"mnm|mnm-ci\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "thresholds": "0.1,3",
            "title": "Listener messages",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "delta"
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 7
            },
            "id": 18,
            "panels": [],
            "title": "Golden signals",
            "type": "row"
          },
          {
            "aliasColors": {
              "304": "#64b0c8",
              "400": "#c15c17",
              "401": "#cca300",
              "404": "#f4d598",
              "500": "#bf1b00"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 8
            },
            "id": 10,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(patchman_engine_requests_total{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\", role=~\"mnm|mnm-ci\"}[$interval])) by (code)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{code}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Manager traffic",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 8
            },
            "id": 27,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": false,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "1000 * sum(rate(patchman_engine_request_duration_seconds_sum{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\", role=~\"mnm|mnm-ci\"}[$interval])) / sum(rate(patchman_engine_request_duration_seconds_count{kubernetes_namespace=\"patchman-engine-$namespace\", kubernetes_name=\"patchman-engine-manager\", role=~\"mnm|mnm-ci\"}[$interval]))",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Manager latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 14
            },
            "id": 5,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-manager\"}[1m])) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-manager\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "manager",
                "refId": "A"
              },
              {
                "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-listener\"}[1m])) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-listener\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "listener",
                "refId": "B"
              },
              {
                "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"patchman-engine-$namespace\",container_name=~\"patchman-engine-evaluator-upload\"}[1m])) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"patchman-engine-$namespace\",container=~\"patchman-engine-evaluator-upload\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "evaluator-upload",
                "refId": "D"
              },
              {
                "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"patchman-engine-$namespace\",container_name=~\"patchman-engine-evaluator-recalc\"}[1m])) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"patchman-engine-$namespace\",container=~\"patchman-engine-evaluator-recalc\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "evaluator-recalc",
                "refId": "F"
              },
              {
                "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-vmaas-sync\"}[1m])) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-vmaas-sync\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "vmaas-sync",
                "refId": "E"
              },
              {
                "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-database\"}[1m])) / sum(kube_pod_container_resource_limits_cpu_cores{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-database\"})",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "database",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "CPU consumed",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "percentunit",
                "label": null,
                "logBase": 1,
                "max": "1",
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 14
            },
            "id": 4,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(container_memory_usage_bytes{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-manager\"}) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-manager\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "manager",
                "refId": "A"
              },
              {
                "expr": "sum(container_memory_usage_bytes{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-listener\"}) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-listener\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "listener",
                "refId": "B"
              },
              {
                "expr": "sum(container_memory_usage_bytes{namespace=\"patchman-engine-$namespace\",container_name=~\"patchman-engine-evaluator-upload\"}) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"patchman-engine-$namespace\",container=~\"patchman-engine-evaluator-upload\"})",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "evaluator-upload",
                "refId": "F"
              },
              {
                "expr": "sum(container_memory_usage_bytes{namespace=\"patchman-engine-$namespace\",container_name=~\"patchman-engine-evaluator-recalc\"}) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"patchman-engine-$namespace\",container=~\"patchman-engine-evaluator-recalc\"})",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "evaluator-recalc",
                "refId": "D"
              },
              {
                "expr": "sum(container_memory_usage_bytes{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-vmaas-sync\"}) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-vmaas-sync\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "vmaas-sync",
                "refId": "E"
              },
              {
                "expr": "sum(container_memory_usage_bytes{namespace=\"patchman-engine-$namespace\",container_name=\"patchman-engine-database\"}) / sum(kube_pod_container_resource_limits_memory_bytes{namespace=\"patchman-engine-$namespace\",container=\"patchman-engine-database\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "database",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Memory consumed",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "percentunit",
                "label": null,
                "logBase": 1,
                "max": "1",
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 20
            },
            "id": 31,
            "panels": [],
            "title": "Advanced",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 21
            },
            "id": 29,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(kube_pod_container_status_restarts_total{namespace=\"patchman-engine-$namespace\", container=~\"patchman-engine-.*\"}) by (container)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{container}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Containers restarts",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 21
            },
            "id": 33,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(kafka_consumer_group_lag{kubernetes_namespace='platform-mq-$namespace', group='patchman', role=~\"mnm|mnm-ci\"}) by (topic)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{topic}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Kafka consumer lag",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 2,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "cards": {
              "cardPadding": null,
              "cardRound": null
            },
            "color": {
              "cardColor": "#b4ff00",
              "colorScale": "sqrt",
              "colorScheme": "interpolateSpectral",
              "exponent": 0.5,
              "mode": "spectrum"
            },
            "dataFormat": "tsbuckets",
            "datasource": "$datasource",
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 27
            },
            "heatmap": {},
            "highlightCards": true,
            "id": 36,
            "legend": {
              "show": true
            },
            "links": [],
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_listener_kafka_message_handling_duration_seconds_bucket{kubernetes_namespace=\"patchman-engine-$namespace\", event=~\"$event\", role=~\"mnm|mnm-ci\"}[$interval])) by (le)",
                "format": "heatmap",
                "intervalFactor": 10,
                "legendFormat": "{{le}}",
                "refId": "A"
              }
            ],
            "title": "Listener message handling duration",
            "tooltip": {
              "show": true,
              "showHistogram": false
            },
            "type": "heatmap",
            "xAxis": {
              "show": true
            },
            "xBucketNumber": null,
            "xBucketSize": null,
            "yAxis": {
              "decimals": null,
              "format": "s",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true,
              "splitFactor": null
            },
            "yBucketBound": "auto",
            "yBucketNumber": null,
            "yBucketSize": null
          },
          {
            "aliasColors": {
              "error-identity": "#890f02",
              "error-no-rows": "#58140c",
              "error-processing": "#bf1b00",
              "success": "#629e51"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 27
            },
            "id": 43,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(patchman_engine_listener_kafka_message_received{kubernetes_namespace=\"patchman-engine-$namespace\", event=~\"$event\", role=~\"mnm|mnm-ci\"}[$interval])) by (type)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{type}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Listener processed messages",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "cards": {
              "cardPadding": null,
              "cardRound": null
            },
            "color": {
              "cardColor": "#b4ff00",
              "colorScale": "sqrt",
              "colorScheme": "interpolateSpectral",
              "exponent": 0.5,
              "mode": "spectrum"
            },
            "dataFormat": "tsbuckets",
            "datasource": "$datasource",
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 33
            },
            "heatmap": {},
            "highlightCards": true,
            "id": 35,
            "legend": {
              "show": true
            },
            "links": [],
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_evaluator_evaluation_duration_seconds_bucket{kubernetes_namespace=\"patchman-engine-$namespace\", deployment=~\"patchman-engine-evaluator-$evaluator\", role=~\"mnm|mnm-ci\"}[$interval])) by (le)",
                "format": "heatmap",
                "intervalFactor": 10,
                "legendFormat": "{{le}}",
                "refId": "A"
              }
            ],
            "title": "System evaluation duration",
            "tooltip": {
              "show": true,
              "showHistogram": false
            },
            "type": "heatmap",
            "xAxis": {
              "show": true
            },
            "xBucketNumber": null,
            "xBucketSize": null,
            "yAxis": {
              "decimals": null,
              "format": "s",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true,
              "splitFactor": null
            },
            "yBucketBound": "auto",
            "yBucketNumber": null,
            "yBucketSize": null
          },
          {
            "aliasColors": {
              "error-call-vmaas-updates": "#890f02",
              "error-db-read-inventory-data": "#58140c",
              "error-no-packages": "#99440a",
              "error-process-advisories": "#c15c17",
              "error-update-system-caches": "#bf1b00",
              "success": "#629e51"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 33
            },
            "id": 38,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(patchman_engine_evaluator_evaluation{kubernetes_namespace=\"patchman-engine-$namespace\", deployment=~\"patchman-engine-evaluator-$evaluator\", role=~\"mnm|mnm-ci\"}[$interval])) by (type)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{type}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "System evaluations",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 39
            },
            "id": 47,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "histogram_quantile(0.5, sum(rate(patchman_engine_evaluator_evaluation_part_duration_seconds_bucket{kubernetes_namespace=\"patchman-engine-$namespace\", deployment=~\"patchman-engine-evaluator-$evaluator\", role=~\"mnm|mnm-ci\"}[$interval])) by (part, le))",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$__interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "intervalFactor": 1,
                "legendFormat": "{{part}}",
                "orderByTime": "ASC",
                "policy": "default",
                "refId": "A",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "value"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    }
                  ]
                ],
                "tags": []
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Evaluation part duration median",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "unpatched": "#e24d42"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 39
            },
            "id": 39,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(patchman_engine_evaluator_updates{kubernetes_namespace=\"patchman-engine-$namespace\", deployment=~\"patchman-engine-evaluator-$evaluator\", role=~\"mnm|mnm-ci\"}[$interval])) by (type)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{type}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "System evaluations - patched/unpatched",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "cards": {
              "cardPadding": null,
              "cardRound": null
            },
            "color": {
              "cardColor": "#b4ff00",
              "colorScale": "sqrt",
              "colorScheme": "interpolateSpectral",
              "exponent": 0.5,
              "mode": "spectrum"
            },
            "dataFormat": "tsbuckets",
            "datasource": "$datasource",
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 45
            },
            "heatmap": {},
            "highlightCards": true,
            "id": 37,
            "legend": {
              "show": true
            },
            "links": [],
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_vmaas_sync_sync_duration_seconds_bucket{kubernetes_namespace=\"patchman-engine-$namespace\", role=~\"mnm|mnm-ci\"}[$interval])) by (le)",
                "format": "heatmap",
                "intervalFactor": 10,
                "legendFormat": "{{le}}",
                "refId": "A"
              }
            ],
            "title": "Sync duration (vmaas_sync)",
            "tooltip": {
              "show": true,
              "showHistogram": false
            },
            "type": "heatmap",
            "xAxis": {
              "show": true
            },
            "xBucketNumber": null,
            "xBucketSize": null,
            "yAxis": {
              "decimals": null,
              "format": "s",
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true,
              "splitFactor": null
            },
            "yBucketBound": "auto",
            "yBucketNumber": null,
            "yBucketSize": null
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 45
            },
            "id": 40,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(increase(patchman_engine_vmaas_sync_vmaas_call{kubernetes_namespace=\"patchman-engine-$namespace\", role=~\"mnm|mnm-ci\"}[$interval])) by (type)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "VMaaS Sync - {{type}}",
                "refId": "A"
              },
              {
                "expr": "sum(increase(patchman_engine_manager_dependency_call{kubernetes_namespace=\"patchman-engine-$namespace\", name=\"rbac\"}[$interval])) by (name, status)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{name}} - {{status}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "External services",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "all": "#ba43a9",
              "last_upload: all": "#ba43a9",
              "last_upload: last1D": "#7eb26d",
              "last_upload: last30D": "#967302",
              "last_upload: last7D": "#cca300"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 51
            },
            "id": 51,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(patchman_engine_vmaas_sync_systems{kubernetes_namespace=\"patchman-engine-$namespace\", role=~\"mnm|mnm-ci\", last_upload=~\"last.*\"}) by (last_upload)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "last_upload: {{last_upload}}",
                "refId": "A"
              },
              {
                "expr": "sum(patchman_engine_vmaas_sync_systems{kubernetes_namespace=\"patchman-engine-$namespace\", role=~\"mnm|mnm-ci\", opt_out=\"on\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "opt outed",
                "refId": "B"
              },
              {
                "expr": "sum(patchman_engine_vmaas_sync_systems{kubernetes_namespace=\"patchman-engine-$namespace\", role=~\"mnm|mnm-ci\", last_upload=\"all\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "all",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Database items - systems",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "all": "#ba43a9",
              "bugfix": "#ef843c",
              "enhancement": "#9ac48a",
              "security": "#e24d42",
              "unknown": "#fce2de"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 51
            },
            "id": 42,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(patchman_engine_vmaas_sync_advisories{kubernetes_namespace=\"patchman-engine-$namespace\", role=~\"mnm|mnm-ci\"}) by (type)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{type}}",
                "refId": "A"
              },
              {
                "expr": "sum(patchman_engine_vmaas_sync_advisories{kubernetes_namespace=\"patchman-engine-$namespace\", role=~\"mnm|mnm-ci\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "all",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Database items - advisories",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "all": "#ba43a9",
              "bugfix": "#ef843c",
              "enhancement": "#9ac48a",
              "security": "#e24d42",
              "sum": "#ba43a9",
              "unknown": "#fce2de"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 0,
              "y": 57
            },
            "id": 53,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rdsosmetrics_fileSys_usedPercent{instance=\"patchman-prod\"}) by (mount_point)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{mount_point}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "RDS data capacity usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "percent",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "all": "#ba43a9",
              "bugfix": "#ef843c",
              "enhancement": "#9ac48a",
              "security": "#e24d42",
              "sum": "#ba43a9",
              "unknown": "#fce2de"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "$datasource",
            "fill": 1,
            "gridPos": {
              "h": 6,
              "w": 12,
              "x": 12,
              "y": 57
            },
            "id": 52,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(label_replace(rdsosmetrics_processList_cpuUsedPc{instance=\"patchman-prod\", role=\"mnm\"}, \"db_user\", \"$1\", \"name\", \"postgres: ([^ ]+) .+\")) by (db_user)",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "{{db_user}}",
                "refId": "B"
              },
              {
                "expr": "sum(rdsosmetrics_processList_cpuUsedPc{instance='patchman-prod', role=~\"mnm\"})",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "sum",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "RDS CPU usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "none",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "refresh": false,
        "schemaVersion": 16,
        "style": "dark",
        "tags": [],
        "templating": {
          "list": [
            {
              "auto": false,
              "auto_count": 30,
              "auto_min": "10s",
              "current": {
                "selected": true,
                "text": "5m",
                "value": "5m"
              },
              "hide": 0,
              "label": null,
              "name": "interval",
              "options": [
                {
                  "selected": false,
                  "text": "1m",
                  "value": "1m"
                },
                {
                  "selected": true,
                  "text": "5m",
                  "value": "5m"
                },
                {
                  "selected": false,
                  "text": "10m",
                  "value": "10m"
                },
                {
                  "selected": false,
                  "text": "30m",
                  "value": "30m"
                },
                {
                  "selected": false,
                  "text": "1h",
                  "value": "1h"
                },
                {
                  "selected": false,
                  "text": "6h",
                  "value": "6h"
                },
                {
                  "selected": false,
                  "text": "12h",
                  "value": "12h"
                },
                {
                  "selected": false,
                  "text": "1d",
                  "value": "1d"
                },
                {
                  "selected": false,
                  "text": "7d",
                  "value": "7d"
                },
                {
                  "selected": false,
                  "text": "14d",
                  "value": "14d"
                },
                {
                  "selected": false,
                  "text": "30d",
                  "value": "30d"
                }
              ],
              "query": "1m,5m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
              "refresh": 2,
              "skipUrlSync": false,
              "type": "interval"
            },
            {
              "allValue": null,
              "current": {
                "text": "prod",
                "value": "prod"
              },
              "hide": 0,
              "includeAll": false,
              "label": null,
              "multi": false,
              "name": "namespace",
              "options": [
                {
                  "selected": false,
                  "text": "prod",
                  "value": "prod"
                },
                {
                  "selected": true,
                  "text": "stage",
                  "value": "stage"
                },
                {
                  "selected": false,
                  "text": "ci",
                  "value": "ci"
                },
                {
                  "selected": false,
                  "text": "qa",
                  "value": "qa"
                }
              ],
              "query": "prod, stage, ci, qa",
              "skipUrlSync": false,
              "type": "custom"
            },
            {
              "allValue": null,
              "current": {
                "tags": [],
                "text": ".*",
                "value": ".*"
              },
              "hide": 0,
              "includeAll": false,
              "label": null,
              "multi": false,
              "name": "evaluator",
              "options": [
                {
                  "selected": true,
                  "text": ".*",
                  "value": ".*"
                },
                {
                  "selected": false,
                  "text": "upload.*",
                  "value": "upload.*"
                },
                {
                  "selected": false,
                  "text": "recalc.*",
                  "value": "recalc.*"
                }
              ],
              "query": ".*, upload.*, recalc.*",
              "skipUrlSync": false,
              "type": "custom"
            },
            {
              "allValue": null,
              "current": {
                "tags": [],
                "text": ".*",
                "value": ".*"
              },
              "hide": 0,
              "includeAll": false,
              "label": "event",
              "multi": false,
              "name": "event",
              "options": [
                {
                  "selected": false,
                  "text": "upload",
                  "value": "upload"
                },
                {
                  "selected": false,
                  "text": "delete",
                  "value": "delete"
                },
                {
                  "selected": true,
                  "text": ".*",
                  "value": ".*"
                }
              ],
              "query": "upload, delete, .*",
              "skipUrlSync": false,
              "type": "custom"
            },
            {
              "current": {
                "text": "No data sources found",
                "value": ""
              },
              "hide": 0,
              "label": null,
              "name": "datasource",
              "options": [],
              "query": "prometheus",
              "refresh": 1,
              "regex": "/.*crc.*/",
              "skipUrlSync": false,
              "type": "datasource"
            }
          ]
        },
        "time": {
          "from": "now-6h",
          "to": "now"
        },
        "timepicker": {
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "timezone": "",
        "title": "patchman-engine",
        "uid": "ZommNF-Wk",
        "version": 12
      }
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: grafana-dashboard-insights-patchman-engine-general
