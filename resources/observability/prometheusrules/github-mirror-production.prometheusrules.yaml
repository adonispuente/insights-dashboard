---
$schema: /openshift/prometheus-rule-1.yml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    prometheus: app-sre
    role: alert-rules
  name: github-mirror
spec:
  groups:
  - name: github-mirror.rules
    rules:
    - alert: GithubMirrorIsDown
      annotations:
        dashboard: https://grafana.app-sre.devshift.net/d/DE29QJlWk/github-mirror?orgId=1&refresh=5m
        message: Github Mirror has disappeared from Prometheus target discovery.
        runbook: https://gitlab.cee.redhat.com/service/app-interface/blob/master/docs/app-sre/sop/GithubMirrorIsDown.md
      expr: |
        absent(up{job="github-mirror-production"} == 1)
      for: 1m
      labels:
        service: github-mirror
        severity: high
