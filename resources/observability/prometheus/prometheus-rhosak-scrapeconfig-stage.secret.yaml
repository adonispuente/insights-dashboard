apiVersion: v1
kind: Secret
metadata:
  name: prometheus-rhosak-stage-scrape-config
  annotations:
    qontract.ignore_reconcile_time: "true"
data:
  prometheus-rhosak-stage-scrape.yaml:
    {{% b64encode %}}
    # Scrape config for RHOSAK stage
    - job_name: "kafka-federate"
      static_configs:
      - targets: ["api.openshift.com"]
      scheme: "https"
      metrics_path: {{{ vault('insights/insights-stage/strimzi-stage/metrics', 'metrics_path') }}}
      oauth2:
        client_id: {{{ vault('insights/insights-stage/strimzi-stage/metrics', 'client_id') }}}
        client_secret: {{{ vault('insights/insights-stage/strimzi-stage/metrics', 'client_secret') }}}
        token_url: {{{ vault('insights/insights-stage/strimzi-stage/metrics', 'token_url') }}}
    {{% endb64encode %}}
