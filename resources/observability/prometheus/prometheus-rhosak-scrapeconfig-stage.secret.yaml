apiVersion: v1
kind: Secret
metadata:
  name: prometheus-rhosak-stage-scrape-config
  annotations:
    qontract.ignore_reconcile_time: "true"
data:
  prometheus-rhosak-stage-scrape.yaml:
    {{% b64encode %}}
    # Scrape config for RHOSAK stage
    - job_name: "kafka-federate"
      static_configs:
      - targets: ["api.openshift.com"]
      scheme: "https"
      metrics_path: {{{ vault('insights/secrets/insights-stage/strimzi-stage/metrics', 'metrics_path', 2) }}}
      oauth2:
        client_id: {{{ vault('insights/secrets/insights-stage/strimzi-stage/metrics', 'client_id', 2) }}}
        client_secret: {{{ vault('insights/secrets/insights-stage/strimzi-stage/metrics', 'client_secret', 2) }}}
        token_url: {{{ vault('insights/secrets/insights-stage/strimzi-stage/metrics', 'token_url', 2) }}}
    {{% endb64encode %}}
