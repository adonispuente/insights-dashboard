apiVersion: v1
kind: Secret
metadata:
  name: grafana-datasources
data:
  datasources.yaml:
    {{% b64encode %}}
        {
            "apiVersion": 1,
            "datasources": [
                {
                    "name": "recent-production",
                    "type": "prometheus",
                    "typeLogoUrl": "",
                    "access": "proxy",
                    "isDefault": false,
                    "url": "https://infogw-proxy.api.openshift.com/",
                    "basicAuth": false,
                    "isDefault": true,
                    "withCredentials": false,
                    "jsonData": {
                        "tlsSkipVerify": true,
                        "httpHeaderName1": "Authorization"
                    },
                    "secureJsonData": {
                        "httpHeaderValue1": "Bearer {{{ vault('app-interface/app-sre/app-sre-observability-production/grafana/datasources', 'starter-us-east-1b-cluster-prometheus') }}}"
                    }
                },
                {
                    "name": "recent-stage",
                    "type": "prometheus",
                    "typeLogoUrl": "",
                    "access": "proxy",
                    "isDefault": false,
                    "url": "https://infogw-proxy.api.openshift.com/",
                    "basicAuth": false,
                    "isDefault": true,
                    "withCredentials": false,
                    "jsonData": {
                        "tlsSkipVerify": true,
                        "httpHeaderName1": "Authorization"
                    },
                    "secureJsonData": {
                        "httpHeaderValue1": "Bearer {{{ vault('app-interface/app-sre/app-sre-observability-production/grafana/datasources', 'starter-us-east-1b-cluster-prometheus') }}}"
                    }
                },    
                {
                    "name": "historical-production",
                    "type": "prometheus",
                    "typeLogoUrl": "",
                    "access": "proxy",
                    "url": "https://telemeter-lts.datahub.redhat.com",
                    "basicAuth": false,
                    "withCredentials": false,
                    "jsonData": {
                        "tlsSkipVerify": true,
                        "httpHeaderName1": "Authorization"
                    },
                    "secureJsonData": {
                        "httpHeaderValue1": "Bearer {{{ vault('app-interface/app-sre/app-sre-observability-production/grafana/datasources', 'starter-us-east-1b-cluster-prometheus') }}}"
                    }
                },
                {
                    "name": "historical-stage",
                    "type": "prometheus",
                    "typeLogoUrl": "",
                    "access": "proxy",
                    "url": "https://telemeter-lts.datahub.redhat.com",
                    "basicAuth": false,
                    "withCredentials": false,
                    "jsonData": {
                        "tlsSkipVerify": true,
                        "httpHeaderName1": "Authorization"
                    },
                    "secureJsonData": {
                        "httpHeaderValue1": "Bearer {{{ vault('app-interface/app-sre/app-sre-observability-production/grafana/datasources', 'starter-us-east-1b-cluster-prometheus') }}}"
                    }
                }
            ]
        }
    {{% endb64encode %}}
