apiVersion: v1
kind: ConfigMap
metadata:
  name: deployment-validation-operator-config
  labels:
    name: deployment-validation-operator
  annotations:
    qontract.recycle: "true"
data:
  deployment-validation-operator-config.yaml: |-
    checks:
      # if doNotAutoAddDefaults is true, default checks are not automatically added.
      doNotAutoAddDefaults: false

      # addAllBuiltIn, if set, adds all built-in checks. This allows users to
      # explicitly opt-out of checks that are not relevant using Exclude.
      # Takes precedence over doNotAutoAddDefaults, if both are set.
      addAllBuiltIn: true

      exclude:
      - "access-to-create-pods" # ignoring role resource checks for now - revisit in the future
      - "access-to-secrets" # ignoring role resource checks for now - revisit in the future
      - "cluster-admin-role-binding" # ignoring role resource checks for now - revisit in the future
      - "dangling-service" # not supported by DVO
      - "env-var-secret" # opinionated and we dont consider this valuable currently
      - "no-extensions-v1beta" # this may need to be rethought to consider client-side k8s-api-version-requests - revisit in the future
      - "no-read-only-root-fs" # avoid false-positive noise - revisit in the future
      - "non-existent-service-account" # not supported by DVO
      - "non-isolated-pod" # not supported by DVO
      - "read-secret-from-env-var" # opinionated and we dont consider this valuable currently
      - "required-annotation-email" # opinionated and we dont consider this valuable currently
      - "required-label-owner" # opinionated and we dont consider this valuable currently
      - "run-as-non-root" # avoid false-positive noise - revisit in the future
      - "use-namespace" # avoid false-positive noise - revisit in the future
      - "wildcard-in-rules" # ignoring role resource checks for now - revisit in the future
