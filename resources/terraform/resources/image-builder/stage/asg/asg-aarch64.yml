$schema: /aws/asg-defaults-1.yml

max_size: 1
min_size: 1
instance_types:
- c6g.large
- c6gd.large
- c7g.large
iam_role_name: workers-aoc-staging-role

vpc_zone_identifier:
- subnet-015034f54fa16a0ce # Image-builder-service-Stage-InternalA
- subnet-0e37f601cfb3e7662 # Image-builder-service-Stage-InternalB
- subnet-0656db791129ba0ec # Image-builder-service-Stage-InternalC
- subnet-0f94e40a0461b3e86 # Image-builder-service-Stage-InternalD

capacity_rebalance: true

max_instance_lifetime: 604800

instances_distribution:
  spot_allocation_strategy: price-capacity-optimized
  on_demand_base_capacity: 0
  on_demand_percentage_above_base_capacity: 0
  spot_instance_pools: 0

vpc_security_group_ids: ["sg-0ae98ece9e3f57afa"]

instance_refresh_preferences:
  instance_warmup: 300
  min_healthy_percentage: 80

update_default_version: true

block_device_mappings:
- device_name: /dev/sda1
  ebs:
    volume_size: 50
    volume_type: gp3
    encrypted: true
