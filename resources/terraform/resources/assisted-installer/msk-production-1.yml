$schema: /aws/msk-defaults-1.yml
kafka_version: '2.8.1'
number_of_broker_nodes: 3
broker_node_group_info:
  instance_type: kafka.m5.large
  client_subnets:
  # All subnets are from VPC vpc-0e9fbceea37f50cc8 (app-sre vpc 01 - peered).
  - subnet-0786814828eec71d5 # app-sre 01 MSK subnet - east-1a
  - subnet-090931fcf0e6ff05b # app-sre 02 MSK subnet - east-1b
  - subnet-007d55f94dbc50101 # app-sre 03 MSK subnet - east-1c
  security_groups:
  # Security Groups allowing access to the MSK cluster:
  #- sg-0f32ecf196442c3de # app-sre-prod-01-msk
  - sg-046ac227f673aa3b6 # app-sre-prod-04-msk
  ebs_volume_size: 100
server_properties: |
  auto.create.topics.enable=false
  default.replication.factor=3
  min.insync.replicas=2
  num.io.threads=8
  num.network.threads=5
  num.partitions=6
  num.replica.fetchers=2
  replica.lag.time.max.ms=30000
  socket.receive.buffer.bytes=102400
  socket.request.max.bytes=104857600
  socket.send.buffer.bytes=102400
  unclean.leader.election.enable=true
  zookeeper.session.timeout.ms=18000
  allow.everyone.if.no.acl.found=false
logging_info:
  broker_logs:
    cloudwatch_logs:
      enabled: true
      retention_in_days: 14
client_authentication:
  sasl:
    scram: true
