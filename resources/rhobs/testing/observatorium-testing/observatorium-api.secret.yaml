---
apiVersion: v1
kind: Secret
metadata:
  name: observatorium-observatorium-api
  annotations:
    qontract.recycle: "true"
    qontract.ignore_reconcile_time: "true"
data:
  client-id: {{% b64encode %}}{{{ vault('rhobs/testing/observatorium-testing/observatorium-observatorium-api', 'client-id', 2) }}}{{% endb64encode %}}
  client-secret: {{% b64encode %}}{{{ vault('rhobs/testing/observatorium-testing/observatorium-observatorium-api', 'client-secret', 2) }}}{{% endb64encode %}}
  issuer-url: {{% b64encode %}}https://sso.redhat.com/auth/realms/redhat-external{{% endb64encode %}}
  tenants.yaml: >-
    {{% b64encode %}}
    tenants:
      - id: 0fc2b00e-201b-4c17-b9f2-19d91adc4fd2
        name: rhobs
        oidc:
          clientID: {{{ vault('rhobs/testing/observatorium-testing/observatorium-observatorium-api', 'client-id', 2) }}}
          clientSecret: {{{ vault('rhobs/testing/observatorium-testing/observatorium-observatorium-api', 'client-secret', 2) }}}
          issuerURL: https://sso.redhat.com/auth/realms/redhat-external
          redirectURL: https://observatorium.apps.rhobs-testing.qqzf.p1.openshiftapps.com/oidc/rhobs/callback
          usernameClaim: preferred_username
          groupClaim: email
    {{% endb64encode %}}
