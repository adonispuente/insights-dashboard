apiVersion: v1
kind: Secret
metadata:
  labels:
     app: keycloak
  name:  keycloak-db-secret
  annotations:
    qontract.recycle: "true"  
type: Opaque
data:
  POSTGRES_DATABASE: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/mas-sso-production/mas-sso-rds', 'db.name') }}} {{%- endb64encode %}}
  POSTGRES_HOST: {{% b64encode %}} {{{ "mas-sso-postgresql" }}} {{%- endb64encode %}}
  POSTGRES_PASSWORD: {{% b64encode %}}{{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/mas-sso-production/mas-sso-rds', 'db.password') }}} {{%- endb64encode %}}
  POSTGRES_USERNAME: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/mas-sso-production/mas-sso-rds', 'db.user') }}} {{%- endb64encode %}}
  POSTGRES_EXTERNAL_ADDRESS: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/mas-sso-production/mas-sso-rds', 'db.host') }}} {{%- endb64encode %}}
  POSTGRES_EXTERNAL_PORT: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/app-sre-prod-04/mas-sso-production/mas-sso-rds', 'db.port') }}} {{%- endb64encode %}}
