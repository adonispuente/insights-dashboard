- job-template:
    id: 'insights-notifications-sonarqube-scan-pull-request'
    name: '{gh_org}-{gh_repo}-sonarqube-scan-pull-request-{branch}'
    status_context: 'SonarQube scan'
    pr_check_script_path: './.rhcicd/sonarqube/sonarqube.bash'
    wrappers:
    - ansicolor
    - timeout_wrapper:
        timeout: '{timeout}'
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *app_interface_creds
        - *insights_ephemeral_oc_login
        - *insights_notifications_sonarqube
        - *insights_rh_registry_pull_secret
        - *insightsdroid_github
    <<: *insights_gh_pr_check
- job-template:
    id: 'insights-notifications-sonarqube-scan-master'
    name: '{gh_org}-{gh_repo}-sonarqube-scan-master'
    branch: 'master'
    build_deploy_script_path: './.rhcicd/sonarqube/sonarqube.bash'
    wrappers:
    - ansicolor
    - timeout_wrapper:
        timeout: '{timeout}'
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_notifications_sonarqube
        - *insights_rh_registry_pull_secret
    <<: *gh_build_master
