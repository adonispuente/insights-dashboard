
- job-template:
    id: 'insights-marketplace-gh-pr-check'
    name: '{gh_org}-{gh_repo}-pr-check'
    branch: "master"
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_ephemeral_oc_login
        - *app_interface_creds
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insightsdroid_github
        - *insights_marketplace_sonarqube_token
        - *insights_marketplace_sonarqube_report_url
        - *insights_marketplace_sonarqube_cli_url
        - *insights_marketplace_rh_it_root_ca
    <<: *insights_gh_pr_check

- job-template:
    id: 'insights-marketplace-gh-build-master'
    name: '{gh_org}-{gh_repo}-gh-build-{branch}'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *insights_rh_registry_pull_secret
        - *quay_secret_push
        - *quay_api_token
        - *insights_marketplace_sonarqube_token
        - *insights_marketplace_sonarqube_report_url
        - *insights_marketplace_sonarqube_cli_url
        - *insights_marketplace_rh_it_root_ca
    <<: *gh_build_master

- job-template:
    id: 'insights-marketplace-s3-sync-psi'
    name: 'insights-marketplace-s3-sync-psi'
    branch: main
    gl_group: cost-management
    gl_project: s3-data-sync
    ci_cmd: './sync.sh'
    wrappers:
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *gitlab_token
        - *app_sre_bot_push_token
        - *insightsdroid_github
        - *insights_marketplace_psi_sync_source_provider
        - *insights_marketplace_psi_sync_source_access_key_id
        - *insights_marketplace_psi_sync_source_secret_access_key
        - *insights_marketplace_psi_sync_source_region
        - *insights_marketplace_psi_sync_source_bucket
        - *insights_marketplace_psi_sync_destination_provider
        - *insights_marketplace_psi_sync_destination_access_key_id
        - *insights_marketplace_psi_sync_destination_secret_access_key
        - *insights_marketplace_psi_sync_destination_region
        - *insights_marketplace_psi_sync_destination_endpoint
        - *insights_marketplace_psi_sync_destination_bucket
    <<: *gl_timed

- job-template:
    id: 'insights-marketplace-s3-sync-ibm'
    name: 'insights-marketplace-s3-sync-ibm'
    branch: main
    gl_group: cost-management
    gl_project: s3-data-sync
    ci_cmd: './sync.sh'
    wrappers:
    - ansicolor
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *gitlab_token
        - *app_sre_bot_push_token
        - *insightsdroid_github
        - *insights_marketplace_ibm_sync_source_provider
        - *insights_marketplace_ibm_sync_source_access_key_id
        - *insights_marketplace_ibm_sync_source_secret_access_key
        - *insights_marketplace_ibm_sync_source_region
        - *insights_marketplace_ibm_sync_source_bucket
        - *insights_marketplace_ibm_sync_destination_provider
        - *insights_marketplace_ibm_sync_destination_access_key_id
        - *insights_marketplace_ibm_sync_destination_secret_access_key
        - *insights_marketplace_ibm_sync_destination_region
        - *insights_marketplace_ibm_sync_destination_endpoint
        - *insights_marketplace_ibm_sync_destination_bucket
    <<: *gl_timed
