- base_templates:
    name: insights-base-templates

    insights_gh_pr_check: &insights_gh_pr_check
        publishers:
        - junit:
            results: 'artifacts/junit-*.xml'
        - archive:
            artifacts: 'artifacts/**/*'
        <<: *gh_properties
        scm:
        - git:
            url: 'git@github.com:{gh_org}/{gh_repo}.git'
            credentials-id: '{github_ssh_credentials}'
            skip-tag: true
            refspec: '+refs/pull/*:refs/remotes/origin/pr/*'
            branches:
            - '${{ghprbActualCommit}}'
            merge:
                remote: origin
                branch: '{branch}'
            git-config-name: "AppSRE"
            git-config-email: "sd-app-sre@redhat.com"
            included-regions:
            - '{include_path}'
            prune: true
            clean:
                before: true
            wipe-workspace: true
        triggers:
            - github-pull-request:
                cron: '* * * * *'
                github-hooks: '{github_hooks}'
                permit-all: false
                trigger-phrase: '(?ms).*^(\[test\]|\/retest|\/lgtm|\/lgtm cancel|\/hold|\/hold cancel|\/ok-to-test)\s*$.*'
                org-list:
                - '{gh_org}'
                allow-whitelist-orgs-as-admins: true
                admin-list:
                - dependabot[bot]
                status-context: '{status_context}'
                white-list-target-branches:
                - '{white_list_target_branches}'
        <<: *pr_check_template
