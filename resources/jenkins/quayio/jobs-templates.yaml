- job-template:
    id: 'gh-build-master-quayio'
    name: '{gh_org}-{gh_repo}-gh-build-master'
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    - vault-secrets:
        <<: *vault_defaults
        secrets:
        - *quayio_backup_ecr
        - *kube_config
        - *quay_secret_push
        - *app_sre_bot_push_token
    <<: *gh_build_master

- job-template:
    id: 'saas-pr-check-quay'
    name: '{gl_group}-{gl_project}-{saasherder_context}-saas-pr-check-{saas_env}'
    dry_run: "yes"
    repo_url: 'https://gitlab.cee.redhat.com/{gl_group}/{gl_project}'
    <<: *gl_pr_check
    <<: *saas_deploy

- job-template:
    id: 'saas-deploy-with-upstream'
    name: '{gl_group}-{gl_project}-{saasherder_context}-saas-deploy-with-upstream-{upstream}-{saas_env}'
    repo_url: 'https://gitlab.cee.redhat.com/{gl_group}/{gl_project}'
    upstream: ''
    wrappers:
    - timeout_wrapper:
        timeout: '{timeout}'
    triggers:
    - reverse:
        jobs: '{upstream}'
        results: 'success'
    <<: *gl_build_master
    <<: *saas_deploy
    <<: *saas_notify
