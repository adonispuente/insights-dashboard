- job-template:
      id: "osde2e-parameterized-job"
      name: "osde2e-parameterized-job"
      instance_type: "m5.xlarge"
      region: "us-east-1"
      report_dir: "osde2e-report"
      configs: "rosa,stage,sanity"
      branch: main
      wrappers:
      - ansicolor
      - vault-secrets:
          <<: *vault_defaults
          secrets:
          - *osde2e-aws-keys
          - *osde2e-ocm-access
      builders:
      - shell:
          command: "{ci_cmd}"
      parameters:
      - string:
          name: INSTANCE_TYPE
          default: "{instance_type}"
          description: "The cluster nodes instance type to deploy"
      - string:
          name: CLOUD_PROVIDER_REGION
          default: "{region}"
          description: "The cloud provider region to deploy the cluster into"
          required: true
      - string:
          name: REPORT_DIR
          default: "{report_dir}"
          description: "The directory where osde2e will write results to"
      - string:
          name: CONFIGS
          default: "{configs}"
          description: "A comma separated list of pre-canned osde2e configs to use"
          required: true
      - string:
          name: CLUSTER_ID
          description: "The cluster ID of an existing cluster to be used over deploying a new one"
      - string:
          name: INSTALL_LATEST_XY
          description: "Installs the latest X.Y version (e.g. 4.13) available from the channel group defined"
      - bool:
          name: STS
          default: true
          description: "Toggles on/off whether the ROSA cluster uses AWS security token service (STS) over IAM credentials"
      - choice:
          name: ENVIRONMENT
          choices:
            - stage
            - prod
          description: "The OCM environment to use"
      - string:
          name: TEST_HARNESSES
          description: "Comma separated list of test harness images"
      - string:
          name: POLLING_TIMEOUT
          default: "3600"
          description: "Timeout in seconds"      
      - bool:
           name: SKIP_CLUSTER_HEALTH_CHECKS
           default: false
           description: "Toggles on/off whether cluster health checks are performed post cluster deployment"
      - bool:
          name: SKIP_DESTROY_CLUSTER
          default: false
          description: "Toggles on/off whether the cluster will be destroyed at the end of osde2e execution"
      - bool:
          name: SKIP_MUST_GATHER
          default: true
          description: "Toggles on/off gathering OpenShift must gather logs"
      - bool:
          name: OCM_CCS
          default: false
          description: "Toggles on/off gathering CCS for OSD clusters"     
      - bool:
          name: MULTI_AZ
          default: false
          description: "Deploys test cluster across multiple availability zones."          
      - string:
          name: ADDITIONAL_FLAGS
          description: "Program arguments to be passed to `osde2e test` command"
      publishers:
      - junit:
          results: '**/junit*.xml'
      properties:
      - build-discarder:
          days-to-keep: 30
          artifact-days-to-keep: 30
      <<: *gh_checkout
