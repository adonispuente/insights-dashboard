---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  labels:
    app: observatorium-api
  name: observatorium-mst-api
  annotations:
   # enable rate limiting of connections.
   haproxy.router.openshift.io/rate-limit-connections: 'true'
   # allow 1 write call from one IP address for every 30 seconds.
   haproxy.router.openshift.io/rate-limit-connections.rate-http: '1'
spec:
  host: observatorium-mst.api.stage.openshift.com
  port:
    targetPort: public
  tls:
    insecureEdgeTerminationPolicy: Redirect
    termination: edge
  to:
    kind: Service
    name: observatorium-observatorium-mst-api
    weight: 100
  wildcardPolicy: None
