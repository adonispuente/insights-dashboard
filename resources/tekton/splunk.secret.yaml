apiVersion: v1
kind: Secret
metadata:
  name: tekton-pipelines-splunk
  annotations:
    qontract.ignore_reconcile_time: "true"
data:
  endpoint: {{% b64encode %}}{{% if resource.namespace.cluster.internal }}{{{ vault('app-sre/creds/splunk/tekton-int', 'URL') }}}{{% else }}{{{ vault('app-sre/creds/splunk/tekton-ext', 'URL') }}}{{%- endb64encode %}}
  token: {{% b64encode %}}{{% if resource.namespace.cluster.internal }}{{{ vault('app-sre/creds/splunk/tekton-int', 'HTTP-token') }}}{{% else }}{{{ vault('app-sre/creds/splunk/tekton-ext', 'HTTP-token') }}}{{%- endb64encode %}}
