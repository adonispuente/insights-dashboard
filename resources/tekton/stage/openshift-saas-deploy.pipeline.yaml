apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: openshift-saas-deploy
spec:
  params:
  - name: saas_file_name
    type: string
  - name: env_name
    type: string
  - name: tkn_cluster_console_url
    type: string
  - name: tkn_namespace_name
    type: string
  tasks:
  - name: openshift-saas-deploy
    taskRef:
      name: openshift-saas-deploy
    params:
    - name: saas_file_name
      value: "$(params.saas_file_name)"
    - name: env_name
      value: "$(params.env_name)"
  finally:
  - name: push-http-splunk-tekton-pipeleine-metadata-stage
    taskRef:
      name: push-http-splunk-tekton-pipeleine-metadata-stage
    params:
    - name: saas_file_name
      value: "$(params.saas_file_name)"
    - name: env_name
      value: "$(params.env_name)"
    - name: aggregate_task_status
      value: "$(tasks.status)"
    - name: tkn_cluster_console_url
      value: "$(params.tkn_cluster_console_url)"
    - name: tkn_namespace_name
      value: "$(params.tkn_namespace_name)"
