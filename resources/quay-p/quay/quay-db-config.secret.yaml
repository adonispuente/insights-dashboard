apiVersion: v1
kind: Secret
metadata:
  name: quay-db-config-secret
  annotations:
    qontract.ignore_reconcile_time: "true"
data:
  {{%- if standby %}}
  db.host: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/quayp04ue2/quay/quayio-production-57-py3-replica-rds', 'db.host') }}} {{%- endb64encode %}}
  db.port: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/quayp04ue2/quay/quayio-production-57-py3-replica-rds', 'db.port') }}} {{%- endb64encode %}}
  {{%- else %}}
  db.host: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/quayp05ue1/quay/quayio-production-py3-rds', 'db.host') }}} {{%- endb64encode %}}
  db.port: {{% b64encode %}} {{{ vault('app-sre/integrations-output/terraform-resources/quayp05ue1/quay/quayio-production-py3-rds', 'db.port') }}} {{%- endb64encode %}}
  {{%- endif %}}
  db.user: {{% b64encode %}} {{{ vault('app-interface/quayio-prod-us-east-1/quay/quay-additional-config', 'db.user', '{{ additional_config_vault_secret_version }}') }}} {{%- endb64encode %}}
  db.password: {{% b64encode %}}{{{ vault('app-interface/quayio-prod-us-east-1/quay/quay-additional-config', 'db.password', '{{ additional_config_vault_secret_version }}') }}} {{%- endb64encode %}}
  db.name: {{% b64encode %}} {{{ vault('app-interface/quayio-prod-us-east-1/quay/quay-additional-config', 'db.name', '{{ additional_config_vault_secret_version }}') }}} {{%- endb64encode %}}
