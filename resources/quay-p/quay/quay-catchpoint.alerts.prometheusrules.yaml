---
$schema: /openshift/prometheus-rule-1.yml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    prometheus: app-sre
    role: alert-rules
  name: quay-catchpoint-alerts
spec:
  groups:
  - name: quay-catchpoint
    rules:
    - alert: QuayPushPullMonitorFailed
      expr: |
        increase(catchpoint_check_failures_total{probe="quayio-push-pull-monitor-v2"}[5m]) > 0
      for: 5m
      labels:
        severity: high
        service: quay
      annotations:
        message: "The Quay Push/Pull monitor on catchpoint failed in the last 5m."
        runbook: "https://gitlab.cee.redhat.com/service/app-interface/tree/master/docs/quay/sop/quay-catchpoint-failure.md"
