---
"$schema": /metaschema-1.json
version: '1.0'
type: object

additionalProperties: false
properties:
  "$schema":
    type: string
    enum:
    - /dependencies/jenkins-config-1.yml
  labels:
    "$ref": "/common-1.json#/definitions/labels"
  name:
    type: string
  description:
    type: string
  instance:
    "$ref": "/common-1.json#/definitions/crossref"
    "$schemaRef": "/dependencies/jenkins-instance-1.yml"
  type:
    type: string
    enum:
    - defaults
    - global-defaults
    - views
    - secrets
    - base-templates
    - global-base-templates
    - job-templates
    - jobs
  config_path:
    type: string
  config:
    type: array
    items:
      type: object
      oneOf:
      - additionalProperties: false
        properties:
          view:
            type: object
            properties:
              name:
                type: string
              description:
                type: string
              view-type:
                type: string
              job-filters:
                type: object
                properties:
                  regex-job:
                    type: object
                    properties:
                      regex-name:
                        type: string
                      regex:
                        type: string
                    required:
                    - regex-name
                    - regex
                required:
                - regex-job
            required:
            - name
            - description
            - view-type
            - job-filters
        required:
        - view
      - additionalProperties: false
        properties:
          project:
            type: object
            properties:
              name:
                type: string
              label:
                type: string
              node:
                type: string
              gl_group:
                type: string
              gl_project:
                type: string
              gh_org:
                type: string
              gh_repo:
                type: string
              quay_org:
                type: string
              kube_cluster:
                type: string
              kube_namespace:
                type: string
              saasherder_context:
                type: string
              saasherder_services:
                type: string
              saas_git:
                type: string
              build_deploy_script_path:
                type: string
              post_apply_script_path:
                type: string
              pr_check_script_path:
                type: string
              jobs:
                type: array
                items:
                  type: object
                  oneOf:
                  # github
                  - additionalProperties: false
                    properties:
                      'gh-build-master':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gh-pr-check':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gh-build-master-with-upstream':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gh-build-tag':
                        type: object
                  # gitlab
                  - additionalProperties: false
                    properties:
                      'gl-build-master':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-pr-check':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-timed':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-build-master-with-upstream':
                        type: object
                  # saas repos
                  - additionalProperties: false
                    properties:
                      'saas-deploy':
                        type: object
                  - additionalProperties: false
                    properties:
                      'saas-pr-check':
                        type: object
                  # app-interface
                  - additionalProperties: false
                    properties:
                      'gl-build-master-app-interface':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-pr-check-app-interface':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-periodic-job-app-interface':
                        type: object
                  # app-sre
                  - additionalProperties: false
                    properties:
                      'gh-build-master-vault-manager':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gh-pr-check-vault-manager':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-job-sos-report':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-build-master-osio-scan':
                        type: object
                  - additionalProperties: false
                    properties:
                      'pagerditty':
                        type: object
                  - additionalProperties: false
                    properties:
                      'jenkins-slaves-cleanup':
                        type: object
                  - additionalProperties: false
                    properties:
                      'push-saas-metrics':
                        type: object
                  # clusterimageset
                  - additionalProperties: false
                    properties:
                      'clusterimageset-run':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-build-master-clusterimagesets-apply':
                        type: object
                  - additionalProperties: false
                    properties:
                      'gl-pr-check-clusterimagesets':
                        type: object
                  # insights
                  - additionalProperties: false
                    properties:
                      'gh-build-master-approval-api':
                        type: object
                  # release controller
                  - additionalProperties: false
                    properties:
                      'gh-build-master-release-controller':
                        type: object
                  # uhc
                  - additionalProperties: false
                    properties:
                      'uhc-integration-tests':
                        type: object
                  - additionalProperties: false
                    properties:
                      'uhc-cloud-redhat-com-push-insights':
                        type: object
                  # osd-e2e
                  - additionalProperties: false
                    properties:
                      'gh-run-tests-osd-e2e-{environment}-{version}':
                        type: object
                  # srep-operators
                  - additionalProperties: false
                    properties:
                      'operator-curator':
                        type: object
            required:
            - name
            - label
            - node
        required:
        - project
required:
- "$schema"
- labels
- name
- description
- instance
- type
oneOf:
- required:
  - config
- required:
  - config_path
