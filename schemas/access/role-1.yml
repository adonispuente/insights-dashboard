---
"$schema": /metaschema-1.json
version: "1.0"
type: object

additionalProperties: false
properties:
  "$schema":
    type: string
    enum:
    - /access/role-1.yml
  labels:
    "$ref": "/common-1.json#/definitions/labels"
  name:
    type: string
  description:
    type: string
  permissions:
    type: array
    items:
      "$ref": "/common-1.json#/definitions/crossref"
      "$schemaRef": "/access/permission-1.yml"
  access:
    type: array
    items:
      properties:
        namespace:
          "$ref": "/common-1.json#/definitions/crossref"
          "$schemaRef": "/openshift/namespace-1.yml"
        role:
          type: string
          enum:
          - admin
          - edit
          - view
        cluster:
          "$ref": "/common-1.json#/definitions/crossref"
          "$schemaRef": "/openshift/cluster-1.yml"
        group:
          type: string
        clusterRole:
          type: string
      dependencies:
        role:
        - namespace
        namespace:
        - role
        group:
        - cluster
        clusterRole:
        - cluster
      oneOf:
      - required:
        - namespace
        - role
      - required:
        - cluster
        - group
      - required:
        - cluster
        - clusterRole
  aws_groups:
    type: array
    items:
      "$ref": "/common-1.json#/definitions/crossref"
      "$schemaRef": "/aws/group-1.yml"
  user_policies:
    type: array
    items:
      "$ref": "/common-1.json#/definitions/crossref"
      "$schemaRef": "/aws/policy-1.yml"
required:
- $schema
- labels
- name
- permissions
