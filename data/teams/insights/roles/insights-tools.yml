---
$schema: /access/role-1.yml

labels: {}
name: insights-tools

permissions:
- $ref: /teams/insights/quay-teams/cloudsre.yml
- $ref: /teams/insights/github-teams/insights-vault-admin.yml
- $ref: /dependencies/ci-ext/permissions/ci-ext.yml
- $ref: /dependencies/ci-ext/permissions/ci-ext-job-control.yml
- $ref: /dependencies/unleash/permissions/insights-stage.yml
- $ref: /dependencies/unleash/permissions/insights.yml

oidc_permissions:
- $ref: /dependencies/vault/permissions/oidc/prod/insights/insights-vault-admin.yml

access:
- cluster:
    $ref: /openshift/crcs02ue1/cluster.yml
  group: dedicated-admins
- cluster:
    $ref: /openshift/crcp01ue1/cluster.yml
  group: dedicated-admins

self_service:
- change_type:
    $ref: /app-interface/changetype/saas-file-self-service.yml
  datafiles:
  - $ref: /services/insights/third-party-operators/deploy.yml
  - $ref: /services/insights/strimzi/saas.yml
- change_type:
    $ref: /app-interface/changetype/add-role-member.yml
  datafiles:
  - $ref: /teams/insights/roles/insights-engineers.yml
  - $ref: /teams/insights/roles/insights-tools.yml
  - $ref: /teams/insights/roles/insights-stage-unleash-admin.yml
  - $ref: /teams/insights/roles/insights-unleash-admin.yml
  - $ref: /teams/insights/roles/ephemeral-users.yml
  - $ref: /teams/insights/roles/aws/prod-app-developers.yml
  - $ref: /teams/insights/roles/aws/prod-platform-team.yml
  - $ref: /teams/insights/roles/aws/stage-app-developers.yml
  - $ref: /teams/insights/roles/aws/stage-platform-team.yml
# disabled cluster-owner for now until behaviour in the follwing MRs is clarified
# - https://gitlab.cee.redhat.com/service/app-interface/-/merge_requests/48801
# - https://gitlab.cee.redhat.com/service/app-interface/-/merge_requests/48802
#- change_type:
#    $ref: /app-interface/changetype/cluster-owner.yml
#  datafiles:
#  - $ref: /openshift/insights/c-rh-c-eph/cluster.yml
#  - $ref: /openshift/insights/crcd01ue1/cluster.yml
