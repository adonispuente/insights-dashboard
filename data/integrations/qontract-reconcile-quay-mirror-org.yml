$schema: /app-sre/integration-1.yml

labels: {}

name: quay-mirror-org

description: |
  Mirrors entire quay orgs across quay instances.

  This integration goes over all the repos in both source and target quay orgs,
  and the repo exists in both places it syncs them.

upstream: https://github.com/app-sre/qontract-reconcile

pr_check:
  disabled: true
  cmd: quay-mirror-org --no-compare-tags

managed:
- namespace:
    $ref: /services/app-interface/namespaces/app-interface-stage-int.yml
  spec:
    resources:
      requests:
        memory: 150Mi
        cpu: 200m
      limits:
        memory: 200Mi
        cpu: 300m
    cache: true
    extraArgs: --control-file-dir /.cache --no-compare-tags
- namespace:
    $ref: /services/app-interface/namespaces/app-interface-production-int.yml
  spec:
    resources:
      requests:
        memory: 150Mi
        cpu: 200m
      limits:
        memory: 200Mi
        cpu: 300m
    cache: true
    extraArgs: --control-file-dir /.cache

schemas:
- /dependencies/quay-org-1.yml
- /dependencies/quay-instance-1.yml
- /app-sre/app-1.yml
- /app-interface/app-interface-settings-1.yml
- /app-sre/integration-1.yml
- /dependencies/dependency-1.yml
- /dependencies/container-image-mirror-1.yml
