---
$schema: /openshift/namespace-1.yml

labels: {}

name: openshift-config
description: c-rh-c-eph openshift-config namespace

cluster:
  $ref: /openshift/insights/c-rh-c-eph/cluster.yml

app:
  $ref: /services/app-sre/app.yml

environment:
  $ref: /products/app-sre/environments/stage.yml

managedResourceTypes:
- Template
- Project
- ClusterRoleBinding.rbac.authorization.k8s.io

# when using `oc`, use the override as the kind instead of the resource
managedResourceTypeOverrides:
- resource: Project
  override: Project.config.openshift.io

managedResourceNames:
# https://github.com/openshift/managed-cluster-config/blob/master/deploy/osd-project-request-template/02-role.dedicated-admins-project-request.yaml#L12
- resource: Template
  resourceNames:
    - project-request
- resource: Project
  resourceNames:
    - cluster
- resource: ClusterRoleBinding.rbac.authorization.k8s.io
  resourceNames:
  - dedicated-readers
  - global-clowdenvironment-view
  - global-frontendvironment-view

openshiftResources:
- provider: resource
  path: /setup/project-request-ephemeral.v4.template.yaml
# these are cluster scoped resources, but this should work for now
- provider: resource
  path: /setup/cluster.project.v4.yaml
- provider: resource
  path: /setup/dedicated-readers.clusterrolebinding.yaml
- provider: resource
  path: /insights-common/global-clowdenvironment-view.clusterrolebinding.yaml
- provider: resource
  path: /insights-common/global-frontendenvironment-view.clusterrolebinding.yaml

