---
$schema: /openshift/openshift-cluster-manager-1.yml
labels:
  service: osd-fleet-manager
name: osd-fleet-manager-ocm-production
description: OpenShift Cluster Manager PROD - OSD Fleet Manager
environment:
  $ref: /dependencies/ocm/environments/production.yml
orgId: 294LuIFKC3CgMDiYA1t5X1gQPJq
accessTokenClientId: osd-fleet-manager-production
accessTokenUrl: https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token
accessTokenClientSecret:
  path: app-interface/osd-fleet-manager/production/fleet-manager
  field: ocm-service.clientSecret
  version: 1
addonManagedUpgrades: true
blockedVersions:
- ^.*-ec\..*$
- ^.*-fc\..*$
- ^4\.11\.0-rc\.[0-5]$
# Block upgrades until 4.12.23 for OCPBUGS-15424
- ^4\.12\.[0-9]$
- ^4\.12\.1[0-9]$
- ^4\.12\.2[0-2]$
# For now, block 4.13 upgrades until we are ready for sure
- ^4\.13\..*$
upgradePolicyAllowedWorkloads:
- service-cluster
- management-cluster
upgradePolicyAllowedMutexes:
- canary
- ap-southeast-3
- eu-central-1
- eu-west-1
- us-west-2
- us-east-2
- us-east-1
- ibm-infra
- fleet-wide

inheritVersionData:
- $ref: /dependencies/ocm/osd-fleet-manager/stage.yml
sectors:
- name: canary
- name: ap-southeast-3
  dependencies:
  - name: canary
- name: eu-central-1
  dependencies:
  - name: ap-southeast-3
- name: eu-west-1
  dependencies:
  - name: eu-central-1
- name: us-west-2
  dependencies:
  - name: eu-west-1
- name: us-east-2
  dependencies:
  - name: us-west-2
- name: us-east-1
  dependencies:
  - name: us-east-2
- name: ibm-infra
  dependencies:
  - name: us-east-1
upgradePolicyDefaults:
- name: production-canary
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: canary
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    type: jinja2
    variables:
      schedule: 0 * * * 1-4
      soakDays: 1
- name: production-us-east-2
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: us-east-2
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    variables:
      schedule: 0 * * * 1-4
      soakDays: 5
- name: production-us-east-1
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: us-east-1
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    variables:
      schedule: 0 * * * 1-4
      soakDays: 5
- name: production-us-west-2
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: us-west-2
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    variables:
      schedule: 0 * * * 1-4
      soakDays: 5
- name: production-ap-southeast-3
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: ap-southeast-3
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    variables:
      schedule: 0 * * * 1-4
      soakDays: 5
- name: production-eu-central-1
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: eu-central-1
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    variables:
      schedule: 0 * * * 1-4
      soakDays: 5
- name: production-eu-west-1
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: eu-west-1
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    variables:
      schedule: 0 * * * 1-4
      soakDays: 5
- name: production-ibm-infra
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: ibm-infra
  upgradePolicyTemplate:
    path: /ocm/osd-fleet-manager/upgrade-policy.yaml.j2
    variables:
      schedule: 0 13 * * 1-4
      soakDays: 5
upgradePolicyClusters:
- name: hs-sc-2q7qo6cug
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 1
      mutexes:
      - canary
      - fleet-wide
- name: hs-sc-7okh5jhe0
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: eu-west-1
      soakDays: 5
      mutexes:
      - eu-west-1
      - fleet-wide
- name: hs-mc-7okh5juh0
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: eu-west-1
      soakDays: 5
      mutexes:
      - eu-west-1
      - fleet-wide
- name: hs-sc-65osjkisg
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: us-east-2
      soakDays: 5
      mutexes:
      - us-east-2
      - fleet-wide
- name: hs-mc-65osjkvt0
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: us-east-2
      soakDays: 5
      mutexes:
      - us-east-2
      - fleet-wide
- name: hs-mc-ji5f5fm4g
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 5
      mutexes:
      - canary
      - fleet-wide
- name: hs-sc-aspeu1tig
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: us-west-2
      soakDays: 5
      mutexes:
      - us-west-2
      - fleet-wide
- name: hs-mc-aspeu2bog
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: us-west-2
      soakDays: 5
      mutexes:
      - us-west-2
      - fleet-wide
- name: hs-sc-9l83vuh6g
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: eu-central-1
      soakDays: 5
      mutexes:
      - eu-central-1
      - fleet-wide
- name: hs-mc-v64eks9c0
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: eu-central-1
      soakDays: 5
      mutexes:
      - eu-central-1
      - fleet-wide
- name: hs-sc-jsq1ca30g
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: us-east-1
      soakDays: 5
      mutexes:
      - us-east-1
      - fleet-wide
- name: hs-mc-jsq1cajug
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: us-east-1
      soakDays: 5
      mutexes:
      - us-east-1
      - fleet-wide
- name: hs-mc-i7q8dlgmg
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: us-east-2
      soakDays: 5
      mutexes:
      - us-east-2
      - fleet-wide
- name: hs-sc-g6dtucoo0
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-gn7oe54g0
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-i7q8ep4k0
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-ppoa5lsbg
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-ojqh1ucjg
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-mc-i7q8ephv0
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-mc-g6dtudfmg
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-mc-gn7oe5qu0
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-mc-ppoa5mj5g
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-mc-ojqh1v3ag
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-7iiovl4q0
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-mc-7iiovlik0
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-mc-bdstv4r4g
  upgradePolicy:
    workloads:
    - management-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-lbanibjeg
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 0
      mutexes:
      - canary
- name: hs-sc-lbanibk10
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 0
      mutexes:
      - canary
- name: hs-sc-lbanibong
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-s3i4uikn0
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
- name: hs-sc-lbanidh30
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 0
      mutexes:
      - canary
- name: hs-sc-lbanidnfg
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 0
      mutexes:
      - canary
- name: hs-sc-lbanif9f0
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 0
      mutexes:
      - canary
- name: hs-sc-lbaniffog
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 * * * 1-4
    conditions:
      sector: canary
      soakDays: 0
      mutexes:
      - canary
- name: hs-sc-s3i4ump3g
  upgradePolicy:
    workloads:
    - service-cluster
    schedule: 0 13 * * 1-4
    conditions:
      sector: ibm-infra
      soakDays: 0
      mutexes:
      - ibm-infra
recommendedVersions:
- workload: service-cluster
  channel: stable
  recommendedVersion: 4.12.23
  initialVersion: openshift-v4.12.23
- workload: management-cluster
  channel: stable
  recommendedVersion: 4.12.23
  initialVersion: openshift-v4.12.23
