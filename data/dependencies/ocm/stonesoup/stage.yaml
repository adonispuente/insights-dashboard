---
$schema: /openshift/openshift-cluster-manager-1.yml

labels: {}

name: Red Hat-Developer Tools-Stonesoup
description: This is for managing ROSA clusters for RHTAP
environment:
  $ref: /dependencies/ocm/environments/production.yml
orgId: 2KYM6mWvxTvqkGXPrNTG7SEPDmG
accessTokenClientId: appstudio-staging-ocm-sa
accessTokenUrl: https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token
accessTokenClientSecret:
  path: app-interface/stonesoup/staging-infra
  field: ocm-service.clientSecret
  version: 1
upgradePolicyAllowedWorkloads:
- stone-stg-host
- stone-stg-m01
- stone-stg-rh01
- AllowedMutexes:
- canary
- main
publishVersionData:
- $ref: /dependencies/ocm/stonesoup/stage.yml
sectors:
- name: canary
- name: main
  dependencies:
  - name: canary
upgradePolicyDefaults:
- name: integration-canary
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: canary
  upgradePolicyTemplate:
    path: /ocm/stonesoup/upgrade-policy.yaml.j2
    type: jinja2
    variables:
      schedule: 0,15,30,45 * * * *
      soakDays: 0
- name: integration-main
  matchLabels:
    ext-hypershift.openshift.io/cluster-sector: main
  upgradePolicyTemplate:
    path: /ocm/stonesoup/upgrade-policy.yaml.j2
    variables:
      schedule: 0,15,30,45 * * * *
      soakDays: 0
upgradePolicyClusters:
- name: stone-stg-member-042823
  upgradePolicy:
    workloads:
    - stone-stg-m01
    - stone-stg-rh01
    schedule: 0,15,30,45 * * * *
    conditions:
      soakDays: 0
      mutexes: []
- name: stone-stg-host-042823
  upgradePolicy:
    workloads:
    - stone-stg-host
    schedule: 0,15,30,45 * * * *
    conditions:
      sector: main
      soakDays: 0
      mutexes:
      - main
recommendedVersions:
- workload: stone-stg-host
  channel: stable
  recommendedVersion: 4.12.14
  initialVersion: openshift-v4.12.14
- workload: stone-stg-m01
  channel: stable
  recommendedVersion: 4.12.14
  initialVersion: openshift-v4.12.14
- workload: stone-stg-rh01
  channel: stable
  recommendedVersion: 4.12.14
  initialVersion: openshift-v4.12.14