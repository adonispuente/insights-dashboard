---
$schema: /dependencies/jenkins-instance-1.yml

labels:
  service: ci-int

name: ci-int
description: Internal CI instance for the App SRE managed services

serverUrl: https://ci.int.devshift.net
token:
  path: app-sre/ci-int/jjb-ini
  field: jjb-ini-toml

# adjust jenkins-webhooks-cleaner cron expression or remove it to cause webhooks to be deleted.
previousUrls:
- https://ci-int-jenkins.rhev-ci-vms.eng.rdu2.redhat.com

workerFleets:
- identifier: ci-int-jenkins-worker-app-interface
  account: app-sre
  namespace:
    $ref: /services/app-sre/namespaces/app-sre-ci.yaml
  credentialsId: jenkins
  fsRoot: /var/lib/jenkins
  labelString: app-interface
  numExecutors: 3
  minSpareSize: 1
  maxTotalUses: 100
  idleMinutes: 5
- identifier: ci-int-jenkins-worker-app-sre
  account: app-sre
  namespace:
    $ref: /services/app-sre/namespaces/app-sre-ci.yaml
  credentialsId: jenkins
  fsRoot: /var/lib/jenkins
  labelString: app-sre managed-services osde2e qe quarkus backplane osd-operators
  numExecutors: 3
  maxTotalUses: 200
- identifier: ci-int-jenkins-worker-service-development
  account: app-sre
  namespace:
    $ref: /services/app-sre/namespaces/app-sre-ci.yaml
  credentialsId: jenkins
  fsRoot: /var/lib/jenkins
  labelString: sd-service-development-b sd-uhc
  numExecutors: 3
  maxTotalUses: 100
- identifier: ci-int-jenkins-worker-insights
  account: app-sre
  namespace:
    $ref: /services/app-sre/namespaces/app-sre-ci.yaml
  credentialsId: jenkins
  fsRoot: /var/lib/jenkins
  labelString: insights
  numExecutors: 3
  maxTotalUses: 200
- identifier: ci-int-jenkins-worker-rhel7
  account: app-sre
  namespace:
    $ref: /services/app-sre/namespaces/app-sre-ci.yaml
  credentialsId: jenkins
  fsRoot: /var/lib/jenkins
  labelString: rhel7
  numExecutors: 3
  maxTotalUses: 100
- identifier: ci-int-jenkins-worker-rhel8
  account: app-sre
  namespace:
    $ref: /services/app-sre/namespaces/app-sre-ci.yaml
  credentialsId: jenkins
  fsRoot: /var/lib/jenkins
  labelString: rhel8
  numExecutors: 3
  maxTotalUses: 200

buildsCleanupRules:
  - name: '^openshift-saas-deploy-'
    keep_hours: 744
  - name: 'build-'
    keep_hours: 744
  - name: '-pr-check'
    keep_hours: 168
  - name: 'app-interface-output-run'
    keep_hours: 24
  - name: 'insights-saas-templates-sync'
    keep_hours: 24
  - name: 'insights-ephemeral-namespace-reconciler'
    keep_hours: 24
  - name: 'clusterimageset-run'
    keep_hours: 24
  - name: 'insights-platform-advisor-backend-smoke-test-'
    keep_hours: 24
  - name: 'gl-track-cna-modules'
    keep_hours: 24
  - name: ''
    keep_hours: 360
