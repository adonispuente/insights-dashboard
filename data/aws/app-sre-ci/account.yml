---
$schema: /aws/account-1.yml

labels: {}

name: app-sre-ci
description: AppSRE CI accounts
consoleUrl: https://683321837844.signin.aws.amazon.com/console
uid: '683321837844'
resourcesDefaultRegion: us-east-1
supportedDeploymentRegions:
- us-east-1
- us-east-2
- us-west-1
providerVersion: '3.76.1'

terraformUsername: terraform

accountOwners:
- name: App-SRE Team
  email: sd-app-sre+app-sre-ci@redhat.com

automationToken:
  path: app-sre/creds/terraform/app-sre-ci/config
  field: all

premiumSupport: true

disable:
  integrations:
  - terraform-aws-route53
  - terraform-vpc-peerings
  - terraform-tgw-attachments

sharing:
- provider: ami
  account:
    $ref: /aws/image-builder-stage/account.yml
  regex: '^osbuild-composer-worker.*'
- provider: ami
  account:
    $ref: /aws/image-builder-prod/account.yml
  regex: '^osbuild-composer-worker.*'
- provider: ami
  account:
    $ref: /aws/image-builder-ci/account.yml
  regex: '^osbuild-composer-worker.*'
- provider: ami
  account:
    $ref: /aws/app-sre/account.yml
  regex: '^ci-int-jenkins-worker.*'
- provider: ami
  account:
    $ref: /aws/app-sre/account.yml
  regex: '^ci-ext-jenkins-worker.*'

cleanup:
- provider: ami
  regex: '^ci-int-jenkins-worker.*'
  age: 180d
- provider: ami
  regex: '^ci-ext-jenkins-worker.*'
  age: 180d
- provider: ami
  regex: '^osbuild-composer-worker.*'
  age: 180d

terraformState:
  $ref: /aws/app-sre-ci/state.yml
deletionApprovals:
- type: aws_iam_policy
  name: packer
  expiration: '2022-07-30'
- type: aws_iam_user_policy_attachment
  name: packer
  expiration: '2022-07-30'

resetPasswords:
- user:
    $ref: /teams/app-sre/users/jmosco.yml
  requestId: rememberFiveNine
- user:
    $ref: /teams/app-sre/users/goberlec.yml
  requestId: 5-more-coffee-for-peak-performance
- user:
    $ref: /teams/app-sre/users/kfischer.yml
  requestId: e2b4954e-350a-11ee-80ff-bbb4a326612e
