---
$schema: /openshift/shared-resources-1.yml

labels: {}

name: backplane-stage-shared-resources
description: shared backplane secrets that are common across all stage environments

openshiftResources:
# ocm (stage) service account for backplane
- provider: vault-secret
  path: osd-sre/ims/ims-stg
  name: ocm
  version: 2
# ocm (stage) service account for automated backplane testing
- provider: vault-secret
  path: osd-sre/ims/ims-automation-stg
  name: ocm-backplane-automation-credentials
  version: 1
- provider: vault-secret
  path: osd-sre/hive-stage/backplane/backplane-aws-credentials
  version: 1
# - provider: vault-secret
#   path: app-sre/integrations-output/terraform-resources/backplanes01ue1/backplane/backplane-cert-manager-stage
#   name: backplane-cert-manager
#   version: 1
# - provider: resource-template
#   type: extracurlyjinja2
#   path: /services/backplane/letsencrypt-backplane-issuer.j2
#   variables:
#     vault_path: app-sre/integrations-output/terraform-resources/backplanes01ue1/backplane/backplane-cert-manager-stage
#     secret: backplane-cert-manager
- provider: resource-template
  path: /services/backplane/api-stage-backplane-openshift-com.route.yaml
  variables:
    ip_whitelist:
    # bastion-nasa-1.ops.openshift.com
    - 52.70.201.140
    # bastion-nasa-2.ops.openshift.com
    - 52.6.0.240
    # squid.corp.redhat.com
    - 209.132.188.14
    # file.rdu.redhat.com
    - 66.187.233.202
