---
$schema: /openshift/namespace-1.yml

labels: {}

name: hypershift
description: integration namespace for hypershift

cluster:
  $ref: /openshift/hshifti01ue1/cluster.yml

app:
  $ref: /services/hypershift/app.yml

environment:
  $ref: /products/hypershift/environments/integration-hshifti01ue1.yml

managedResourceTypes:
- Secret

openshiftResources:
- provider: resource-template
  type: extracurlyjinja2
  path: /services/hypershift/oidc-s3-creds.yml
  variables:
    cluster: hsservicei01ue1
- provider: resource-template
  type: extracurlyjinja2
  path: /services/hypershift/private-link-creds.yml
  variables:
    cluster: hshifti01ue1


networkPoliciesAllow:
- $ref: /services/observability/namespaces/openshift-customer-monitoring.hshifti01ue1.yml

managedTerraformResources: true

terraformResources:
- provider: aws-iam-service-account
  account: app-sre-stage
  identifier: hypershift-hshifti01ue1-private-link
  user_policy:
    {
      "Version": "2012-10-17",
      "Statement": [{
        "Action": [
          "sts:AssumeRole"
        ],
        "Effect": "Allow",
        "Resource": "*"
      }]
    }
  output_resource_name: hypershift-private-link-creds
  aws_infrastructure_access:
    cluster:
      $ref: /openshift/hshifti01ue1/cluster.yml
    access_level: network-mgmt
