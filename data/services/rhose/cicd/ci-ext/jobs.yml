---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: rhose

name: rhose-fleet-manager-jobs

description: 'Builds the Fleet Manager (control plane) image and the CronJob runner image'

app:
  $ref: /services/rhose/app.yml

instance:
  $ref: /dependencies/ci-ext/ci-ext.yml

type: jobs

config:
  - project:
      name: rhose-fleet-manager
      label: rhose-fleet-manager
      node: app-sre
      gh_org: 5733d9e2be6485d52ffa08870cabdee0
      gh_repo: sandbox
      quay_org: app-sre
      build_deploy_script_path: ./app-interface/app_sre_fleet_manager_build_push.sh
      jobs:
      - 'gh-build-master':
          branch: main
          display_name: fleet-manager build-main
          slack_channel_notification: rhose-rts
  - project:
      name: rhose-cronjob-runner
      label: rhose-cronjob-runner
      node: app-sre
      gh_org: 5733d9e2be6485d52ffa08870cabdee0
      gh_repo: sandbox
      quay_org: app-sre
      build_deploy_script_path: ./app-interface/app_sre_cronjob_runner_build_push.sh
      # SEARCHME: gh-build-master-job-suffix
      job_suffix: -cronjob-runner
      jobs:
      - 'gh-build-master':
          branch: main
          display_name: cronjob-runner build-main
          slack_channel_notification: rhose-rts
