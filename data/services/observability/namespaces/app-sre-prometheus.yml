---
$schema: /openshift/namespace-1.yml

labels: {}

name: app-sre-prometheus
description: production namespace for the app-sre observability stack

cluster:
  $ref: /openshift/app-sre/cluster.yml

managedResourceTypes:
- ConfigMap
- Secret

openshiftResources:
# ConfigMaps
## Grafana Dashboards
- provider: resource
  path: /app-sre/app-sre-prometheus/grafana/grafana-dashboard-appsre-grafana.configmap.yaml
- provider: resource
  path: /app-sre/app-sre-prometheus/grafana/grafana-dashboard-appsre-rds.configmap.yaml
- provider: resource
  path: /app-sre/app-sre-prometheus/grafana/grafana-dashboard-appsre-vault.configmap.yaml
- provider: resource
  path: /app-sre/app-sre-prometheus/grafana/grafana-dashboard-blackbox-exporter.configmap.yaml
- provider: resource
  path: /app-sre/app-sre-prometheus/grafana/grafana-dashboard-playground.configmap.yaml
- provider: resource
  path: /app-sre/app-sre-prometheus/grafana/grafana-dashboards.configmap.yaml

# Secrets
## Common
- provider: vault-secret
  path: app-interface/app-sre/app-sre-prometheus/app-sre-observability-htpasswd
  version: 2

## Alertmanager
- provider: vault-secret
  path: app-interface/app-sre/app-sre-prometheus/alertmanager/alertmanager-app-sre
  version: 2
- provider: vault-secret
  path: app-interface/app-sre/app-sre-prometheus/alertmanager/alertmanager-proxy-config
  version: 1
 
## Grafana
- provider: vault-secret
  path: app-interface/app-sre/app-sre-prometheus/grafana/grafana-config
  version: 6
- provider: vault-secret
  path: app-interface/app-sre/app-sre-prometheus/grafana/grafana-datasources
  version: 1

## Prometheus
#- provider: vault-secret
#  path: app-interface/app-sre/app-sre-prometheus/prometheus/prometheus-app-sre
#  version: 1
- provider: vault-secret
  path: app-interface/app-sre/app-sre-prometheus/prometheus/prometheus-app-sre-additional-scrapeconfig
  version: 2
- provider: vault-secret
  path: app-interface/app-sre/app-sre-prometheus/prometheus/prometheus-proxy-config
  version: 1
