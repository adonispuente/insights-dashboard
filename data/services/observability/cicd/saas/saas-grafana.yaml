---
$schema: /app-sre/saas-file-1.yml

labels:
  service: app-sre-observability

name: saas-grafana
description: saas-grafana

app:
  $ref: /services/observability/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- DeploymentConfig
- Service

imagePatterns:
- quay.io/app-sre
- quay.io/pusher

# required for insights private repositories
authentication:
  code:
    path: app-sre/creds/github-app-sre-bot
    field: openshift-saas-deploy

resourceTemplates:
- name: grafana
  path: /openshift/grafana.template.yaml
  url: https://gitlab.cee.redhat.com/service/app-sre-observability
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
    parameters:
      REPLICAS: 1
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 813f2094ce317d4172c93c0af47da1c9cae2cde4
    parameters:
      REPLICAS: 3
# tenant dashboards
- name: telemeter-dashboards
  url: https://gitlab.cee.redhat.com/observatorium/configuration
  path: /manifests/production/grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 6c1031680965bbf8e9448cd040c6a9abc414f4ef
- name: insights-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 0fd94e411ef584564f0b36e3a723973022bf30b1
- name: remediations-dashboards
  url: https://github.com/RedHatInsights/insights-remediations
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 4e88a0807a4c61853b47d9f843d171f031fec0b4
- name: migration-analytics-dashboards
  url: https://github.com/project-xavier/xavier-metrics-dashboards
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d65c03325043cd4b4cffdfea8f6cb6437f67f86b
- name: automation-hub-dashboards
  url: https://gitlab.cee.redhat.com/automation-hub/grafana-dashboards
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c3da354f0f0e2b95cbda8fc26bf61336bb2f1374
- name: receptor-dashboards
  url: https://github.com/RedHatInsights/platform-receptor-controller
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 529e4dc43b168cb6e996a2d5838173f83006fd36
- name: insights-engine-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/insights-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fd149f0720c8a19a95001b6893ede8ee31bc3674
- name: insights-puptoo-dashboards
  url: https://github.com/RedHatInsights/insights-puptoo
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 087e355a9beb1b5cab088ae7fd0751923e494d91
- name: ingress-dashboards
  url: https://github.com/RedHatInsights/insights-ingress-go
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 24350d611923dff61596bdd814ad5f94d7911548
- name: insights-hccm-dashboards
  url: https://github.com/project-koku/koku
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: f42722cda4527b4d32393e1a3b2dfa4b18dba399
- name: platform-legacy-bridge-dashboards
  url: https://github.com/RedHatInsights/platform-legacy-bridge
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 8510ce9daaa494febcbc2642765da59326def163
- name: payload-tracker-dashboards
  url: https://github.com/RedHatInsights/payload-tracker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c368bab400c65692aabf47c9ea3f29dfd4e51446
- name: insights-storage-broker-dashboards
  url: https://github.com/RedHatInsights/insights-storage-broker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 890f2b63fa15027557e7c60936de75d8c7492611
- name: insights-advisor-service-dashboards
  url: https://github.com/RedHatInsights/insights-advisor-service
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 84d042b65048525dd40cb36b620b466a0ae91920
