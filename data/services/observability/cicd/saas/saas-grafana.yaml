---
$schema: /app-sre/saas-file-1.yml

labels:
  service: app-sre-observability

name: saas-grafana
description: saas-grafana

app:
  $ref: /services/observability/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- DeploymentConfig
- Service

imagePatterns:
- quay.io/app-sre
- quay.io/pusher

# required for insights private repositories
authentication:
  code:
    path: app-sre/creds/github-app-sre-bot
    field: openshift-saas-deploy

resourceTemplates:
- name: grafana
  path: /openshift/grafana.template.yaml
  url: https://gitlab.cee.redhat.com/service/app-sre-observability
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
    parameters:
      REPLICAS: 1
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: a8fb366369cf5a808a7d995594fdd63e469a8888
    parameters:
      REPLICAS: 3
# tenant dashboards
- name: telemeter-dashboards
  url: https://gitlab.cee.redhat.com/observatorium/configuration
  path: /manifests/production/grafana/observatorium
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: f4732955cbd9489d100bbe1360a6c4dc5f86d8b5
- name: observatorium-logs-dashboards
  url: https://gitlab.cee.redhat.com/observatorium/configuration
  path: /manifests/production/grafana/observatorium-logs/grafana-dashboards-template.yaml
  provider: openshift-template
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: cb7f8dea2f98854cec68459c582c1c3c2c538bc1
    parameters:
      OBSERVATORIUM_API_DATASOURCE: app-sre-stage-01-prometheus
      OBSERVATORIUM_API_NAMESPACE: telemeter-stage
      OBSERVATORIUM_LOGS_NAMESPACE: observatorium-logs-stage
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: cb7f8dea2f98854cec68459c582c1c3c2c538bc1
    parameters:
      OBSERVATORIUM_API_DATASOURCE: telemeter-prod-01-prometheus
      OBSERVATORIUM_API_NAMESPACE: telemeter-production
      OBSERVATORIUM_LOGS_NAMESPACE: observatorium-logs-production
- name: insights-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 275a511be533ea286fcc65110d965d7f2f1648d1
- name: remediations-dashboards
  url: https://github.com/RedHatInsights/insights-remediations
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: cd1f91aaa235b47a06d32784c56e092cf71ee4e1
- name: migration-analytics-dashboards
  url: https://github.com/project-xavier/xavier-metrics-dashboards
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d65c03325043cd4b4cffdfea8f6cb6437f67f86b
- name: automation-hub-dashboards
  url: https://gitlab.cee.redhat.com/automation-hub/grafana-dashboards
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c3da354f0f0e2b95cbda8fc26bf61336bb2f1374
- name: automation-analytics-dashboards
  url: https://github.com/RedHatInsights/tower-analytics-saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: e03b4e80ccf6b83913c8dc88233ffa3aeffca3ca
- name: receptor-dashboards
  url: https://github.com/RedHatInsights/platform-receptor-controller
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 6575e476a3a34b59cf5dfc800ffa9da361a9653d
- name: insights-topological-inventory-dashboards
  url: https://github.com/RedHatInsights/topological_inventory-api
  path: /grafana-dashboards
  provider: directory
  targets:
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-stage.yml
      ref: master
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-production.yml
      ref: 6c0cf9b030733ac4dac669a83636d7353f3fc800
- name: insights-engine-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/insights-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fd149f0720c8a19a95001b6893ede8ee31bc3674
- name: insights-puptoo-dashboards
  url: https://github.com/RedHatInsights/insights-puptoo
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 5d5d6edc7eaccf014359720479b493b34953b5d2
- name: ingress-dashboards
  url: https://github.com/RedHatInsights/insights-ingress-go
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 7c1e636bed24c102f1748103cea7a11042189f7e
- name: insights-hccm-dashboards
  url: https://github.com/project-koku/koku
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 10422729a6ee1e7aa70ca90ccf997bd39b6048c6
- name: inventory-dashboards
  url: https://github.com/RedHatInsights/insights-host-inventory
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 62afe36b8549855629e27cc8c5769ebf4f20a859
- name: platform-legacy-bridge-dashboards
  url: https://github.com/RedHatInsights/platform-legacy-bridge
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 8510ce9daaa494febcbc2642765da59326def163
- name: payload-tracker-dashboards
  url: https://github.com/RedHatInsights/payload-tracker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: f7db8de77a5467d7dbcd1bcc8dbf55c9a423c699
- name: insights-storage-broker-dashboards
  url: https://github.com/RedHatInsights/insights-storage-broker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: dee75e2d6af47ec0dca5ab2b1cb5f7c4fc2a84ba
- name: insights-advisor-service-dashboards
  url: https://github.com/RedHatInsights/insights-advisor-service
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: ab92ddd4272684e634d9c57226865bd501540bc8
- name: insights-advisor-api-dashboards
  url: https://github.com/RedHatInsights/insights-advisor-api
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fe8157a8d5a2b5606d52b96504cbc12d19da047a
- name: vulnerability-dashboards
  url: https://github.com/RedHatInsights/vulnerability-engine
  path: /monitoring/grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: dbf7c4d320ab50c96648ee52372d29ad37425d09
- name: cyndi-dashboards
  url: https://github.com/RedHatInsights/inventory-syndication
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fbf5c9fbf8241fb4384981c0b896d0cc7ae9dd75
- name: xjoin-dashboards
  url: https://github.com/RedHatInsights/xjoin-search
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 96d83007f789d1163f3f3db69de1a1a908ecaee0
- name: patchman-engine-dashboards
  url: https://github.com/RedHatInsights/patchman-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 8d709d38dafcdeafd3bb553406ff42c0f0e57074
- name: compliance-dashboards
  url: https://github.com/RedHatInsights/compliance-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 1dc32d14f4e85855e72043b7df103f1cf6fbfa3e
- name: drift-dashboards
  url: https://github.com/RedHatInsights/drift-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 17f6ec2131936a6d3dbd4549a1a31e7301babaf5
- name: vmaas-dashboards
  url: https://github.com/RedHatInsights/vmaas
  path: /monitoring/grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 2f1461aae1a6f61f39f92dfe9349b47e6dcd6492
