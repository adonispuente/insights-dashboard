---
$schema: /app-sre/saas-file-2.yml

labels:
  service: app-sre-observability

name: saas-grafana
description: saas-grafana

app:
  $ref: /services/observability/app.yml

pipelinesProvider:
  $ref: /services/app-interface/pipelines/tekton.app-sre-pipelines.appsrep05ue1.yaml

deployResources:
  requests:
    cpu: "1"
    memory: 1400Mi
  limits:
    cpu: "1"
    memory: 1400Mi

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- DeploymentConfig
- Service

imagePatterns:
- quay.io/app-sre
- quay.io/pusher
- quay.io/oauth2-proxy

authentication:
  # required for insights private repositories
  code:
    path: app-sre/creds/github-app-sre-bot
    field: openshift-saas-deploy
  # required for private images
  image:
    path: app-sre/quay/app-sre-pull
    field: all

resourceTemplates:
- name: grafana
  path: /openshift/grafana.template.yaml
  url: https://gitlab.cee.redhat.com/service/app-sre-observability
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
    parameters:
      REPLICAS: 1
      IMAGE_TAG: '9.0.1'
      DASHBOARD_DISCOVERY_IMAGE_TAG: '1.15.4'
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 0f00af8f8d65fce85dd8ae864c58cdb213cc56b5
    parameters:
      REPLICAS: 3
      IMAGE_TAG: '9.0.1'
# tenant dashboards
- name: observatorium-logs-dashboards
  url: https://github.com/rhobs/configuration
  path: /resources/observability/grafana/observatorium-logs/grafana-dashboards-template.yaml
  provider: openshift-template
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: 508c23feffbc44f417e4d906c921231de01fb171
    parameters:
      OBSERVATORIUM_API_DATASOURCE: app-sre-stage-01-prometheus
      OBSERVATORIUM_API_NAMESPACE: observatorium-stage
      OBSERVATORIUM_LOGS_NAMESPACE: observatorium-logs-stage
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 508c23feffbc44f417e4d906c921231de01fb171
    parameters:
      OBSERVATORIUM_API_DATASOURCE: telemeter-prod-01-prometheus
      OBSERVATORIUM_API_NAMESPACE: observatorium-production
      OBSERVATORIUM_LOGS_NAMESPACE: observatorium-logs-production
- name: insights-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: f360e8259c4d0deaec2dd8b8d2066f4fa695ec40
- name: uhc-auth-proxy-dashboards
  url: https://github.com/RedHatInsights/uhc-auth-proxy
  path: /grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 3ea31e89d2ddda8fed859954833f5e024d7d1b92
- name: remediations-dashboards
  url: https://github.com/RedHatInsights/insights-remediations
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 60974914f41f7f6750e743947fa7916c65bd9414
- name: migration-analytics-dashboards
  url: https://github.com/project-xavier/xavier-metrics-dashboards
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d65c03325043cd4b4cffdfea8f6cb6437f67f86b
- name: automation-analytics-dashboards
  url: https://github.com/RedHatInsights/tower-analytics-saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: b923cc5b97c43e087ddcbeea031a35571be9e01e
- name: receptor-dashboards
  url: https://github.com/RedHatInsights/platform-receptor-controller
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 6575e476a3a34b59cf5dfc800ffa9da361a9653d
- name: insights-sources-dashboards
  url: https://github.com/RedHatInsights/sources-api
  path: /grafana-dashboards
  provider: directory
  targets:
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-stage.yml
      ref: 69683b68465a34428720964a5872466a1a8e57fb
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-production.yml
      ref: 69683b68465a34428720964a5872466a1a8e57fb
- name: insights-engine-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/insights-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fd149f0720c8a19a95001b6893ede8ee31bc3674
- name: ingress-sideloader-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/ingress-sideloader
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 01b7aa492fce333a24f4dc7a4e507d6f134c7099
- name: insights-puptoo-dashboards
  url: https://github.com/RedHatInsights/insights-puptoo
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 5d5d6edc7eaccf014359720479b493b34953b5d2
- name: ingress-dashboards
  url: https://github.com/RedHatInsights/insights-ingress-go
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 7c1e636bed24c102f1748103cea7a11042189f7e
- name: insights-hccm-dashboards
  url: https://github.com/project-koku/koku
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 10422729a6ee1e7aa70ca90ccf997bd39b6048c6
- name: inventory-dashboards
  url: https://github.com/RedHatInsights/insights-host-inventory
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 89ed02bc41ee16fe2a1e07f0c7b389cff47a057c
- name: insights-storage-broker-dashboards
  url: https://github.com/RedHatInsights/insights-storage-broker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 5bc03b8bad83f511bcf788b6acee0c5d4c2aa46f
- name: insights-clowder-dashboards
  url: https://github.com/RedHatInsights/clowder
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: eb4d9d682945ec35e9cfde0fd68ea9449dabc4d4
- name: insights-frontend-operator-dashboards
  url: https://github.com/RedHatInsights/frontend-operator
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: af2c2dd3a09ac66953c6435311c5426241afa885
- name: insights-ephemeral-ns-operator-dashboards
  url: https://github.com/RedHatInsights/ephemeral-namespace-operator
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 21c57c3c12841963e8cade0c3669a4286108c345
- name: insights-advisor-service-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/advisor-backend
  path: /service/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 89ed2dd5c5b0ec6214667a1a3724dd2683b24438
- name: insights-advisor-api-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/advisor-backend
  path: /api/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 89ed2dd5c5b0ec6214667a1a3724dd2683b24438
- name: cyndi-dashboards
  url: https://github.com/RedHatInsights/inventory-syndication
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 2c714a62b0dbb5ff622fd1277f98a6da4da5747d
- name: xjoin-operator-dashboards
  url: https://github.com/RedHatInsights/xjoin-operator
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 7489eae1af23777f1e92ecea0c5e2136c751b764
- name: xjoin-dashboards
  url: https://github.com/RedHatInsights/xjoin-search
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 7a7c7c50a898ed119e2e84cb04568331fb41f623
- name: patchman-engine-dashboards
  url: https://github.com/RedHatInsights/patchman-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 0afcc80e181f5bae0f3db99eefce8d167f3cceea
- name: compliance-dashboards
  url: https://github.com/RedHatInsights/compliance-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 0d7a4d16d20a8cd29babdc0f0d034e08e6900956
- name: drift-dashboards
  url: https://github.com/RedHatInsights/drift-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 17f6ec2131936a6d3dbd4549a1a31e7301babaf5
- name: vmaas-dashboards
  url: https://github.com/RedHatInsights/vmaas
  path: /monitoring/grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: e061b8747a36d17d7b314658868e333bce3ef718
- name: rbac-dashboards
  url: https://github.com/RedHatInsights/insights-rbac
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d3543018e408f739b8f6908d9adfdc9f3fda5234
- name: entitlements-dashboards
  url: https://github.com/RedHatInsights/entitlements-api-go
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: aeb9d18e696da8d85dfb68ee439d095b1edf2a65
- name: insights-policies
  url: https://github.com/RedHatInsights/policies-ui-backend
  path: /.rhcicd/grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 52e0951176525d66a14fb37d7b05a2b6f4c7eb57
- name: insights-subscription-watch
  url: https://github.com/RedHatInsights/rhsm-subscriptions
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: dc47de81ff3632428813e8e9a0692a80abf16210
- name: image-builder-dashboards
  url: https://github.com/osbuild/image-builder
  path: /templates/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 975e5c1405f68f92465bf456cb9c629aee304816
- name: image-builder-composer-dashboards
  url: https://github.com/osbuild/osbuild-composer
  path: /templates/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: edcc0866b341484df0148647cc5b93227332b807
- name: config-manager-dashboards
  url: https://github.com/RedHatInsights/config-manager
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: bdff020d694c5a7767706591efe1b986fb4320ec
- name: cloud-connector-dashboards
  url: https://github.com/RedHatInsights/cloud-connector
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: ed731be2160cf843c9e62b1961ae6809bcb59c56
- name: sendgrid-dashboards
  url: https://gitlab.cee.redhat.com/service/ocm-sendgrid-service
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c0f979c15e93f5437ca0886e8aa20b807c138d6b
- name: malware-detection-api-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/malware-detection-backend
  path: /dashboards
  provider: directory
  targets:
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-stage.yml
      ref: master
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-production.yml
      ref: 688cfc11df5853766468ceb25b79818a9edb422e
