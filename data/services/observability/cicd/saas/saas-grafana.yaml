---
$schema: /app-sre/saas-file-2.yml

labels:
  service: app-sre-observability

name: saas-grafana
description: saas-grafana

app:
  $ref: /services/observability/app.yml

pipelinesProvider:
  $ref: /services/app-interface/pipelines/tekton.app-sre-pipelines.appsrep05ue1.yaml

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- DeploymentConfig
- Service

imagePatterns:
- quay.io/app-sre
- quay.io/pusher

authentication:
  # required for insights private repositories
  code:
    path: app-sre/creds/github-app-sre-bot
    field: openshift-saas-deploy
  # required for private images
  image:
    path: app-sre/quay/app-sre-pull
    field: all

resourceTemplates:
- name: grafana
  path: /openshift/grafana.template.yaml
  url: https://gitlab.cee.redhat.com/service/app-sre-observability
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
    parameters:
      REPLICAS: 1
      IMAGE_TAG: '8.2.1'
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: dd78a8ce9670f6919a45b05f8fcc853f53f8cb57
    parameters:
      REPLICAS: 3
      IMAGE_TAG: '8.2.1'
# tenant dashboards
- name: telemeter-dashboards
  url: https://github.com/rhobs/configuration
  path: /resources/observability/grafana/observatorium
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: 3ccedfd8f45e84f2b3b210b5d3ea3ec811f7352b
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 3ccedfd8f45e84f2b3b210b5d3ea3ec811f7352b
- name: observatorium-logs-dashboards
  url: https://github.com/rhobs/configuration
  path: /resources/observability/grafana/observatorium-logs/grafana-dashboards-template.yaml
  provider: openshift-template
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: 508c23feffbc44f417e4d906c921231de01fb171
    parameters:
      OBSERVATORIUM_API_DATASOURCE: app-sre-stage-01-prometheus
      OBSERVATORIUM_API_NAMESPACE: observatorium-stage
      OBSERVATORIUM_LOGS_NAMESPACE: observatorium-logs-stage
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 508c23feffbc44f417e4d906c921231de01fb171
    parameters:
      OBSERVATORIUM_API_DATASOURCE: telemeter-prod-01-prometheus
      OBSERVATORIUM_API_NAMESPACE: observatorium-production
      OBSERVATORIUM_LOGS_NAMESPACE: observatorium-logs-production
- name: insights-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 2115bf2520e48221e230005269bc1abd667130a1
- name: uhc-auth-proxy-dashboards
  url: https://github.com/RedHatInsights/uhc-auth-proxy
  path: /grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 3ea31e89d2ddda8fed859954833f5e024d7d1b92
- name: remediations-dashboards
  url: https://github.com/RedHatInsights/insights-remediations
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 60974914f41f7f6750e743947fa7916c65bd9414
- name: migration-analytics-dashboards
  url: https://github.com/project-xavier/xavier-metrics-dashboards
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d65c03325043cd4b4cffdfea8f6cb6437f67f86b
- name: automation-hub-dashboards
  url: https://gitlab.cee.redhat.com/automation-hub/grafana-dashboards
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c3da354f0f0e2b95cbda8fc26bf61336bb2f1374
- name: automation-analytics-dashboards
  url: https://github.com/RedHatInsights/tower-analytics-saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 3684ac9ec105eecc36df1d235f81a4b53186b2da
- name: receptor-dashboards
  url: https://github.com/RedHatInsights/platform-receptor-controller
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 6575e476a3a34b59cf5dfc800ffa9da361a9653d
- name: insights-sources-dashboards
  url: https://github.com/RedHatInsights/sources-api
  path: /grafana-dashboards
  provider: directory
  targets:
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-stage.yml
      ref: 69683b68465a34428720964a5872466a1a8e57fb
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-production.yml
      ref: 69683b68465a34428720964a5872466a1a8e57fb
- name: insights-engine-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/insights-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fd149f0720c8a19a95001b6893ede8ee31bc3674
- name: ingress-sideloader-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/ingress-sideloader
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 01b7aa492fce333a24f4dc7a4e507d6f134c7099
- name: insights-puptoo-dashboards
  url: https://github.com/RedHatInsights/insights-puptoo
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 5d5d6edc7eaccf014359720479b493b34953b5d2
- name: ingress-dashboards
  url: https://github.com/RedHatInsights/insights-ingress-go
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 7c1e636bed24c102f1748103cea7a11042189f7e
- name: insights-hccm-dashboards
  url: https://github.com/project-koku/koku
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 10422729a6ee1e7aa70ca90ccf997bd39b6048c6
- name: inventory-dashboards
  url: https://github.com/RedHatInsights/insights-host-inventory
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 89ed02bc41ee16fe2a1e07f0c7b389cff47a057c
- name: platform-legacy-bridge-dashboards
  url: https://github.com/RedHatInsights/platform-legacy-bridge
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fcc26621115c2c2a53d9d7141d18a7ac650ed789
- name: payload-tracker-dashboards
  url: https://github.com/RedHatInsights/payload-tracker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 55b518685d70b7d1cfdf24d7476b2aedefdc9cd6
- name: insights-storage-broker-dashboards
  url: https://github.com/RedHatInsights/insights-storage-broker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: dee75e2d6af47ec0dca5ab2b1cb5f7c4fc2a84ba
- name: insights-clowder-dashboards
  url: https://github.com/RedHatInsights/clowder
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: bb8f9738410976ffd9b706c7b906becccb198bf9
- name: insights-advisor-service-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/advisor-backend
  path: /service/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 89ed2dd5c5b0ec6214667a1a3724dd2683b24438
- name: insights-advisor-api-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/advisor-backend
  path: /api/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 89ed2dd5c5b0ec6214667a1a3724dd2683b24438
- name: vulnerability-dashboards
  url: https://github.com/RedHatInsights/vulnerability-engine
  path: /monitoring/grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: dbf7c4d320ab50c96648ee52372d29ad37425d09
- name: cyndi-dashboards
  url: https://github.com/RedHatInsights/inventory-syndication
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 2c714a62b0dbb5ff622fd1277f98a6da4da5747d
- name: xjoin-operator-dashboards
  url: https://github.com/RedHatInsights/xjoin-operator
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 7489eae1af23777f1e92ecea0c5e2136c751b764
- name: xjoin-dashboards
  url: https://github.com/RedHatInsights/xjoin-search
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 7a7c7c50a898ed119e2e84cb04568331fb41f623
- name: patchman-engine-dashboards
  url: https://github.com/RedHatInsights/patchman-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: ec31375ed3f907d354c1d41e224b854b039063e3
- name: compliance-dashboards
  url: https://github.com/RedHatInsights/compliance-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 0d7a4d16d20a8cd29babdc0f0d034e08e6900956
- name: drift-dashboards
  url: https://github.com/RedHatInsights/drift-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 17f6ec2131936a6d3dbd4549a1a31e7301babaf5
- name: vmaas-dashboards
  url: https://github.com/RedHatInsights/vmaas
  path: /monitoring/grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 2f1461aae1a6f61f39f92dfe9349b47e6dcd6492
- name: assisted-installer-dashboards
  url: https://github.com/openshift/assisted-service
  path: /dashboards
  provider: directory
  targets:
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-stage.yml
      ref: 47726cdc73dd0bbeb45f772990829b6c901955ac
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-production.yml
      ref: 47726cdc73dd0bbeb45f772990829b6c901955ac
- name: cloudigrade-dashboards
  url: https://github.com/cloudigrade/cloudigrade
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: ad0c8240d6e025ad12e726bd2979547f6af498e2
- name: playbook-dispatcher-dashboards
  url: https://github.com/RedHatInsights/playbook-dispatcher
  path: /dashboard
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 5eff76d10617f27f3b698f5e102957ca38553975
- name: rbac-dashboards
  url: https://github.com/RedHatInsights/insights-rbac
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 0bc86acf457c05836c830781b22c57a0c708765c
- name: entitlements-dashboards
  url: https://github.com/RedHatInsights/entitlements-api-go
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 69daea6200ed483be58793839ad94f01a430c848
- name: insights-policies
  url: https://github.com/RedHatInsights/policies-ui-backend
  path: /.rhcicd/grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d0c0c558c9503c07f81ead9a70430f6aea04474b
- name: insights-notifications
  url: https://github.com/RedHatInsights/notifications-backend
  path: /.rhcicd/grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 64247a45a62c47b1f4226ace7bd265e601ee42c0
- name: insights-subscription-watch
  url: https://github.com/RedHatInsights/rhsm-subscriptions
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: eeb4b07bcc8e038302dc7f95f1489312651e80ed
- name: image-builder-dashboards
  url: https://github.com/osbuild/image-builder
  path: /templates/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 2d68df66d7016f5c15b88a86b5aa0df649609c1f
- name: image-builder-composer-dashboards
  url: https://github.com/osbuild/osbuild-composer
  path: /templates/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 3443fb8771e73a09e81d77c3d2674239e406686d
- name: managed-kafka-dashboards
  url: https://gitlab.cee.redhat.com/mk-ci-cd/mk-observability
  path: /grafana/saas-dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: ee224dc20653d3cb5a869c9082dba9bcda79143c
- name: config-manager-dashboards
  url: https://github.com/RedHatInsights/config-manager
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: bdff020d694c5a7767706591efe1b986fb4320ec
- name: cloud-connector-dashboards
  url: https://github.com/RedHatInsights/cloud-connector
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: ed731be2160cf843c9e62b1961ae6809bcb59c56
- name: status-board-dashboards
  url: https://gitlab.cee.redhat.com/service/status-board
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: main
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 07525e9a94530268ba64dce7dceb9aeb7767e8da
- name: sendgrid-dashboards
  url: https://gitlab.cee.redhat.com/service/ocm-sendgrid-service
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c0f979c15e93f5437ca0886e8aa20b807c138d6b
- name: malware-detection-api-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/malware-detection-backend
  path: /dashboards
  provider: directory
  targets:
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-stage.yml
      ref: master
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-production.yml
      ref: 688cfc11df5853766468ceb25b79818a9edb422e
