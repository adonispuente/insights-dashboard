---
$schema: /app-sre/saas-file-1.yml

labels:
  service: app-sre-observability

name: saas-grafana
description: saas-grafana

app:
  $ref: /services/observability/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- DeploymentConfig
- Service

imagePatterns:
- quay.io/app-sre
- quay.io/pusher

# required for insights private repositories
authentication:
  code:
    path: app-sre/creds/github-app-sre-bot
    field: openshift-saas-deploy

resourceTemplates:
- name: grafana
  path: /openshift/grafana.template.yaml
  url: https://gitlab.cee.redhat.com/service/app-sre-observability
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
    parameters:
      REPLICAS: 1
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 813f2094ce317d4172c93c0af47da1c9cae2cde4
    parameters:
      REPLICAS: 3
# tenant dashboards
- name: telemeter-dashboards
  url: https://gitlab.cee.redhat.com/observatorium/configuration
  path: /manifests/production/grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 6c1031680965bbf8e9448cd040c6a9abc414f4ef
- name: insights-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/saas-templates
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 9f17f2942fed7c99ee54ab899e1b09896b01d28d
- name: remediations-dashboards
  url: https://github.com/RedHatInsights/insights-remediations
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: cd1f91aaa235b47a06d32784c56e092cf71ee4e1
- name: migration-analytics-dashboards
  url: https://github.com/project-xavier/xavier-metrics-dashboards
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: d65c03325043cd4b4cffdfea8f6cb6437f67f86b
- name: automation-hub-dashboards
  url: https://gitlab.cee.redhat.com/automation-hub/grafana-dashboards
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c3da354f0f0e2b95cbda8fc26bf61336bb2f1374
- name: receptor-dashboards
  url: https://github.com/RedHatInsights/platform-receptor-controller
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 529e4dc43b168cb6e996a2d5838173f83006fd36
- name: insights-topological-inventory-dashboards
  url: https://github.com/RedHatInsights/topological_inventory-api
  path: /grafana-dashboards
  provider: directory
  targets:
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-stage.yml
      ref: master
    - namespace:
        $ref: /services/observability/namespaces/app-sre-observability-production.yml
      ref: 6c0cf9b030733ac4dac669a83636d7353f3fc800
- name: insights-engine-dashboards
  url: https://gitlab.cee.redhat.com/insights-platform/insights-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fd149f0720c8a19a95001b6893ede8ee31bc3674
- name: insights-puptoo-dashboards
  url: https://github.com/RedHatInsights/insights-puptoo
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 087e355a9beb1b5cab088ae7fd0751923e494d91
- name: ingress-dashboards
  url: https://github.com/RedHatInsights/insights-ingress-go
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 24350d611923dff61596bdd814ad5f94d7911548
- name: insights-hccm-dashboards
  url: https://github.com/project-koku/koku
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 2c350e2a2993df578dfe1299d30d02f065a0245b
- name: inventory-dashboards
  url: https://github.com/RedHatInsights/insights-host-inventory
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 635f6d4a644bbd575f0594aa88d08dc257021c15
- name: platform-legacy-bridge-dashboards
  url: https://github.com/RedHatInsights/platform-legacy-bridge
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 8510ce9daaa494febcbc2642765da59326def163
- name: payload-tracker-dashboards
  url: https://github.com/RedHatInsights/payload-tracker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c368bab400c65692aabf47c9ea3f29dfd4e51446
- name: insights-storage-broker-dashboards
  url: https://github.com/RedHatInsights/insights-storage-broker
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 890f2b63fa15027557e7c60936de75d8c7492611
- name: insights-advisor-service-dashboards
  url: https://github.com/RedHatInsights/insights-advisor-service
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 84d042b65048525dd40cb36b620b466a0ae91920
- name: insights-advisor-api-dashboards
  url: https://github.com/RedHatInsights/insights-advisor-api
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 4daad27e5934141e4a56efe3a61be31a03fa72c3
- name: vulnerability-dashboards
  url: https://github.com/RedHatInsights/vulnerability-engine
  path: /monitoring/grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 61a41d9b18db14253ce5075c824a042a674303d8
- name: cyndi-dashboards
  url: https://github.com/redhatinsights/inventory-syndication
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: c5cec5e73eeac6bc76a3bd83be434d8d6047917c
- name: xjoin-dashboards
  url: https://github.com/RedHatInsights/xjoin-search
  path: /grafana
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 8b12e1b99ee78f47bb8df476402812aa1c4205ef
- name: patchman-engine-dashboards
  url: https://github.com/RedHatInsights/patchman-engine
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 8d709d38dafcdeafd3bb553406ff42c0f0e57074
- name: compliance-dashboards
  url: https://github.com/RedHatInsights/compliance-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 1dc32d14f4e85855e72043b7df103f1cf6fbfa3e
- name: drift-dashboards
  url: https://github.com/RedHatInsights/drift-backend
  path: /dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 17f6ec2131936a6d3dbd4549a1a31e7301babaf5
- name: vmaas-dashboards
  url: https://github.com/RedHatInsights/vmaas
  path: /monitoring/grafana/dashboards
  provider: directory
  targets:
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: fdc833996eded7455541f39888e38dd96c84e26b
