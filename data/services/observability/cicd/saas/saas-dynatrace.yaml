---
$schema: /app-sre/saas-file-2.yml

labels:
  service: observability

name: saas-dynatrace
description: SaaS tracking file for the dynatrace stack

app:
  $ref: /services/observability/app.yml

pipelinesProvider:
  $ref: /services/app-interface/pipelines/tekton.app-sre-pipelines.appsrep05ue1.yaml

slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: sd-app-sre-info

managedResourceTypes:
- OperatorGroup
- Subscription
- DynaKube

imagePatterns: []

resourceTemplates:
- name: app-sre-stage-01-dynatrace-operator
  url: https://gitlab.cee.redhat.com/service/dynatrace-config
  path: /resources/osd/dynatrace-operator-template.yaml
  targets:
  - namespace:
      $ref: /services/observability/namespaces/dynatrace.app-sre-stage-01.yml
    ref: main
- name: app-sre-stage-01-dynatrace-logging
  url: https://gitlab.cee.redhat.com/service/dynatrace-config
  path: /resources/osd/dynakube-logging-template.yaml
  targets:
  - namespace:
      $ref: /services/observability/namespaces/dynatrace.app-sre-stage-01.yml
    ref: main
    parameters:
      DT_API_URL: https://ddl70254.live.dynatrace.com/api
      DT_HOST_GROUP: app-sre-stage-01
      ENV_LABEL: app-sre-stage-01
      CLUSTER_ID: app-sre-stage-01
