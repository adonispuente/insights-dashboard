---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2020-09-24-analyze-pulp-select-query
namespace:
  $ref: /services/insights/automation-hub/namespaces/stage-automation-hub-stage.yml
identifier: automation-hub-stage
output: stdout
query: |
  EXPLAIN ANALYSE
  SELECT DISTINCT "core_content"."pulp_id",
                  "core_content"."pulp_created",
                  "core_content"."pulp_last_updated",
                  "core_content"."pulp_type",
                  "ansible_collectionversion"."content_ptr_id",
                  "ansible_collectionversion"."authors",
                  "ansible_collectionversion"."contents",
                  "ansible_collectionversion"."dependencies",
                  "ansible_collectionversion"."description",
                  "ansible_collectionversion"."docs_blob",
                  "ansible_collectionversion"."documentation",
                  "ansible_collectionversion"."homepage",
                  "ansible_collectionversion"."issues",
                  "ansible_collectionversion"."license",
                  "ansible_collectionversion"."name",
                  "ansible_collectionversion"."namespace",
                  "ansible_collectionversion"."repository",
                  "ansible_collectionversion"."version",
                  "ansible_collectionversion"."is_highest",
                  "ansible_collectionversion"."certification",
                  "ansible_collectionversion"."collection_id",
                  "ansible_collectionversion"."search_vector"
  FROM "ansible_collectionversion"
          INNER JOIN "core_content" ON ("ansible_collectionversion"."content_ptr_id" = "core_content"."pulp_id")
          INNER JOIN "ansible_collection"
                      ON ("ansible_collectionversion"."collection_id" = "ansible_collection"."pulp_id")
  WHERE (
    "ansible_collectionversion"."certification" = 'certified' AND
    "ansible_collectionversion"."content_ptr_id" IN (
        '00d8f5ec-7690-4606-ae75-732659f3ac91'::uuid,
        '0bb35bb6-7949-451c-a873-9b40d11d8f9f'::uuid,
        '17e5ec5d-946d-4702-944b-ce2d6c52fb69'::uuid,
        '1c5780e4-9d43-4915-ad98-6fad6a695012'::uuid,
        '1e966ee0-25c0-4a65-9d70-85facbebadc5'::uuid,
        '23801135-a7ce-42a6-bff2-b13c6be7e001'::uuid,
        '2b94b288-f4c1-4cb9-85af-9b85671404c7'::uuid,
        '2e08a650-b8a6-467a-b215-a5b928cdde70'::uuid,
        '2fb1dc1c-0ab4-46c4-ac70-754e22702a6b'::uuid,
        '30072b26-35fa-4a00-a302-bb602f7e2364'::uuid,
        '331e917a-9e63-4a8c-947b-93c9c46acef8'::uuid,
        '3c1b0744-d027-4457-ab6e-c5a1b20765a9'::uuid,
        '4dea2c98-693f-4937-928f-039ea2597c80'::uuid,
        '525af733-9702-4fc1-ba87-a01a13d2c546'::uuid,
        '53fe27d2-f8e9-450c-a4f3-343101d4c708'::uuid,
        '5703832c-47dd-4a6d-a439-bc6f871e8ba9'::uuid,
        '57caecfa-6559-4e88-b279-0b5332b1325d'::uuid,
        '58b0952b-5d3f-4e42-b914-a819d25e5ac3'::uuid,
        '5a58494d-3800-4156-8b72-89f1737b36cd'::uuid,
        '5cc26dfe-bded-49b3-8962-e80babf0cd4e'::uuid,
        '5d8168b5-a1bd-4a05-95a4-aa536429413e'::uuid,
        '686fb09d-72de-47ca-8521-6d0ab66a46e7'::uuid,
        '6d750e75-29f7-4394-bce8-e4e0c3ae4c9b'::uuid,
        '6d95cb48-7e2d-4cf0-9c18-f662cab6e1db'::uuid,
        '703a2f60-7a24-40e8-a3dc-e2fcd8306d3f'::uuid,
        '72924c2f-2aec-465d-af7d-251441e12529'::uuid,
        '81944ac2-10e2-4fb3-ac8e-57651d86c039'::uuid,
        '862779f6-bafd-4729-9b15-33d50a43be40'::uuid,
        '8950727a-7953-4667-81eb-a7592e51be08'::uuid,
        '8cc55451-c368-40e1-ac9c-2193e7fb16c2'::uuid,
        '8cd15db4-9bd2-4f4d-bb6e-28a22ce0f70d'::uuid,
        '915ea5ed-03d7-4dfa-b5c7-0bb8b90b3174'::uuid,
        '924dc9cd-f061-4c53-bc37-7f3188720961'::uuid,
        '99d18a00-5961-4d4c-9265-b24216c33730'::uuid,
        '9da831a5-52db-4714-849a-23eee91204e7'::uuid,
        'a3a577b7-2a4d-480a-b5f6-9ab77d600943'::uuid,
        'a4337f67-a842-4378-9141-880f0c5e7271'::uuid,
        'a55449ca-6915-440a-a0b0-954ca6dd3582'::uuid,
        'a90badb0-6e65-427c-982a-5fe4c1980e40'::uuid,
        'ac54efa4-d99f-4b5f-a730-25830bacf650'::uuid,
        'b8bdaf67-ea77-41a0-925d-7a819a93c64a'::uuid,
        'bf36dd5d-ff57-44bc-b2c5-971f97b441f4'::uuid,
        'c6c32164-9dd4-434d-965e-38681d38a16b'::uuid,
        'cbbefa20-500f-4796-9568-24e783bed8cb'::uuid,
        'cf97b165-f7dc-4ac2-87d9-89e51e031323'::uuid,
        'cff6ce21-e2f6-4646-89be-332ede3007fa'::uuid,
        'd61de638-1647-48e5-875b-7bef129e8221'::uuid,
        'd7a3c85a-8789-4d98-b4d0-ef94062fc6de'::uuid,
        'e64a954a-5d7c-41f0-8491-28cd2db2786c'::uuid,
        'e7c78fac-b460-4283-8d36-3439cd3cb1bc'::uuid,
        'fac1e732-4c06-4304-8f52-5519e209744a'::uuid,
        'fc52a9c4-f10b-4766-b423-c658fb837e10'::uuid,
        'fd08a6d4-4c52-4cfe-83b5-0c680ee267d6'::uuid
      ) AND "ansible_collectionversion"."certification" = 'certified' AND "ansible_collection"."deprecated" = false)
  LIMIT 12;
