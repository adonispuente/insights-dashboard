---
$schema: /app-sre/saas-file-2.yml

labels:
  service: insights

name: s3-data-sync
description: deploy s3-data-sync job

app:
  $ref: /services/insights/cicd/app.yml

pipelinesProvider:
  $ref: /services/insights/pipelines/tekton.crc-pipelines.appsrep05ue1.yaml

slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: cost-mgmt-bots

managedResourceTypes:
- CronJob

imagePatterns:
- quay.io/cloudservices

resourceTemplates:
- name: s3-data-sync
  path: /deploy.yaml
  url: https://gitlab.cee.redhat.com/cost-management/s3-data-sync
  targets:
  - name: hccm-s3-sync
    namespace:
      $ref: /services/insights/cicd/namespaces/s3-data-sync.yml
    ref: main
    parameters:
      NAME: hccm-s3-sync
      SECRET_NAME: hccm-s3-sync
      CRON_SCHEDULE: 0 17 * * *
