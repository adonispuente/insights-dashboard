---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2021-08-31-get-hosts-without-dashes-in-canonical-facts
namespace:
  $ref: /services/insights/host-inventory/namespaces/prod-host-inventory-prod.yml
identifier: host-inventory-prod
output: stdout
queries:
  - bios-uuid-created-by-cloud-conn |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'bios_uuid', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'bios_uuid' !~ '-' AND reporter = 'cloud-connector' 
      ORDER BY 
        created_on desc;
  - bios-uuid-created-by-puptoo |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'bios_uuid', id, account, stale_timestamp, reporter
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'bios_uuid' !~ '-' AND reporter = 'puptoo' 
      ORDER BY 
        created_on desc;
  - bios-uuid-created-by-rhsm |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'bios_uuid', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'bios_uuid' !~ '-' AND reporter ~ 'rhsm' 
      ORDER BY 
        created_on desc;
  - bios-uuid-created-by-yupana |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'bios_uuid', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'bios_uuid' !~ '-' AND reporter = 'yupana' 
      ORDER BY 
        created_on desc;
  - insights-id-created-by-cloud-conn |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'insights_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'insights_id' !~ '-' AND reporter = 'cloud-connector' 
      ORDER BY 
        created_on desc;
  - insights-id-created-by-puptoo |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'insights_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'insights_id' !~ '-' AND reporter = 'puptoo' 
      ORDER BY 
        created_on desc;
  - insights-id-created-by-rhsm |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'insights_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'insights_id' !~ '-' AND reporter ~ 'rhsm' 
      ORDER BY 
        created_on desc;
  - insights-id-created-by-yupana |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'insights_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'insights_id' !~ '-' AND reporter = 'yupana' 
      ORDER BY 
        created_on desc;
  - satellite-id-created-by-cloud-conn |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'satellite_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'satellite_id' !~ '-' AND reporter = 'cloud-connector' 
      ORDER BY 
        created_on desc;
  - satellite-id-created-by-puptoo |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'satellite_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'satellite_id' !~ '-' AND reporter = 'puptoo' 
      ORDER BY 
        created_on desc;
  - satellite-id-created-by-rhsm |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'satellite_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'satellite_id' !~ '-' AND reporter ~ 'rhsm' 
      ORDER BY 
        created_on desc;
  - satellite-id-created-by-yupana |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'satellite_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'satellite_id' !~ '-' AND reporter = 'yupana' 
      ORDER BY 
        created_on desc;
  - subscription-manager-id-created-by-cloud-conn |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'subscription_manager_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'subscription_manager_id' !~ '-' AND reporter = 'cloud-connector' 
      ORDER BY 
        created_on desc;
  - subscription-manager-id-created-by-puptoo |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'subscription_manager_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'subscription_manager_id' !~ '-' AND reporter = 'puptoo' 
      ORDER BY 
        created_on desc;
  - subscription-manager-id-created-by-rhsm |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'subscription_manager_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'subscription_manager_id' !~ '-' AND reporter ~ 'rhsm' 
      ORDER BY 
        created_on desc;
  - subscription-manager-id-created-by-yupana |
      SELECT 
        created_on, modified_on, canonical_facts ->> 'subscription_manager_id', id, account, stale_timestamp, reporter 
      FROM 
        hosts 
      WHERE 
        canonical_facts->>'subscription_manager_id' !~ '-' AND reporter = 'yupana' 
      ORDER BY 
        created_on desc;
