---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2021-08-30-no-dash-insights-id-created-by-rhsm
namespace:
  $ref: /services/insights/host-inventory/namespaces/prod-host-inventory-prod.yml
identifier: host-inventory-prod
output: stdout
query: |
  SELECT 
    created_on, canonical_facts ->> 'insights_id', stale_timestamp, reporter 
  FROM 
    hosts 
  WHERE 
    canonical_facts->>'insights_id' !~ '-' AND reporter ~ 'rhsm' 
  ORDER BY 
    created_on desc;
