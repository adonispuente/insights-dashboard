---
$schema: /app-sre/app-1.yml

labels:
  service: xjoin
  platform: insights
  type: core

name: xjoin

description: |
  Cross Join (or Xjoin for short) is the name of the service that synchronizes and joins (via relations)
  isolated data in Application databases into a consolidated Elasticsearch document
  that can be used for advanced searches, filters and queries.

  Cyndi operator is also deployed in this namespace. The Cyndi operator manages the resources used to 
  sync the Host Inventory database into multiple application databases.

architectureDocument: https://consoledot.pages.redhat.com/docs/dev/services/xjoin.html
sopsUrl: https://gitlab.cee.redhat.com/service/app-interface/-/tree/master/docs/console.redhat.com/app-sops/xjoin
grafanaUrls:
- title: xjoin-search
  url: https://grafana.app-sre.devshift.net/d/eqi9ATJWz/xjoin-search?orgId=1
onboardingStatus: OnBoarded

parentApp:
  $ref: /services/insights/app.yml

escalationPolicy:
  $ref: /teams/insights/escalation-policies/crc-xjoin-escalations.yml

serviceOwners:
- name: Chris Kyrouac
  email: ckyrouac@redhat.com

serviceNotifications:
- name: Rodrigo Antunes
  email: rantunes@redhat.com
- name: Eduardo Cerqueira
  email: ecerquei@redhat.com

dependencies:
- $ref: /dependencies/github/service.yml
- $ref: /dependencies/quay/service.yml
- $ref: /dependencies/openshift/service.yml
- $ref: /dependencies/aws/service.yml
- $ref: /dependencies/ci-int/service.yml
- $ref: /dependencies/ci-ext/service.yml
- $ref: /dependencies/kafka/service.yml

quayRepos:
- org:
    $ref: /dependencies/quay/cloudservices.yml
  items:
  - name: xjoin-kafka-connect
    public: false
    description: Repo for the xjoin Insights app
  - name: xjoin-kafka-connect-strimzi
    public: true
    description: Repo for the xjoin Insights app
  - name: xjoin-search
    public: false
    description: Repo for the xjoin Insights app
  - name: xjoin-search-jenkins
    public: false
    description: Repo for the xjoin Insights app
  - name: xjoin-es-exporter
    public: false
    description: Repo for the xjoin Insights app
  - name: xjoin-operator
    public: true
    description: Repo for XJoin Operator
  - name: xjoin-operator-bundle
    public: true
    description: Repo for XJoin Operator Bundles
  - name: xjoin-operator-index
    public: true
    description: Repo for XJoin Operator Bundle Index
  - name: cyndi-operator
    public: true
    description: Repo for Cyndi Operator
  - name: cyndi-operator-bundle
    public: true
    description: Repo for Cyndi Operator Bundles
  - name: cyndi-operator-index
    public: true
    description: Repo for Cyndi Operator Bundle Index
  - name: inventory-heartbeat
    public: false
    description: Repo for the inventory-heartbeat image
  - name: xjoin-validation
    public: true
    description: Repo for Xjoin Validation app
  - name: xjoin-api-gateway
    public: true
    description: Repo for Xjoin Api Gateway app

codeComponents:
- name: xjoin-config
  resource: upstream
  url: https://github.com/RedHatInsights/xjoin-config
- name: xjoin-kafka-connect
  resource: upstream
  url: https://github.com/RedHatInsights/xjoin-kafka-connect
- name: xjoin-search
  resource: upstream
  url: https://github.com/RedHatInsights/xjoin-search
- name: xjoin-operator
  resource: upstream
  url: https://github.com/RedHatInsights/xjoin-operator
- name: inventory-syndication
  resource: upstream
  url: https://github.com/RedHatInsights/inventory-syndication
- name: cyndi-operator
  resource: upstream
  url: https://github.com/RedHatInsights/cyndi-operator
- name: inventory-heartbeat
  resource: upstream
  url: https://github.com/RedHatInsights/inventory-heartbeat
- name: xjoin-api-gateway
  resource: upstream
  url: https://github.com/RedHatInsights/xjoin-api-gateway
- name: xjoin-validation
  url: https://github.com/RedHatInsights/xjoin-validation
  resource: upstream
- name: xjoin-api-subgraph
  url: https://github.com/RedHatInsights/xjoin-api-subgraph
  resource: upstream
