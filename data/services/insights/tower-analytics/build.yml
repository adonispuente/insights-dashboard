---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: tower-analytics

name: ci-int-automation-analytics-jobs
description: automation analytics ci int jobs

app:
  $ref: /services/insights/tower-analytics/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

type: jobs

config:
- project:
    name: automation-analytics-ci
    label: insights
    node: insights
    gl_group: automation-analytics
    gl_project: automation-analytics-backend
    quay_org: cloudservices
    jobs:
    - 'insights-gl-build-master':
        display_name: 'automation analytics gl-build-main'
        branch: main
    - 'insights-gl-pr-check':
        display_name: 'automation analytics gl-pr-check'
- project:
    name: automation-analytics
    label: insights
    node: insights
    app_name: tower-analytics
    component_name: tower-analytics-clowdapp
    image: "quay.io/cloudservices/automation-analytics-api"
    git_commit: main
    image_tag: qa
    components_w_resources: all
    include_ui: true
    post_deployment_script: "aa.sh"
    jobs:
    - "insights-deploy-ephemeral":
        display_name: Automation Analytics ephemeral-deployment
