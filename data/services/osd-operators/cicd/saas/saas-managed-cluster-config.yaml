---
$schema: /app-sre/saas-file-1.yml

labels:
  service: osd-operators

name: saas-managed-cluster-config
description: SaaS tracking file for managed-cluster-config

app:
  $ref: /services/osd-operators/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: team-srep-info

managedResourceTypes:
- SelectorSyncSet

imagePatterns:
- quay.io/app-sre/managed-cluster-config-registry

resourceTemplates:
- name: managed-cluster-config
  url: https://github.com/openshift/managed-cluster-config
  path: /hack/00-osd-managed-cluster-config.selectorsyncset.yaml.tmpl
  parameters:
    IDENTITY_ATTR_EMAIL: mail
    IDENTITY_ATTR_ID: uid
    IDENTITY_ATTR_NAME: cn
    IDENTITY_ATTR_PREFERRED_USERNAME: mail
    IDENTITY_BIND_DN: uid=AosSrePlatformTestingEmail,ou=serviceaccounts,dc=redhat,dc=com
    IDENTITY_URL: ldaps://ext-ldap.corp.redhat.com/ou=users,dc=redhat,dc=com?uid?sub
    IDENTITY_NAME: OpenShift_SRE
    IDENTITY_MAPPING_METHOD: claim
    IDENTITY_SRE_GOOGLE_CLIENTID: 211953714079-afmg28lojv8m2vv97b56s64ivm5ercn4.apps.googleusercontent.com 
    CS_SRE_USERS: 
    - amoran@redhat.com
    - crarobin@redhat.com
    - mfreer@redhat.com
    - jcueto@redhat.com
    - mciccone@redhat.com
    - pcremin@redhat.com
    - raananda@redhat.com
    - sclarkso@redhat.com
    - mtreadwe@redhat.com
    - rraghupa@redhat.com
    CEE_USERS:
    - dsquirre@redhat.com
    - bshirren@redhat.com
    - maupadhy@redhat.com
    - pkanthal@redhat.com
    - bmchugh@redhat.com
    - dcaldwel@redhat.com
    - zhigwang@redhat.com
    - grodrigu@redhat.com
    - ksalunkh@redhat.com

  targets:
  - namespace:
      $ref: /services/osd-operators/namespaces/hive-integration-cluster-scope.yml
    ref: master
    upstream: openshift-managed-cluster-config-gh-build-master
    parameters:
      TELEMETER_SERVER_URL: https://infogw.api.stage.openshift.com
  - namespace:
      $ref: /services/osd-operators/namespaces/hive-stage-cluster-scope.yml
    ref: master
    upstream: openshift-managed-cluster-config-gh-build-master
    parameters:
      TELEMETER_SERVER_URL: https://infogw.api.stage.openshift.com
      CS_SRE_USERS: 
      - amoran@redhat.com
      - crarobin@redhat.com
      - mfreer@redhat.com
      - jcueto@redhat.com
      - mciccone@redhat.com
      - pcremin@redhat.com
      - raananda@redhat.com
      - sclarkso@redhat.com
      - mtreadwe@redhat.com
      - rraghupa@redhat.com
  - namespace:
      $ref: /services/osd-operators/namespaces/v4/hive-stage-01-cluster-scope.yml
    ref: master
    upstream: openshift-managed-cluster-config-gh-build-master
    parameters:
      TELEMETER_SERVER_URL: https://infogw.api.stage.openshift.com
      CS_SRE_USERS: 
      - amoran@redhat.com
      - crarobin@redhat.com
      - mfreer@redhat.com
      - jcueto@redhat.com
      - mciccone@redhat.com
      - pcremin@redhat.com
      - raananda@redhat.com
      - sclarkso@redhat.com
      - mtreadwe@redhat.com
      - rraghupa@redhat.com
  - namespace:
      $ref: /services/osd-operators/namespaces/hive-production-cluster-scope.yml
    ref: 8b8f40f99a76835aef4d989b81842afb48ea285d
    parameters:
      TELEMETER_SERVER_URL: https://infogw.api.openshift.com
      CS_SRE_USERS: 
      - amoran@redhat.com
      - crarobin@redhat.com
      - mfreer@redhat.com
      - jcueto@redhat.com
      - mciccone@redhat.com
      - pcremin@redhat.com
      - raananda@redhat.com
      - sclarkso@redhat.com
