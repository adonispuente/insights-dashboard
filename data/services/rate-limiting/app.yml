---
$schema: /app-sre/app-1.yml

labels:
  service: rate-limiting

name: rate-limiting

description: |
  App SRE Rate Limiting service - a collection of Envoy rate limiting templates that leverage an AppSRE-managed Limitador backend

architectureDocument: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/app-sre/runbook/rate-limiting.md
sopsUrl: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/app-sre/runbook/rate-limiting.md
grafanaUrls:
- title: Rate-limiting Dashboard
  url: https://grafana.app-sre.devshift.net/d/rate-limiting/rate-limits
onboardingStatus: OnBoarded

escalationPolicy:
  $ref: /teams/app-sre/escalation-policies/stream-1.yaml
serviceOwners:
- name: App-SRE Stream 1
  email: sd-app-sre+stream-1@redhat.com

dependencies:
- $ref: /dependencies/quay/service.yml
- $ref: /dependencies/openshift/service.yml
- $ref: /dependencies/ci-int/service.yml
- $ref: /dependencies/gitlab/service.yml
- $ref: /dependencies/github/service.yml
- $ref: /dependencies/aws/service.yml

codeComponents:
- name: limitador
  resource: upstream
  url: https://github.com/Kuadrant/limitador
- name: limitador-templates
  resource: upstream
  url: https://gitlab.cee.redhat.com/service/rate-limiting-templates

quayRepos:
- org:
    $ref: /dependencies/quay/app-sre.yml
  items:
  - name: redis-5
    description: Mirrors registry.redhat.io/rhel8/redis-5
    public: false 
    mirror:
      $ref: /dependencies/image-mirrors/registry.redhat.io/redis-5.yaml

- org:
    $ref: /dependencies/quay/app-sre.yml
  items:
  - name: httpbin
    description: http server for used for limitador testing
    public: false
    mirror:
      $ref: /dependencies/image-mirrors/docker.io/httpbin.yml
  - name: go-httpbin
    description: http server for used for limitador testing
    public: true
    mirror:
      $ref: /dependencies/image-mirrors/ghcr.io/httpbin.yml

