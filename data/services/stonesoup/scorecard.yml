---
$schema: /app-sre/scorecard-2.yml

labels:
  service: stonesoup

app:
  $ref: /services/stonesoup/app.yml

date: "2023-03-13"

acceptanceCriteria:
- comment: No continuity plan as data resides in etcd. The risk must be accepted through
    exception process.
  name: CONTINUITY-0001
  status: red
- comment: No disaster recovery plan.
  name: CONTINUITY-0002
  status: red
- comment: 'In the case of this service, data management applies as well to the data
    in etcd, not only for the databases, as etcd contains application state. Given
    the automated process to manage the data (for example user management) this is
    marked as red.


    Once that concerned is solved, this control can be marked green as long as the
    services implement backwards compatibility for database schemas (like the gitops
    service) or for any CRs defined by the operators that constitute stonesoup.

    '
  name: CONTINUITY-0003
  status: red
- comment: ''
  name: INCIDENT-MGMT-0001
  status: green
- comment: All service metadata in the app-1.yml and the linked architecture docsite is accurate and up-to-date.
  name: INCIDENT-MGMT-0002
  status: green
- comment: ''
  name: INCIDENT-MGMT-0003
  status: green
- comment: Escalation policies are not defined in App-Interface for all control plane
    components.
  name: INCIDENT-MGMT-0004
  status: red
- comment: All services must document their dependencies.
  name: INCIDENT-MGMT-0005
  status: yellow
- comment: ''
  name: INCIDENT-MGMT-0006
  status: green
- comment: 'SOPs are being written for failure scenarios as they are identified, but progress on this control waits for the creation of alerts.
      See also https://gitlab.cee.redhat.com/rhtap/docs/sop/-/tree/main/pipeline-service

      Will not resolve this to green until we verify that all alerts are associated with adequate quality SOPs.

      '
  name: INCIDENT-MGMT-0007
  status: yellow
- comment: CEE engagement has not been formalized yet
  name: INCIDENT-MGMT-0008
  status: yellow
- comment: |
    All services must expose a prometheus endpoint, exposing relevant data
    and have a dashboard.

    For member clusters, managed as dataplane, SRE needs a way to get all metrics
    as well.
    
    data-plane - The metrics are pushed to RHOBS and can be seen from appsre-grafana.
    The following flowchart describes how metrics are pushed to RHOBS
    https://miro.com/app/board/uXjVMeIRKU8=/?moveToWidget=3458764561560268803&cot=14

    control-plane - The clusters were provisioned and maintained by the AppSRE team.
    Metrics produced by RHTAP's ArgoCD instance are collected by the Prometheus AppSRE
    instance deployed on each cluster.
    
  name: OBSERVABILITY-0001
  status: green
- comment: All services must defined and track SLOs and be exposed through a dashboard.
  name: OBSERVABILITY-0002
  status: red
- comment: No alert rules yet. No SOPs yet.
  name: OBSERVABILITY-0003
  status: red
- comment: No dashboards yet
  name: OBSERVABILITY-0004
  status: red
- comment: Work in progress.
  name: OBSERVABILITY-0005
  status: yellow
- comment: No SLO response policy yet.
  name: OBSERVABILITY-0006
  status: red
- comment: CICD of the main fleet manager components will be done through App-Interface.
    Work in progress.
  name: RELEASING-0001
  status: yellow
- comment: ''
  name: RELEASING-0002
  status: green
- comment: ''
  name: RELEASING-0003
  status: green
- comment: ''
  name: RELEASING-0004
  status: green
- comment: Ensure all services gate promotion to production against testing.
  name: RELEASING-0005
  status: yellow
- comment: ''
  name: RELIABILITY-0001
  status: green
- comment: ''
  name: RELIABILITY-0002
  status: green
- comment: The dependency management plan for Stonesoup components must be documented.
  name: RELIABILITY-0003
  status: red
- comment: ''
  name: RELIABILITY-0004
  status: green
- comment: Performance testing to determine the limits of all the operator based components
    must be conducted, to prevent the risk of collapsing the kube api or etcd.
  name: RELIABILITY-0005
  status: red
- comment: The scalibility plan must be documented. How will the service scale with
    an unexpected increase in demand?
  name: RELIABILITY-0006
  status: red
- comment: Ensure PDBs, anti-affinity, and other DVO rules are satisfied.
  name: RELIABILITY-0007
  status: yellow
- comment: ''
  name: RELIABILITY-0008
  status: green
- comment: Several tests have been carried out. Some remaining ones like testing the
    limits for the ArgoCDs on the member clusters.
  name: RELIABILITY-0009
  status: yellow
- comment: 'The following operations must be tested: scaling the service horizontally,
    upgrading version components, migrating service components.'
  name: RELIABILITY-0010
  status: red
- comment: Work in progress.
  name: RELIABILITY-0011
  status: yellow
- comment: 'RHTAP teams do not have access to AppSRE secrets. Secrets are stored in vault and
    [delivered via the external secrets
    operator](https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/stonesoup/sop/secrets.md).
    Rotation policy is
    [documented](https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/stonesoup/key-rotation-policy.md).'
  name: SECURITY-0001
  status: green
- comment: ''
  name: SECURITY-0002
  status: green
- comment: ''
  name: SECURITY-0003
  status: green
- comment: 'At this time, RHTAP/Stonesoup does not need to satisfy any particular compliance requirements. If that changes in the future, this attestation must be updated.'
  name: SECURITY-0004
  status: green
