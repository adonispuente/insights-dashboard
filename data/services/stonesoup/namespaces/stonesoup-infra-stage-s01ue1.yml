---
$schema: /openshift/namespace-1.yml

labels:
  service: stonesoup

name: stonesoup-infra-stage

description: Staging namespace for StoneSoup infra

cluster:
  $ref: /openshift/stonesoups01ue1/cluster.yml

app:
  $ref: /services/stonesoup/app.yml

environment:
  $ref: /products/stonesoup/environments/stage.yml

managedExternalResources: true

externalResources:
- provider: aws
  provisioner:
    $ref: /aws/stonesoup-stage/account.yml
  resources:
  - provider: secrets-manager-service-account
    identifier: stonesoup-spi-secrets-manager
    secrets_prefix: spi-stage
    output_resource_name: spi-secrets-manager
  - provider: secrets-manager-service-account
    identifier: stonesoup-remotesecret-secrets-manager
    secrets_prefix: remotesecret-stage
    output_resource_name: remotesecret-secrets-manager
