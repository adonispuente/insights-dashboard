---
$schema: /app-sre/saas-file-2.yml

labels:
  service: stonesoup-internal-services
name: stonesoup-int-srvc-staging
description: 'SaaS tracking file for stonesoup-internal-services'

app:
  $ref: /services/stonesoup/app.yml

pipelinesProvider:
  $ref: /services/stonesoup/internal-services/pipelines/tekton-stonesoup-internal-services.appsres03ue1.yaml

deployResources:
  requests:
    cpu: 900m
    memory: 2500Mi
  limits:
    cpu: 900m
    memory: 2500Mi

managedResourceTypes:
  - Pipeline
  - Task
  - ServiceAccount
  - CustomResourceDefinition
  - Deployment
  - RoleBinding
  - Role
  - ClusterRoleBinding
  - ClusterRole
  - Service

clusterAdmin: true

imagePatterns:
  - quay.io/redhat-appstudio/internal-services
  - quay.io/openshift/origin-kube-rbac-proxy

resourceTemplates:
  - name: stonesoup-internal-services-tekton-iib-resources
    url: https://github.com/hacbs-release/internal-services-resources
    path: /openshift/iib-template.yaml
    #parameters:
    #  REGISTRY_IMG: quay.io/app-sre/configuration-anomaly-detection
    targets:
      - namespace:
          $ref: /services/stonesoup/internal-services/namespaces/stonesoup-int-srvc.appsres03ue1.yaml
        ref: main
  - name: stonesoup-internal-services-tekton-errata-resources
    url: https://github.com/hacbs-release/internal-services-resources
    path: /openshift/errata-template.yaml
    targets:
      - namespace:
          $ref: /services/stonesoup/internal-services/namespaces/stonesoup-int-srvc.appsres03ue1.yaml
        ref: main
  - name: stonesoup-internal-services-catalog
    url: https://github.com/hacbs-release/app-interface-deployments
    path: /internal-services/catalog
    provider: directory
    targets:
      - namespace:
          $ref: /services/stonesoup/internal-services/namespaces/stonesoup-int-srvc.appsres03ue1.yaml
        ref: main
  - name: stonesoup-internal-services-crds
    url: https://github.com/hacbs-release/app-interface-deployments
    path: /internal-services/crds
    provider: directory
    targets:
      - namespace:
          $ref: /services/stonesoup/internal-services/namespaces/stonesoup-int-srvc.appsres03ue1.yaml
        ref: main
  - name: stonesoup-internal-services-manager
    url: https://github.com/hacbs-release/app-interface-deployments
    path: /internal-services/manager
    provider: directory
    targets:
      - namespace:
          $ref: /services/stonesoup/internal-services/namespaces/stonesoup-int-srvc.appsres03ue1.yaml
        ref: main
  - name: stonesoup-internal-services-rbac
    url: https://github.com/hacbs-release/app-interface-deployments
    path: /internal-services/rbac
    provider: directory
    targets:
      - namespace:
          $ref: /services/stonesoup/internal-services/namespaces/stonesoup-int-srvc.appsres03ue1.yaml
        ref: main
