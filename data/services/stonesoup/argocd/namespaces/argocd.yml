---
$schema: /openshift/namespace-1.yml

labels:
  service: stonesoup

name: argocd

description: Namespace for ArgoCD resources deployed by the Gitops Operator

cluster:
  $ref: /openshift/stone-prd-host1/cluster.yml

app:
  $ref: /services/stonesoup/argocd/app.yml

environment:
  $ref: /products/stonesoup/environments/production.yml

managedResourceTypes:
- ArgoCD
- ClusterRole
- ClusterRoleBinding

managedResourceNames:
- resource: ClusterRole
  resourceNames:
  - appstudio-openshift-gitops-argocd-server
  - appstudio-openshift-gitops-argocd-application-controller
- resource: ClusterRoleBinding
  resourceNames:
  - appstudio-openshift-gitops-argocd-server
  - appstudio-openshift-gitops-argocd-application-controller

clusterAdmin: true

openshiftResources:
- provider: resource
  path: /stonesoup/argocd/argocd.yml
- provider: resource
  path: /stonesoup/argocd/argocd-server-clusterrole.yml
- provider: resource-template
  type: jinja2
  path: /stonesoup/argocd/argocd-server-clusterrolebinding.yml.j2
  variables:
    argocd_namespace: argocd
- provider: resource
  path: /stonesoup/argocd/argocd-application-controller-clusterrole.yaml
- provider: resource-template
  type: jinja2
  path: /stonesoup/argocd/argocd-application-controller-clusterrolebinding.yaml.j2
  variables:
    argocd_namespace: argocd
