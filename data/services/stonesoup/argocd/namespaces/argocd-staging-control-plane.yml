---
$schema: /openshift/namespace-1.yml

labels:
  service: stonesoup

name: argocd-staging

description: Namespace for ArgoCD resources deployed by the Gitops Operator

cluster:
  $ref: /openshift/stonesoups01ue1/cluster.yml

app:
  $ref: /services/stonesoup/argocd/app.yml

environment:
  $ref: /products/stonesoup/environments/stage.yml

managedResourceTypes:
- ArgoCD
- Application

managedResourceNames:
- resource: ArgoCD
  resourceNames:
  - argocd

managedRoles: true

openshiftResources:
- provider: resource
  path: /stonesoup/argocd-control-plane/argocd.yml
- provider: resource-template
  type: jinja2
  path: /stonesoup/argocd-control-plane/app-of-appsets.yaml.j2
  variables:
    path: argo-cd-apps/overlays/staging
- provider: vault-secret
  path: stonesoup/staging/platform/stone-stg-host
  version: 2
  labels:
    appstudio.redhat.com/host-cluster: 'true'
    argocd.argoproj.io/secret-type: cluster
- provider: vault-secret
  path: stonesoup/staging/platform/stone-stg-m01
  version: 1
  labels:
    appstudio.redhat.com/member-cluster: 'true'
    argocd.argoproj.io/secret-type: cluster
- provider: vault-secret
  path: stonesoup/staging/platform/stone-stg-rh01
  version: 1
  labels:
    appstudio.redhat.com/member-cluster: 'true'
    appstudio.redhat.com/quality-dashboard: 'true'
    argocd.argoproj.io/secret-type: cluster

networkPoliciesAllow:
- $ref: /services/observability/namespaces/openshift-customer-monitoring.stonesoups01ue1.yml
