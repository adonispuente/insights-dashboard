---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: cna

name: ci-int-cna-jobs

description: 'CNA Jobs'

app:
  $ref: /services/cna/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

type: jobs

config:
- project:
    name: cna
    label: cna
    node: rhel8
    gl_group: service
    gl_project: cna-management
    pr_check_script_path: './pr_test.sh'
    quay_org: app-sre
    jobs:
    - 'gl-build-master':
        display_name: CNA build main
        branch: main
    - 'gl-pr-check':
        display_name: CNA pr-check
          # temporarily disabled because of missing S3 credentials
          #    - 'gl-timed-cna':
          #        branch: main
          #        display_name: CNA end-to-end test
          #        cron_expression: 'H/15 * * * *'
          #        ci_cmd: './end2end-curl.sh'
          #        slack_channel_notification: sd-ops-services-dev
    - 'gl-track-cna-modules':
        branch: main
        display_name: CNA management track modules 
        cron_expression: 'H/5 * * * *'
        ci_cmd: './track-cna-modules.sh'
- project:
    name: cna-modules
    label: cna
    node: rhel8
    gl_group: service
    gl_project: cna-modules
    pr_check_script_path: './pr_test.sh'
    build_deploy_script_path: './build.sh'
    quay_org: app-sre
    jobs:
    - 'gl-build-master':
        display_name: CNA Modules build main
        branch: main
    - 'gl-pr-check':
        display_name: CNA pr-check
