---
$schema: /vault-config/policy-1.yml

labels:
  service: vault.devshift.net

name: "app-interface-uhc-policy"
rules: |
  path "app-interface/metadata/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/app-sre/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/app-sre-stage/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/hive-integration/" {
    capabilities = ["list"]
  }

  # uhc-stage
  path "app-interface/metadata/app-sre-stage/uhc-stage/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/app-sre-stage/uhc-stage/*" {
    capabilities = ["list", "read"]
  }
  path "app-interface/data/app-sre-stage/uhc-stage/*" {
    capabilities = ["create", "update", "read"]
  }
  path "app-interface/data/app-sre-stage/uhc-stage/routes" {
    capabilities = ["deny"]
  }
  # SSO test
  path "app-interface/metadata/app-sre-stage/uhc-stage-sso-test/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/app-sre-stage/uhc-stage-sso-test/*" {
    capabilities = ["list", "read"]
  }
  path "app-interface/data/app-sre-stage/uhc-stage-sso-test/*" {
    capabilities = ["create", "update", "read"]
  }

  # uhc-integration
  path "app-interface/metadata/hive-integration/uhc-integration/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/hive-integration/uhc-integration/*" {
    capabilities = ["list", "read"]
  }
  path "app-interface/data/hive-integration/uhc-integration/*" {
    capabilities = ["create", "update", "read"]
  }
  path "app-interface/data/hive-integration/uhc-integration/routes" {
    capabilities = ["deny"]
  }

  path "app-interface/metadata/app-sre/uhc-production/" {
    capabilities = ["list"]
  }
  path "app-interface/metadata/app-sre/uhc-production/*" {
    capabilities = ["list", "read"]
  }
  # path "app-interface/data/app-sre/uhc-production/*" {
  #   capabilities = ["create", "update", "read"]
  # }
