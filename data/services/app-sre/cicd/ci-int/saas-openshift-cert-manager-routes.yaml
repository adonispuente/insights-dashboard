---
$schema: /app-sre/saas-file-2.yml

labels:
  service: app-sre

name: saas-openshift-cert-manager-routes
description: |
  SaaS to deploy openshift-cert-manager-routes operator. This operator needs to be deployed in the same
  namespace where cert-manager is located.

app:
  $ref: /services/app-sre/app.yml

clusterAdmin: true

pipelinesProvider:
  $ref: /services/app-interface/pipelines/tekton.app-sre-pipelines.appsrep05ue1.yaml

deployResources:
  requests:
    cpu: 600m
    memory: 2Gi
  limits:
    cpu: 1200m
    memory: 4Gi

slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ClusterRole.rbac.authorization.k8s.io
- ClusterRoleBinding.rbac.authorization.k8s.io
- ServiceAccount
- Deployment

imagePatterns:
- quay.io/app-sre/openshift-cert-manager-routes

resourceTemplates:
- name: cert-manager-routes
  url: https://github.com/app-sre/openshift-cert-manager-routes-templates
  path: /openshift/deploy.yaml
  parameters:
    IMAGE: quay.io/app-sre/openshift-cert-manager-routes
    RELEASE: 0.1.3
    CERT_MANAGER_NAMESPACE: cert-manager
  targets:
  - namespace:
      $ref: /openshift/appsres03ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/appsres04ue2/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/app-sre-stage-01/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/appsrep05ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/appsrep06ue2/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/app-sre-prod-01/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/app-sre-prod-04/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/hst02ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  # Backplane
  - namespace:
      $ref: /openshift/backplanei01ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/backplanei02ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/backplanes01ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/backplanes02uw2/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/backplanes03ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/backplanep01ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/backplanep02uw2/namespaces/cert-manager.yml
    ref: main
  # Insights
  - namespace:
      $ref: /openshift/insights/crcd01ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/insights/c-rh-c-eph/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/crcs02ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/crcp01ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  # Quay
  - namespace:
      $ref: /openshift/quays02ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/clairp01ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/quayp04ue2/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/quayp05ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/ocmquayrwp01ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  #stonesoup
  - namespace:
      $ref: /openshift/stonesoups01ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/stonesoupp01ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  # OTA (cincinnati-integration)
  - namespace:
      $ref: /openshift/ota-stage/namespaces/cert-manager.yml
    ref: main
  # Hive
  - namespace:
      $ref: /openshift/hivei01ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/hives02ue1/namespaces/cert-manager.yml
    ref: main
  - namespace:
      $ref: /openshift/hive-stage-01/namespaces/cert-manager.yml
    ref: main
  # RHOBS
  - namespace:
      $ref: /openshift/rhobsp02ue1/namespaces/cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9

- name: openshift-cert-manager-routes
  url: https://github.com/app-sre/openshift-cert-manager-routes-templates
  path: /openshift/deploy.yaml
  parameters:
    IMAGE: quay.io/app-sre/openshift-cert-manager-routes
    RELEASE: 0.1.3
  targets:
  - namespace:
      $ref: /openshift/telemeter-prod-01/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
# Hive
  - namespace:
      $ref: /openshift/hivep01ue1/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/hivep02ue1/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/hivep03uw1/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/hivep04ew2/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/hivep05ue1/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/hivep06uw2/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
  - namespace:
      $ref: /openshift/hivep07ue2/namespaces/openshift-cert-manager.yml
    ref: 24e9b09396e7d4342dc64b9719752f78d9c915f9
