---
$schema: /app-sre/saas-file-1.yml

labels:
  service: app-sre

name: saas-openshift-acme
description: SaaS tracking file for openshift-acme

app:
  $ref: /services/app-sre/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: sd-app-sre-info

managedResourceTypes:
- ConfigMap
- ServiceAccount
- Role
- RoleBinding
- Deployment

imagePatterns:
- quay.io/app-sre/openshift-acme

# Are you updating refs to deploy openshift-acme to production?
# Please update the ref in the vault saas file as well!
# https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/data/services/vault.devshift.net/cicd/saas.yaml
resourceTemplates:
- name: openshift-acme
  url: https://github.com/app-sre/openshift-acme-templates
  path: /openshift/openshift-acme.template.yaml
  parameters:
    IMAGE: quay.io/app-sre/openshift-acme
    CONTROLLER_IMAGE_TAG: controller
    EXPOSER_IMAGE_TAG: exposer
  targets:
  # Visual App-interface
  - namespace:
      $ref: /services/visual-app-interface.devshift.net/namespaces/visual-qontract-stage.yml
    ref: master
  - namespace:
      $ref: /services/visual-app-interface.devshift.net/namespaces/visual-qontract-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # App-interface
  - namespace:
      $ref: /services/app-interface/namespaces/app-interface-stage.yml
    ref: master
    parameters:
      MEMORY_REQUESTS: 300Mi
      MEMORY_LIMITS: 300Mi
  - namespace:
      $ref: /services/app-interface/namespaces/app-interface-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
    parameters:
      MEMORY_REQUESTS: 400Mi
      MEMORY_LIMITS: 400Mi
  # GitHub-mirror
  - namespace:
      $ref: /services/github-mirror/namespaces/github-mirror-stage.yaml
    ref: master
  - namespace:
      $ref: /services/github-mirror/namespaces/github-mirror-production.yaml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # App SRE observability
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-stage.yml
    ref: master
  - namespace:
      $ref: /services/observability/namespaces/app-sre-observability-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
    parameters:
      MEMORY_REQUESTS: 100Mi
      MEMORY_LIMITS: 100Mi
  # Sentry
  - namespace:
      $ref: /services/sentry/namespaces/sentry-stage.yaml
    ref: master
  - namespace:
      $ref: /services/sentry/namespaces/sentry-production.yaml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # Unleash
  - namespace:
      $ref: /services/unleash/namespaces/app-sre-stage-01.yml
    ref: master
  - namespace:
      $ref: /services/unleash/namespaces/app-sre-prod-01.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # Dashdotdb
  - namespace:
      $ref: /services/dashdot/namespaces/app-sre-stage-01.yml
    ref: master
  - namespace:
      $ref: /services/dashdot/namespaces/app-sre-prod-01.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # per-cluster observability namespaces
  - namespace:
      $ref: /openshift/app-sre-prod-01/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/app-sre-prod-03/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/app-sre-prod-04/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/app-sre-stage-01/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/app-sre-stage-02/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/appsres04ue2/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/crcs02ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/insights/crcgovs02ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/insights/c-rh-c-eph/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/insights/crcgovp01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/crcp01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/quays02ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  - namespace:
      $ref: /openshift/quayp03ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/quayp04ue2/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/quayp05ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/ocmquayrwp01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/ocmquayrop01ue1/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/ocmquayrop01ew1/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/telemeter-prod-01/namespaces/app-sre-observability-per-cluster.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /openshift/che-dev/namespaces/app-sre-observability-per-cluster.yml
    ref: master
  # Code Quarkus
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-redhat-stage.yml
    ref: master
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-stage.yml
    ref: master
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  - namespace:
      $ref: /services/quarkus/namespaces/code-quarkus-redhat-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # UHC
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # Insights
  - namespace:
      $ref: /services/insights/turnpike/namespaces/stage-turnpike-stage.yml
    ref: master
  - namespace:
      $ref: /services/insights/turnpike/namespaces/prod-turnpike-prod.yml
    ref: master
  # Assisted Installer
  - namespace:
      $ref: /services/assisted-installer/namespaces/assisted-installer-stage.yml
    ref: master
  - namespace:
      $ref: /services/assisted-installer/namespaces/assisted-installer-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # Managed Services
  - namespace:
      $ref: /services/managed-services/namespaces/managed-services-stage.yml
    ref: master
  - namespace:
      $ref: /services/managed-services/namespaces/managed-services-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # Cincinnati
  - namespace:
      $ref: /services/cincinnati/namespaces/cincinnati-stage.yml
    ref: master
  - namespace:
      $ref: /services/cincinnati/namespaces/cincinnati-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # Devfile Registry
  - namespace:
      $ref: /services/devfile-registry/namespaces/devfile-registry-stage.yml
    ref: master
  - namespace:
      $ref: /services/devfile-registry/namespaces/devfile-registry-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
  # MAS SSO
  - namespace:
      $ref: /services/mas-sso/namespaces/mas-sso-stage.yml
    ref: master     
  - namespace:
      $ref: /services/mas-sso/namespaces/mas-sso-production.yml
    ref: 911cad042bba00ac799e974d6c6259c85d7a472e
