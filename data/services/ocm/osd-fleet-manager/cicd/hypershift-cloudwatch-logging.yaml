---
$schema: /app-sre/saas-file-2.yml
labels: {}

name: hs-cw-logging
description: SaaS file to deploy Cluster Logging on Hypershift Servcie and Management clusters

app:
  $ref: /services/ocm/osd-fleet-manager/app.yml

pipelinesProvider:
  $ref: /services/ocm/pipelines/tekton.ocm-pipelines.appsrep05ue1.yaml

slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: dev-null

managedResourceTypes:
- SelectorSyncSet

imagePatterns: []

validateTargetsInApp: true
resourceTemplates:
- name: hypershift-cloudwatch-logging-integration
  url: https://gitlab.cee.redhat.com/service/hypershift-cloudwatch-logging
  path: /hypershift-cloudwatch-logging.yaml
  parameters:
    HIVE_NAMESPACE: osd-fleet-manager-integration
  targets:
  - name: hypershift-cloudwatch-logging-integration-us-west-2
    namespace:
      $ref: /services/ocm/osd-fleet-manager/namespaces/hive/osd-fleet-manager-integration-hivei01ue1.yml
    ref: main
    parameters:
      REGION: us-west-2
  - name: hypershift-cloudwatch-logging-integration-us-east-2
    namespace:
      $ref: /services/ocm/osd-fleet-manager/namespaces/hive/osd-fleet-manager-integration-hivei01ue1.yml
    ref: main
    parameters:
      REGION: us-east-2
  - name: hypershift-cloudwatch-logging-integration-eu-central-1
    namespace:
      $ref: /services/ocm/osd-fleet-manager/namespaces/hive/osd-fleet-manager-integration-hivei01ue1.yml
    ref: main
    parameters:
      REGION: eu-central-1
- name: hypershift-cloudwatch-logging-stage
  url: https://gitlab.cee.redhat.com/service/hypershift-cloudwatch-logging
  path: /hypershift-cloudwatch-logging.yaml
  parameters:
    HIVE_NAMESPACE: osd-fleet-manager-stage
  targets:
  - name: hypershift-cloudwatch-logging-stage-us-west-2
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-stage")]
    ref: main
    parameters:
      REGION: us-west-2
  - name: hypershift-cloudwatch-logging-stage-us-east-2
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-stage")]
    ref: main
    parameters:
      REGION: us-east-2
  - name: hypershift-cloudwatch-logging-stage-us-east-1
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-stage")]
    ref: main
    parameters:
      REGION: us-east-1
  - name: hypershift-cloudwatch-logging-stage-eu-west-1
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-stage")]
    ref: main
    parameters:
      REGION: eu-west-1
- name: hypershift-cloudwatch-logging-production
  url: https://gitlab.cee.redhat.com/service/hypershift-cloudwatch-logging
  path: /hypershift-cloudwatch-logging.yaml
  parameters:
    HIVE_NAMESPACE: osd-fleet-manager-production
  targets:
  - name: hypershift-cloudwatch-logging-production-us-east-1
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-production")]
    ref: d0f44219e051693eb90ed5fdab85242286753f2e
    parameters:
      REGION: us-east-1
  - name: hypershift-cloudwatch-logging-production-us-east-2
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-production")]
    ref: d0f44219e051693eb90ed5fdab85242286753f2e
    parameters:
      REGION: us-east-2
  - name: hypershift-cloudwatch-logging-production-eu-west-1
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-production")]
    ref: d0f44219e051693eb90ed5fdab85242286753f2e
    parameters:
      REGION: eu-west-1
  - name: hypershift-cloudwatch-logging-production-us-west-2
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-production")]
    ref: d0f44219e051693eb90ed5fdab85242286753f2e
    parameters:
      REGION: us-west-2
  - name: hypershift-cloudwatch-logging-production-eu-central-1
    provider: dynamic
    namespaceSelector:
      jsonPathSelectors:
        include:
        - namespace[?(@.cluster.name=~"hive.*" & @.name=="osd-fleet-manager-production")]
    ref: d0f44219e051693eb90ed5fdab85242286753f2e
    parameters:
      REGION: eu-central-1
