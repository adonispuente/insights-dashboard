---
$schema: /app-sre/slo-document-1.yml

labels:
  service: osd-fleet-manager

name: osd-fleet-manager

app:
  $ref: /services/ocm/osd-fleet-manager/app.yml

namespaces:
- $ref: /services/ocm/osd-fleet-manager/namespaces/production.yml

slos:
- name: api-availability
  SLIType: availability
  SLISpecification: Availability (measured as the product of errors and latency) has to be met a certain percentafe of the time
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-api-availability.md
  SLOParameters:
    window: 28d
  expr: 
    sum(increase(api_inbound_request_count{job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production",code!~"5..|0"}[{{window}}]))
    /
    sum(increase(api_inbound_request_count{job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production"}[{{window}}]))
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: api-availability-create
  SLIType: availability
  SLISpecification: Availability (measured as the product of errors and latency) has to be met a certain percentafe of the time
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-api-availability.md
  SLOParameters:
    window: 28d
  expr: 
    sum(increase(api_inbound_request_count{job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production",code!~"5..|0", path="/api/clusters_mgmt/v1/clusters", method="POST"}[{{window}}]))
    /
    sum(increase(api_inbound_request_count{job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production", path="/api/clusters_mgmt/v1/clusters", method="POST"}[{{window}}]))
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: api-availability-delete
  SLIType: availability
  SLISpecification: Availability (measured as the product of errors and latency) has to be met a certain percentafe of the time
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-api-availability.md
  SLOParameters:
    window: 28d
  expr: 
    sum(increase(api_inbound_request_count{job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production",code!~"5..|0", path=~"/api/clusters_mgmt/v1/clusters/+.", method="DELETE"}[{{window}}]))
    /
    sum(increase(api_inbound_request_count{job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production" path=~"/api/clusters_mgmt/v1/clusters/+.", method="DELETE"}[{{window}}]))
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: api-latency
  SLIType: latency
  SLISpecification: Availability (measured as the product of errors and latency) has to be met a certain percentafe of the time
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-api-latency.md
  SLOParameters:
    window: 28d
  expr: 
    sum(increase(api_inbound_request_duration_bucket{job="fleet-manager-metrics",namespace="osd-fleet-manager-production", code!~"5..|0",le="1"}[{{window}}]))
    /
    sum(increase(api_inbound_request_duration_count{job="fleet-manager-metrics",namespace="osd-fleet-manager-production", code!~"5..|0"}[{{window}}]))
  SLOTarget: 0.95
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

#- name: TODO OSDFM Added Latency TODO
#  SLIType: latency
#  SLISpecification: Availability (measured as the product of errors and latency) has to be met a certain percentafe of the time
#  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-added-latency.md
#  SLOParameters:
#    window: 28d
#  expr: TODO
#  SLOTarget: 0.95
#  SLOTargetUnit: percent_0_1
#  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
#  dashboard: /to/do

- name: saturation-level
  SLIType: availability
  SLISpecification: Availability (measured as the product of errors and latency) has to be met a certain percentafe of the time
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-saturation.md
  SLOParameters:
    window: 28d
  expr: 
    sum(fleet_manager_management_cluster_hosted_cluster_count{job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production",region="$region"}[{{window}}])
    /
    (
    sum(fleet_manager_available_management_clusters_by_service_cluster_count{region="$region", job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production"}[{{window}}]) 
    *
    sum(fleet_manager_max_desired_hosted_cluster_count{region="$region", job="fleet-manager-metrics",osd-fleet-manager-production="osd-fleet-manager-production"}[{{window}}])
    )
  SLOTarget: 0.90
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Accepted loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Accepted reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_accepted", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_accepted", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Account Provisionned loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Account Provisionned reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_account_provisioned", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_account_provisioned ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Provisionning loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Provisionning reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_provisioning", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_provisioning ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Provisionned loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Provisionned reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_account_provisioned", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cluster_account_provisioned ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Waiting For Children loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Waiting For Children reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_waiting_for_children", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_waiting_for_children ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Ready loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Ready reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_ready", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_ready ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Maintenance loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Maintenance reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_maintenance", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_maintenance ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Deprovisioning loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Deprovisioning reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_deprovisioning", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_deprovisioning ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Service Cluster Cluster Cleanup loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Cleanup reconcile loop successful for the Service Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cleanup", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-sc", reconciliation_step="hs-sc_cleanup ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Accepted loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Accepted reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_accepted", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_accepted", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Account Provisionned loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Account Provisionned reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_account_provisioned", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_account_provisioned ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Provisionning loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Provisionning reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_provisioning", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_provisioning ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Provisionned loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Provisionned reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_account_provisioned", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cluster_account_provisioned ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Ready loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Ready reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_ready", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_ready ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Maintenance loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Maintenance reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_maintenance", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_maintenance ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Deprovisioning loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Deprovisioning reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_deprovisioning", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_deprovisioning ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Reconcile Management Cluster Cluster Cleanup loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM Cluster Cleanup reconcile loop successful for the Management Cluster worker
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cleanup", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="hs-mc", reconciliation_step="hs-mc_cleanup ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Token Renewal Reconcile loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM reconcile loop successful for the Token Renewal worker for OSDFM Service Account
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="service-account-token-renewal", reconciliation_step="token_renewal_osdfm", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="service-account-token-renewal", reconciliation_step="token_renewal_osdfm ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do

- name: OSDFM Token Renewal Reconcile loop success
  SLIType: correctness
  SLISpecification: Percentage of OSDFM reconcile loop successful for the Token Renewal worker for OCM Service Account
  SLODetails: https://gitlab.cee.redhat.com/service/app-interface/-/blob/master/docs/osd-fleet-manager/slos/fleet-manager-reconcile-loop-success.md
  SLOParameters:
    window: 28d
  expr: |
    sum(fleet_manager_reconciler_success_count{job="fleet-manager-metrics",worker_type="service-account-token-renewal", reconciliation_step="token_renewal_ocm", namespace="osd-fleet-manager-production"}[{{window}}])
    /
    sum(fleet_manager_reconciler_total_count{job="fleet-manager-metrics",worker_type="service-account-token-renewal", reconciliation_step="token_renewal_ocm ", namespace="osd-fleet-manager-production"}[{{window}}])
  SLOTarget: 0.99
  SLOTargetUnit: percent_0_1
  prometheusRules: /observability/prometheusrules/osd-fleet-manager-production.prometheusrules.yaml
  dashboard: /to/do


