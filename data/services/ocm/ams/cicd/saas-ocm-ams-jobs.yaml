---
$schema: /app-sre/saas-file-2.yml
labels:
  service: uhc
name: saas-ocm-ams-jobs
description: SaaS tracking file for OCM AMS
app:
  $ref: /services/ocm/ams/app.yml
pipelinesProvider:
  $ref: /services/ocm/pipelines/tekton.ocm-pipelines.appsrep05ue1.yaml
deployResources:
  requests:
    cpu: 600m
    memory: 1Gi
  limits:
    cpu: 1200m
    memory: 1Gi
slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: team-uhc-info
managedResourceTypes:
- CronJob
- ConfigMap
imagePatterns:
- quay.io/app-sre/uhc-account-manager
- quay.io/centos/centos
authentication:
  image:
    path: app-sre/quay/app-sre-pull
    field: all
resourceTemplates:
- name: account-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-account-reconciler
    AMS_RUN_JOB_CMD: account-reconciler
    CRON_SCHEDULE: 30 18 * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    ENABLE_CANDLEPIN_MOCK: 'true'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      CRON_SCHEDULE: 59 15 * * 2
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      WORKER_COUNT: '2'
      CRON_SCHEDULE: 36 17 * * 3
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369


- name: deprovision-old-subscriptions-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-deprovision-old-subscriptions
    AMS_RUN_JOB_CMD: deprovision-old-subscriptions
    CRON_SCHEDULE: 0 23 * * 5
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      CRON_SCHEDULE: 30 17 * * *
      SUSPEND_JOB: 'true'
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 36 17 * * *
      SUSPEND_JOB: 'true'
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: ocp-usage-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-ocp-usage-reconciler
    AMS_RUN_JOB_CMD: ocp-usage-reconciler
    CRON_SCHEDULE: 0 0 1 1 *
    JOB_BACKOFF_LIMIT: 2
    JOB_ACTIVE_DEADLINE_SECONDS: '21600'
    SUSPEND_JOB: 'true'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 26 */2 * * *
      SUSPEND_JOB: 'false'
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: ocp-usage-cleaner-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-ocp-usage-cleaner
    AMS_RUN_JOB_CMD: ocp-usage-cleaner
    CRON_SCHEDULE: 0 0 1 1 *
    JOB_BACKOFF_LIMIT: 2
    JOB_ACTIVE_DEADLINE_SECONDS: '30000'
    SUSPEND_JOB: 'true'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 21 */5 * * *
      SUSPEND_JOB: 'false'
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: subscription-status-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-sub-status-reconciler
    AMS_RUN_JOB_CMD: subscription-status-reconciler
    CRON_SCHEDULE: 6 * * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
    MAX_DELETE_CLUSTERS: '1'
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: subscription-based-data-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-subscription-based-data-reconciler
    AMS_RUN_JOB_CMD: subscription-based-data-reconciler
    CRON_SCHEDULE: '*/30 * * * *'
    SUSPEND_JOB: 'false'
    RELEASED_UNRELEASED_TRIGGER_DURATION: 1h
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 3-59/30 * * * *
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: rh-marketplace-quota-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-rh-marketplace-quota-reconciler
    AMS_RUN_JOB_CMD: rh-marketplace-quota-reconciler
    CRON_SCHEDULE: '*/5 * * * *'
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: '*/5 * * * *'
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: ebs-account-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-ebs-account-reconciler
    AMS_RUN_JOB_CMD: ebs-account-reconciler
    CRON_SCHEDULE: 11 * * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      CRON_SCHEDULE: 0,30 * * * *
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 11 * * * *
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: auto-entitlement-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-auto-entitlement-reconciler
    AMS_RUN_JOB_CMD: auto-entitlement-reconciler
    CRON_SCHEDULE: 31 11 * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 31 11 * * *
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: hydra-fetch-organizations-data-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-hydra-fetch-organizations-data
    AMS_RUN_JOB_CMD: hydra-fetch-organizations-data
    CRON_SCHEDULE: 16 * * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
    CLIENT_CARDINALITY: '500'
    WORKER_COUNT: '3'
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      SUSPEND_JOB: 'true'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SUSPEND_JOB: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      SUSPEND_JOB: 'true'
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 16 * * * *
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: fetch-telemeter-metrics-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-fetch-telemeter-metrics
    AMS_RUN_JOB_CMD: fetch-telemeter-metrics
    CRON_SCHEDULE: '*/30 * * * *'
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
    TELEMETER_URL: ${TELEMETER_BASE_URL}
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      CRON_SCHEDULE: '*/5 * * * *'
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: '*/5 * * * *'
      WORKER_COUNT: '16'
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: warehouse-deleted-subscriptions-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-warehouse-deleted-subscriptions
    AMS_RUN_JOB_CMD: warehouse-deleted-subscriptions
    CRON_SCHEDULE: '*/15 * * * *'
    SUSPEND_JOB: 'false'
    WAREHOUSE_MAX_AMOUNT: 1000
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: registry-credential-pool-loader-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-registry-credential-pool-loader
    AMS_RUN_JOB_CMD: registry-credential-pool-loader
    CRON_SCHEDULE: 0 * * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      CLIENT_CARDINALITY: 5
      POOL_HIGH_WATER_MARK: 10
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      CRON_SCHEDULE: 46 * * * *
      CLIENT_CARDINALITY: 100
      POOL_HIGH_WATER_MARK: 3000
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: cluster-transfers-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-cluster-transfers-reconciler
    AMS_RUN_JOB_CMD: cluster-transfers-reconciler
    CRON_SCHEDULE: 0 14 * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: pull-secret-rotations-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-pull-secret-rotations-reconciler
    AMS_RUN_JOB_CMD: pull-secret-rotations-reconciler
    CRON_SCHEDULE: 0 */6 * * *
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: rbac-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-rbac-reconciler
    AMS_RUN_JOB_CMD: rbac-reconciler
    CRON_SCHEDULE: 15,45 * * * *
    RBAC_RECONCILER_LIMIT: -1
    RBAC_BASE_URL: https://mtls.internal.console.redhat.com
    RBAC_PROXY: ''
    WORKER_COUNT: 4
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'true'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      RBAC_BASE_URL: https://mtls.internal.console.redhat.com
      RBAC_PROXY: ''
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
      WORKER_COUNT: 1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      CRON_SCHEDULE: 0,30 * * * *
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      WORKER_COUNT: 2
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      RBAC_BASE_URL: https://mtls.internal.console.redhat.com
      RBAC_PROXY: ''
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      RBAC_BASE_URL: https://mtls.internal.console.redhat.com
      RBAC_PROXY: ''
      AUTOMATIC_BAN: 'false'
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      RBAC_BASE_URL: https://mtls.internal.console.redhat.com
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369

- name: username-reconciler-job
  url: https://gitlab.cee.redhat.com/service/uhc-account-manager
  path: /templates/cronjob-template.yml
  parameters:
    JOB_NAME: ocm-ams-username-reconciler
    AMS_RUN_JOB_CMD: username-reconciler
    CRON_SCHEDULE: '*/15 * * * *'
    JOB_ACTIVE_DEADLINE_SECONDS: 600
    SUSPEND_JOB: 'false'
    IMAGE_REGISTRY: quay.io
    IMAGE_REPOSITORY: app-sre/uhc-account-manager
    UHC_BASE_URL: ${OCM_BASE_URL}
    UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
    QUAY_REGISTRY_ORG_NAME: openshift-release-dev
    AUTOMATIC_BAN: 'false'
    ENABLE_SENTRY: 'true'
    RHIT_TIMEOUT: 30s
    GODEBUG: http2server=0
    DB_MAX_OPEN_CONNS: 250
    MANDRILL_TIMEOUT: 60s
    RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.stage.redhat.com/candlepin
    USE_CANDLEPIN_BASIC_AUTH: 'false'
    SENTRY_PROJECT: '12'
    MOA_SKU: SER0579
    RHM_SKU_LIST_FILE: /configs/subscription-skus/rhm-skus-enhanced.yaml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      USE_CANDLEPIN_BASIC_AUTH: 'true'
      SENTRY_URL: glitchtip.devshift.net
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-integration.svc.cluster.local
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-appsres04ue2.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-sso-test.yml
    ref: master
    upstream:
      instance:
        $ref: /dependencies/ci-int/ci-int.yml
      name: service-uhc-account-manager-gl-build-master
    parameters:
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-stage.svc.cluster.local
      RHIT_BASE_TNC_URL: https://www.stage.redhat.com/wapps/tnc
      UHC_TOKEN_URL: ${SSO_BASE_URL}/protocol/openid-connect/token
      SENTRY_URL: glitchtip.devshift.net
      UNLEASH_URL: https://ocm-stage.unleash.devshift.net/api
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_1
  - namespace:
      $ref: /services/ocm/namespaces/uhc-production.yml
    ref: 9f8fe094184fa558456c83364801202c637df1de
    parameters:
      JWKS_URL: ${OCM_BASE_URL}/.well-known/jwks.json
      RHIT_BASE_USER_URL: https://user.api.redhat.com/v2/
      RHIT_BASE_SUBSCRIPTION_URL: https://subscription.api.redhat.com/svcrest/subscription/v5/
      RHIT_BASE_REGISTRY_URL: https://container-registry-authorizer.api.redhat.com/v1/
      RHIT_BASE_REGNUM_URL: https://subscription.api.redhat.com/svcrest/regnum/v5/
      RHIT_BASE_EXPORT_COMPLIANCE_URL: https://export-compliance.api.redhat.com/v1/
      RHIT_BASE_TERMS_URL: https://terms.api.redhat.com/svcrest/terms/
      RHIT_BASE_TNC_URL: https://www.redhat.com/wapps/tnc
      RHIT_BASE_CANDLEPIN_URL: https://admin.rhsm.redhat.com/candlepin
      SENTRY_URL: glitchtip.devshift.net
      ENABLE_CERTIFICATE_MOCK: 'false'
      UPDATE_DEPLOYMENT_CONFIG_CHANGE: update_for_vault_secret_21
      UNLEASH_URL: https://ocm.unleash.devshift.net/api
      QUAY_REGISTRY_TEAM_NAME: installers
      METRICS_BASE_URL: uhc-acct-mngr-metrics.uhc-production.svc.cluster.local
      SENTRY_PROJECT: '50'
      MOA_SKU: MW01369
