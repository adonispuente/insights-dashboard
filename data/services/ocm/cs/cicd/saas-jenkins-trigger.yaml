---
$schema: /app-sre/saas-file-2.yml
labels:
  service: uhc
name: saas-jenkins-trigger
description: SaaS deployment for triggering CS jobs in Jenkins
app:
  $ref: /services/ocm/cs/app.yml
pipelinesProvider:
  $ref: /services/ocm/pipelines/tekton.ocm-pipelines.appsrep05ue1.yaml
managedResourceTypes:
- ServiceAccount
- Job
imagePatterns:
- quay.io/app-sre/ubi8-ubi-minimal
resourceTemplates:
- name: uhc-clusters-service
  url: https://gitlab.cee.redhat.com/service/uhc-clusters-service
  path: /templates/jenkins-trigger-template.yml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration-tests.yml
    ref: b0278c9eaf70895ab284a591c7332e79a1b00c99
    promotion:
      auto: true
      subscribe:
      - ocm-cs-deployed-int
      publish:
      - ocm-jenkins-trigger-int-ok
    parameters:
      JENKINS_JOB_NAME: uhc-integration-tests-integration
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-tests.yml
    ref: 640e1c7ba35dac24dd6a7092c651fe001a68a836
    promotion:
      auto: true
      subscribe:
      - ocm-cs-deployed-stage
      publish:
      - ocm-jenkins-trigger-stage-ok
    parameters:
      JENKINS_JOB_NAME: uhc-integration-tests-staging
