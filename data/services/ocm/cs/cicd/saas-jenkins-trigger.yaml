---
$schema: /app-sre/saas-file-2.yml
labels:
  service: uhc
name: saas-jenkins-trigger
description: SaaS deployment for triggering CS jobs in Jenkins
app:
  $ref: /services/ocm/cs/app.yml
pipelinesProvider:
  $ref: /services/ocm/pipelines/tekton.ocm-pipelines.appsrep05ue1.yaml
slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: ocm-ship-it
managedResourceTypes:
- ServiceAccount
- Job
imagePatterns:
- quay.io/app-sre/ubi8-ubi-minimal
resourceTemplates:
- name: uhc-clusters-service
  url: https://gitlab.cee.redhat.com/service/uhc-clusters-service
  path: /templates/jenkins-trigger-template.yml
  targets:
  - namespace:
      $ref: /services/ocm/namespaces/uhc-integration-tests.yml
    ref: 410b4d978808a8c1f8ce9c22128db18aa912c6ab
    promotion:
      auto: true
      subscribe:
      - ocm-cs-deployed-int
      publish:
      - ocm-jenkins-trigger-int-ok
    parameters:
      JENKINS_JOB_NAME: uhc-integration-tests-integration
  - namespace:
      $ref: /services/ocm/namespaces/uhc-stage-tests.yml
    ref: 04aff75d74f642e87d9f55da0d1a2d5dd0ffe699
    promotion:
      auto: true
      subscribe:
      - ocm-cs-deployed-stage
      publish:
      - ocm-jenkins-trigger-stage-ok
    parameters:
      JENKINS_JOB_NAME: uhc-integration-tests-staging
