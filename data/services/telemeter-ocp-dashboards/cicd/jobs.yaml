---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: telemeter-ocp-dashboards

name: ci-int-telemeter-ocp-dashboards-jobs

description: ''

instance:
  $ref: /dependencies/ci-int/ci-int.yml

type: jobs

config:
- project:
    name: telemeter-ocp-dashboards
    label: telemeter-ocp-dashboards
    node: app-sre
    gl_group: data-hub
    gl_project: telemeter-ocp-dashboards
    kube_cluster: datahub-psi
    kube_namespace: dh-stage-prometheus-lts
    saasherder_context: telemeter-ocp-dashboards
    saasherder_services: grafana
    saas_git: https://gitlab.cee.redhat.com/data-hub/saas-telemeter-ocp-dashboards.git
    saasherder_object_blacklist: 'Route,Secret,ServiceAccount' # Default: Route,Secret,ConfigMap,ServiceAccount
    quay_org: app-sre
    jobs:
    - 'gl-build-master':
        display_name: build master
        auto_promote: true
    - 'gl-pr-check':
        display_name: pr check

- project:
    name: telemeter-ocp-dashboards-cd
    label: telemeter-ocp-dashboards
    node: app-sre
    gl_group: data-hub
    gl_project: saas-telemeter-ocp-dashboards
    kube_cluster: datahub-psi
    kube_namespace: dh-prod-prometheus-lts
    saasherder_context: telemeter-ocp-dashboards
    quay_org: app-sre
    manifest_bouncer_options: '--disable-registry-quay'
    saasherder_object_blacklist: 'Route,Secret,ServiceAccount' # Default: Route,Secret,ConfigMap,ServiceAccount
    jobs:
    - 'saas-deploy':
        display_name: promote-to-prod
    - 'saas-pr-check':
        display_name: promote-to-prod pr check
