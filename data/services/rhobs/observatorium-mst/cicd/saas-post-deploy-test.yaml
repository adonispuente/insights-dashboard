---
$schema: /app-sre/saas-file-2.yml
labels:
  service: observatorium
name: saas-observatorium-mst-e2e-test
description: SaaS tracking file for Observatorium MST post-deploy test
app:
  $ref: /services/rhobs/observatorium/app.yml
pipelinesProvider:
  $ref: /services/rhobs/observatorium/pipelines/observatorium-pipeline.appsrep05ue1.yaml
slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: team-monitoring-info
managedResourceTypes:
- Job

publishJobLogs: true
imagePatterns:
- quay.io/app-sre/rhobs-e2e
- quay.io/app-sre/ubi8-ubi-minimal

authentication:
  image:
    path: app-sre/quay/app-sre-pull
    field: all
resourceTemplates:
- name: rhobs-e2e-tests-observatorium-mst
  url: https://github.com/rhobs/configuration
  path: /tests/integration_tests/post-deploy-metrics-job-template.yaml
  targets:
  - namespace:
      $ref: /services/rhobs/observatorium-mst/namespaces/app-sre-stage-01/observatorium-mst-stage.yml
    ref: 433f40435c66a677dce7a8e5901b1a5703e31b7e
    parameters:
      ENDPOINT_TYPE: metrics
      IMAGE: quay.io/app-sre/rhobs-e2e
      SUFFIX: observatorium-mst-tests
      CREDENTIALS_SECRET: rhobs-tenant-mst-staging
      API_URL: https://observatorium-mst.api.stage.openshift.com
      METRIC_LABELS: name="observatorium-mst-tests"
    promotion:
      auto: false
      subscribe:
      - observatorium-mst-stage-deploy-success-channel
- name: rhobs-e2e-tests-observatorium-mst-metrics
  url: https://github.com/rhobs/configuration
  path: /tests/integration_tests/post-deploy-metrics-job-template.yaml
  targets:
  - namespace:
      $ref: /services/rhobs/observatorium-mst/namespaces/app-sre-stage-01/observatorium-mst-stage.yml
    ref: 433f40435c66a677dce7a8e5901b1a5703e31b7e
    parameters:
      ENDPOINT_TYPE: metrics
      IMAGE: quay.io/app-sre/rhobs-e2e
      SUFFIX: observatorium-mst-metrics-tests
      CREDENTIALS_SECRET: rhobs-tenant-mst-staging
      API_URL: https://observatorium-mst.api.stage.openshift.com
      METRIC_LABELS: name="observatorium-mst-metrics-tests"
    promotion:
      auto: false
      subscribe:
      - observatorium-mst-metrics-stage-deploy-success-channel
- name: rhobs-e2e-tests-observatorium-mst-logs
  url: https://github.com/rhobs/configuration
  path: /tests/integration_tests/post-deploy-logs-job-template.yaml
  targets:
  - namespace:
      $ref: /services/rhobs/observatorium-mst/namespaces/app-sre-stage-01/observatorium-mst-stage.yml
    ref: 433f40435c66a677dce7a8e5901b1a5703e31b7e
    parameters:
      ENDPOINT_TYPE: logs
      INIT_CONTAINTER_IMAGE: quay.io/app-sre/ubi8-ubi-minimal
      INIT_CONTAINER_IMAGE_TAG: 8.6-854
      IMAGE: quay.io/app-sre/rhobs-e2e
      SUFFIX: observatorium-mst-logs-tests
      CREDENTIALS_SECRET: rhobs-tenant-mst-staging
      API_URL: https://observatorium-mst.api.stage.openshift.com
      METRIC_LABELS: name="observatorium-mst-logs-tests"
    promotion:
      auto: false
      subscribe:
      - observatorium-mst-logs-stage-deploy-success-channel
