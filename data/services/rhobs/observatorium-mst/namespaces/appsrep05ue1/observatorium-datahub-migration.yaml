---
$schema: /openshift/namespace-1.yml

labels: {}

#TODO - pgough/rhobs - delete after https://issues.redhat.com/browse/RHOBS-851
name: observatorium-datahub-migration
description: appsrep05ue1 observatorium-datahub-migration namespace for RHOBS Telemeter LTS migration

cluster:
  $ref: /openshift/appsrep05ue1/cluster.yml

app:
  $ref: /services/rhobs/observatorium-mst/app.yml

environment:
  $ref: /products/osdv4/environments/production.yml


networkPoliciesAllow:
  - $ref: /services/observability/namespaces/openshift-customer-monitoring.appsrep05ue1.yml

managedRoles: true

managedResourceTypes:
  - Secret
  - ServiceAccount

sharedResources:
  - $ref: /services/app-sre/shared-resources/quayio-pull-secret.yml

#TODO - pgough/rhobs - delete after https://issues.redhat.com/browse/RHOBS-851
openshiftResources:
  - provider: vault-secret
    name: thanos-bucket-replicate-config-source
    path: rhobs/datahub/s3
    version: 1

  - provider: resource-template
    path: /services/common/serviceaccount.yaml
    variables:
      name: rclone
