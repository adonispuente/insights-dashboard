---
$schema: /app-sre/saas-file-2.yml

labels:
  service: configuration-anomaly-detection

name: configuration-anomaly-detection
description: 'SaaS tracking file for configuration-anomaly-detection'

app:
  $ref: /services/configuration-anomaly-detection/app.yml

pipelinesProvider:
  $ref: /services/configuration-anomaly-detection/pipelines/tekton.configuration-anomaly-detection-pipelines.app-sre-prod-01.yaml

deployResources:
  requests:
    cpu: 800m
    memory: 1500Mi
  limits:
    cpu: 800m
    memory: 1500Mi

slack:
  workspace:
    $ref: /dependencies/slack/coreos.yml
  channel: team-srep-info

managedResourceTypes:
  - EventListener
  - Pipeline
  - RoleBinding
  - Role
  - ServiceAccount
  - Task
  - Trigger
  - TriggerBinding
  - TriggerTemplate
  - ResourceQuota
  - CronJob
  - ConfigMap

imagePatterns:
  - quay.io/app-sre/configuration-anomaly-detection
  - quay.io/openshift-pipeline/openshift-pipelines-pipelines-cli-tkn-rhel8

resourceTemplates:
  - name: configuration-anomaly-detection
    url: https://github.com/openshift/configuration-anomaly-detection
    path: /openshift/template.yaml
    parameters:
      REGISTRY_IMG: quay.io/app-sre/configuration-anomaly-detection
    targets:
      - namespace:
          $ref: /services/configuration-anomaly-detection/namespaces/configuration-anomaly-detection-stage.yaml
        ref: main
        upstream:
          instance:
            $ref: /dependencies/ci-ext/ci-ext.yml
          name: openshift-configuration-anomaly-detection-gh-build-main
      - namespace:
          $ref: /services/configuration-anomaly-detection/namespaces/configuration-anomaly-detection-production.yaml
        ref: d0e04a9b7f27f8d8eb5925a331385620f07d373a
  - name: configuration-anomaly-detection-dashboards
    url: https://github.com/openshift/configuration-anomaly-detection
    path: /dashboards
    provider: directory
    targets:
      - namespace:
          $ref: /services/observability/namespaces/app-sre-observability-stage.yml
        ref: main
