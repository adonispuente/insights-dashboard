---
$schema: /app-sre/saas-file-2.yml

labels:
  service: cos-fleet-manager

name: saas-rhoc-observability
description: SaaS tracking file for Observability resources, RHOC data and control planes

app:
  $ref: /services/managed-connectors/app.yaml

pipelinesProvider:
  $ref: /services/managed-connectors/pipelines/tekton.cos-fleet-manager-pipelines.appsrep05ue1.yaml

slack:
  workspace:
    $ref: /dependencies/slack/redhat-internal.yml
  channel: rhoc-api-alert

imagePatterns: []

managedResourceTypes:
  - PrometheusRule
  - ConfigMap

resourceTemplates:
  - name: rhoc-data-plane-rules
    url: https://gitlab.cee.redhat.com/mk-ci-cd/cos-observability-resources
    path: /resources/prometheus/downstream
    provider: directory
    targets:
      - namespace:
          $ref: /services/rhobs/observatorium-mst/namespaces/app-sre-stage-01/observatorium-mst-stage.yml
        ref: main
      - namespace:
          $ref: /services/rhobs/observatorium-mst/namespaces/telemeter-prod-01/observatorium-mst-production.yml
        ref: 503042faa3970df1a5376c9fbf38d3dab77c0f94

  - name: rhoc-dashboards
    url: https://gitlab.cee.redhat.com/mk-ci-cd/cos-observability-resources
    path: /resources/grafana/downstream
    provider: directory
    targets:
      - namespace:
          $ref: /services/observability/namespaces/app-sre-observability-stage.yml
        ref: main
        delete: true
      - namespace:
          $ref: /services/observability/namespaces/app-sre-observability-production.yml
        ref: 503042faa3970df1a5376c9fbf38d3dab77c0f94
        delete: true
      - namespace:
          $ref: /services/observability/namespaces/app-sre-observability-stage-int.yml
        ref: main
      - namespace:
          $ref: /services/observability/namespaces/app-sre-observability-production-int.yml
        ref: 503042faa3970df1a5376c9fbf38d3dab77c0f94
