---
$schema: /dependencies/jenkins-config-1.yml

labels:
  service: service-registry

name: ci-int-service-registry-jobs

description: ''

app:
  $ref: /services/service-registry/app.yml

instance:
  $ref: /dependencies/ci-int/ci-int.yml

type: jobs

config:
  - project:
      name: srs-multitenant-registry # this projects builds both the service-registry main server and the tenant manager api
      label: srs-multitenant-registry
      node: managed-services
      gl_group: service-registry
      gl_project: srs-service-registry
      jobs:
        - 'gl-pr-check':
            display_name: srs-service-registry pr-check
            concurrent_build: true
        - 'gl-build-master-srs-projects':
            display_name: srs-service-registry build master
            branch: master

  - project:
      name: srs-fleet-manager
      label: srs-fleet-manager
      node: managed-services
      gl_group: service-registry
      gl_project: srs-fleet-manager
      jobs:
        - 'gl-pr-check':
            display_name: srs-fleet-manager pr-check
            concurrent_build: true
        - 'gl-build-master-srs-projects':
            display_name: srs-fleet-manager build master
            branch: master
