---
$schema: /openshift/namespace-1.yml

labels: {}

name: workers-stage
description: staging namespace for image-builder

cluster:
  $ref: /openshift/app-sre-stage-01/cluster.yml

app:
  $ref: /services/image-builder/app.yml

environment:
  $ref: /products/osdv4/environments/stage.yml

networkPoliciesAllow:
  - $ref: /services/observability/namespaces/openshift-customer-monitoring.app-sre-stage-01.yml

limitRanges:
  $ref: /dependencies/openshift/limitranges/standard-resource-limits.yml

quota:
  $ref: /services/insights/default-quota.yml

managedRoles: true

managedResourceTypes: []

managedTerraformResources: true

terraformResources:
- provider: secrets-manager
  account: image-builder-stage
  identifier: aws-account
  secret:
    path: app-interface/image-builder/stage/aws-account
    version: 1
    field: all
  output_resource_name: aws-account
- provider: secrets-manager
  account: image-builder-stage
  identifier: azure-service-account
  secret:
    path: app-interface/image-builder/stage/azure-service-account
    version: 1
    field: all
  output_resource_name: azure-service-account
- provider: secrets-manager
  account: image-builder-stage
  identifier: gcp-service-account
  secret:
    path: app-interface/image-builder/stage/gcp-service-account
    version: 1
    field: all
  output_resource_name: gcp-service-account
- provider: secrets-manager
  account: image-builder-stage
  identifier: offline-token
  secret:
    path: app-interface/image-builder/stage/offline-token
    version: 1
    field: all
  output_resource_name: offline-token
- provider: secrets-manager
  account: image-builder-stage
  identifier: subscription-manager-command
  secret:
    path: app-interface/image-builder/stage/subscription-manager-command
    version: 1
    field: all
  output_resource_name: subscription-manager-command
- provider: cloudwatch
  account: image-builder-stage
  identifier: workers-aoc-staging
  defaults: /terraform/resources/image-builder/stage/cloudwatch-1.yml
  output_resource_name: workers-aoc-staging
