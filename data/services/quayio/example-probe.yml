apiVersion: monitoring.coreos.com/v1
kind: Probe
metadata:
  name: catchpoint-http-stage
  namespace: openshift-customer-monitoring
  labels:
    prometheus: app-sre
spec:
  interval: 60s
  jobName: catchpoint-http-stage
  module: http_2xx
  prober:
    path: /probe
    scheme: http
    url: 'signalfx-prometheus-exporter.app-sre-observability-production.svc.cluster.local:9091/probe/probe'
  targets:
    staticConfig:
      labels:
        environment: staging
      relabelingConfigs:
        - action: labeldrop
          regex: namespace
        - source_labels: [probe]
          regex: "quay-io-status"
          target_label: instance
          replacement: "https://quay.io/status"
        - source_labels: [probe]
          regex: "quay-io-status"
          target_label: instance
          replacement: "https://quay.io/status"
      static:
        - quay-io-status
        - quay-io-redis-status
