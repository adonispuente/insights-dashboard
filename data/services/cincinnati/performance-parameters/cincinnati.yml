---
$schema: /app-sre/performance-parameters-1.yml

# Labels for this file in app-interface
# Not related to generated manifests
labels:
  service: cincinnati

name: prometheus

app:
  $ref: /services/cincinnati/app.yml

component: cincinnati

# Labels that Prometheus uses to select this rules file
# These labels are added to the generated Manifest's metadata.labels
prometheusLabels:
  service: cincinnati

# Namespaces that this app lives in
namespace:
  $ref: /services/cincinnati/namespaces/cincinnati-production.yml

availability:
# Defines a 95% SLO
# See docs/app-sre/monitoring.md, errorBudget sets availability target of (100-x)%
- description: Graph builder availability SLO
  kind: SLO
  metric: up
  selectors:
    job: cincinnati-graph-builder
  target: 95

- description: Policy engine builder availability SLO
  kind: SLO
  metric: up
  selectors:
    job: cincinnati-policy-engine
  target: 95

latency:
- description: p90 under three seconds 99% of the time
  kind: SLO
  metric: cincinnati_pe_v1_graph_serve_duration_seconds_bucket
  selectors:
    job: cincinnati-policy-engine
  threshold: 3
  percentile: 90
  target: 99
  isAvailabilitySLO: false
