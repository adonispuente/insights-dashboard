---
$schema: /app-sre/performance-parameters-1.yml

# Labels for this file in app-interface
# Not related to generated manifests
labels:
  service: cincinnati

name: prometheus

app:
  $ref: /services/cincinnati/app.yml

component: cincinnati

# Labels that Prometheus uses to select this rules file
# These labels are added to the generated Manifest's metadata.labels
prometheusLabels:
  service: cincinnati

# Namespaces that this app lives in
namespaces:
- $ref: /services/cincinnati/namespaces/cincinnati-stage.yml
- $ref: /services/cincinnati/namespaces/cincinnati-production.yml

availability:
# Defines a 95% SLO
# See docs/app-sre/monitoring.md, errorBudget sets availability target of (100-x)%
- kind: SLO
  metric: up
  errorBudget: 5
  selectors:
    job: cincinnati-graph-builder

- kind: SLO
  metric: up
  errorBudget: 5
  selectors:
    job: cincinnati-policy-engine

latency:
- kind: SLO
  metric: cincinnati_pe_v1_graph_serve_duration_seconds_bucket
  threshold: 3
  percentile: 90
  selectors:
    job: cincinnati-policy-engine
