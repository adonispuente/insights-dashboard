---
$schema: /openshift/namespace-1.yml

labels: {}

name: uhc-stage
description: staging namespace for uhc

cluster:
  $ref: /openshift/ssotest01ue1/cluster.yml

app:
  $ref: /services/uhc/app.yml

environment:
  $ref: /products/osdv4/environments/ssotest01ue1.yml

managedRoles: true

# managedResourceTypes:
# - ConfigMap
# - Secret
# - ServiceAccount

openshiftResources:
- provider: vault-secret
  path: app-interface/global/quay/app-sre/quay.io
  version: 2
  type: kubernetes.io/dockercfg
# the `telemeter.bearer` key in clusters-service is the telemeter-stage/uhc-prometheus-access SA's token
# - provider: resource-template
#   type: extracurlyjinja2
#   path: /app-sre-stage/uhc-stage/clusters-service.secret.yaml
#   variables:
#     shards:
#     - id: c591396e-b1e3-4d97-a7d4-8046ccb4d529
#       cloud_providers:
#       - id: aws
#         region_id: us-east-1
#       - id: gcp
#         region_id: us-east1
#       hive_cluster_name: hive-stage
#       hive_cluster_api_url: https://api.hive-stage.openshift.com:443
#       hive_cluster_api_url_slug: api-hive-stage-openshift-com:443
#     # this is a workaround to use the vault function inside the for loop in the template
#     current_hive_cluster:
#       name: 'workaround'
# the `telemeter.bearer` key in uhc-acct-mngr-tpl is the telemeter-stage/uhc-prometheus-access SA's token
# - provider: resource-template
#   type: extracurlyjinja2
#   path: /app-sre-stage/uhc-stage/uhc-acct-mngr-templated.secret.yaml
# - provider: vault-secret
#   path: app-interface/app-sre-stage/uhc-stage/ocm-service-log
#   version: 4
# - provider: vault-secret
#   path: app-interface/app-sre-stage/uhc-stage/uhc-acct-mngr
#   version: 10
# - provider: vault-secret
#   path: app-interface/app-sre-stage/uhc-stage/clusters-cleaner
#   version: 2
# - provider: route
#   path: /app-sre-stage/uhc-stage/clusters-mgmt.route.yaml
# - provider: route
#   path: /app-sre-stage/uhc-stage/accounts-mgmt.route.yaml
# - provider: route
#   path: /app-sre-stage/uhc-stage/authorizations.route.yaml
# - provider: route
#   path: /app-sre-stage/uhc-stage/service-logs.route.yaml
# - provider: route
#   path: /app-sre-stage/uhc-stage/gateway-server.route.yaml
# - provider: resource
#   path: /app-sre-stage/uhc-stage/clusters-service.serviceaccount.yaml
# - provider: resource
#   path: /app-sre-stage/uhc-stage/account-manager.serviceaccount.yaml
# - provider: resource
#   path: /app-sre-stage/uhc-stage/ocm-service-log.serviceaccount.yaml
# - provider: resource
#   path: /app-sre-stage/uhc-stage/authentication.configmap.yaml
# - provider: resource
#   path: /app-sre-stage/uhc-stage/service-ca.configmap.yaml
# - provider: resource
#   path: /app-sre-stage/uhc-stage/gateway.configmap.yaml
# - provider: resource
#   path: /app-sre-stage/uhc-stage/ocm-service-log-triggers.configmap.yaml
# - name: unleash
#   provider: vault-secret
#   path: app-sre/unleash/ocm-stage-unleash-token
#   version: 1

# managedTerraformResources: true

# terraformResources:
# - provider: rds
#   account: app-sre
#   identifier: clusters-service-ssotest01ue1
#   defaults: /terraform/resources/app-sre/staging/rds-1.yml
#   output_resource_name: clusters-service-rds
# - provider: rds
#   account: app-sre
#   identifier: uhc-acct-mngr-ssotest01ue1
#   defaults: /terraform/resources/app-sre/staging/rds-1.yml
#   output_resource_name: uhc-acct-mngr-rds
# - provider: rds
#   account: app-sre
#   identifier: ocm-service-log-ssotest01ue1
#   defaults: /terraform/resources/app-sre/staging/rds-1.yml
#   output_resource_name: ocm-service-log-rds

# openshiftServiceAccountTokens:
# - namespace:
#     $ref: /services/hive/namespaces/ssotest01ue1/hive-stage.yml
#   serviceAccountName: hive-frontend
# - namespace:
#     $ref: /services/osd-operators/namespaces/ssotest01ue1/aws-account-operator.yml
#   serviceAccountName: aws-account-operator-client
# - namespace:
#     $ref: /services/telemeter/namespaces/telemeter-stage.yml
#   serviceAccountName: uhc-prometheus-access
# - namespace:
#     $ref: /services/osd-operators/namespaces/ssotest01ue1/gcp-project-operator.yml
#   serviceAccountName: gcp-project-operator-client
