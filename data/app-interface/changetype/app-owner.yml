---
$schema: /app-interface/change-type-1.yml

labels: {}

name: app-owner
description: |
  Allow updates on a resources related to an app.

priority: low

contextType: datafile
contextSchema: /app-sre/app-1.yml

inherit:
- $ref: /app-interface/changetype/ci-owner.yml

changes:
- provider: change-type
  changeTypes:
  - $ref: /app-interface/changetype/app-owner.yml
  changeSchema: /app-sre/app-1.yml
  context:
    selector: parentApp.'$ref'
- provider: change-type
  changeTypes:
  - $ref: /app-interface/changetype/namespace-owner.yml
  changeSchema: /openshift/namespace-1.yml
  context:
    selector: app.'$ref'
- provider: jsonPath
  jsonPathSelectors:
  - labels
  - description
- provider: jsonPath
  changeSchema: /dependencies/status-page-component-1.yml
  jsonPathSelectors:
  - name
  - labels
  - displayName
  - groupName
  - instructions
  - status
  context:
    selector: app.'$ref'
- provider: jsonPath
  changeSchema: /dependencies/status-page-component-1.yml
  jsonPathSelectors:
  - name
  - labels
  - displayName
  - groupName
  - instructions
  - status
  - app
  - page
  context:
    selector: app.'$ref'
    when: added
- provider: change-type
  changeTypes:
  - $ref: /app-interface/changetype/glitchtip-project-self-service.yml
  changeSchema: /dependencies/glitchtip-project-1.yml
  context:
    selector: app.'$ref'
- provider: change-type
  changeTypes:
  - $ref: /app-interface/changetype/glitchtip-project-self-service.yml
  changeSchema: /dependencies/glitchtip-project-1.yml
  context:
    selector: app.'$ref'
    when: added
