---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2023-06-13-pg-stat
namespace:
  $ref: /services/insights/vulnerability/namespaces/vulnerability-engine-prod.yml
identifier: vulnerability-engine
output: stdout
queries:
  - SELECT indexrelname, idx_scan, idx_tup_read, idx_tup_fetch, pg_size_pretty(pg_relation_size(indexrelid)), pg_size_pretty(pg_table_size(relid)) FROM pg_stat_user_indexes WHERE schemaname = 'inventory' ORDER BY idx_scan DESC;
  - SELECT indexrelname, idx_scan, idx_tup_read, idx_tup_fetch, pg_size_pretty(pg_relation_size(indexrelid)), pg_size_pretty(pg_table_size(relid)) FROM pg_stat_user_indexes ORDER BY idx_scan DESC;

