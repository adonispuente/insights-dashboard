---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2023-05-15-pg-stat
namespace:
  $ref: /services/insights/vulnerability/namespaces/vulnerability-engine-prod.yml
identifier: vulnerability-engine
output: stdout
queries:
  - SELECT indexrelname, idx_scan, idx_tup_read, idx_tup_fetch FROM pg_stat_user_indexes WHERE schemaname = 'inventory' ORDER BY idx_scan DESC;
  - select pg_size_pretty(pg_table_size(indexrelid)), indexrelname from pg_stat_user_indexes where schemaname = 'inventory';
  - select pg_size_pretty(pg_relation_size(relid)), pg_size_pretty(pg_table_size(indexrelid)), indexrelname from pg_stat_user_indexes where schemaname = 'inventory'; 

