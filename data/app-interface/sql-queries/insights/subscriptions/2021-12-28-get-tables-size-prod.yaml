---
$schema: /app-interface/app-interface-sql-query-1.yml
name: 2021-12-28-get-tables-size-prod
labels: {}
namespace:
  $ref: /services/insights/subscriptions/namespaces/subscriptions-prod.yml
identifier: subscriptions-prod
output: stdout
queries:
  - select pg_size_pretty(pg_total_relation_size('api_report')) as api_report;
  - select pg_size_pretty(pg_total_relation_size('api_reportslice')) as api_reportslice;
  - select pg_size_pretty(pg_total_relation_size('api_reportarchive')) as api_reportarchive;
  - select pg_size_pretty(pg_total_relation_size('api_reportslicearchive')) as api_reportslicearchive;
  - select count(id) as api_report_count from api_report;
  - select count(id) as api_reportarchive_count from api_reportarchive;
  - select count(id) as api_reportslice_count from api_reportslice;
  - select count(id) as api_reportslicearchive_count from api_reportslicearchive;
