---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2021-08-16-policies-history-checks-before-migration
namespace:
  $ref: /services/insights/policies/namespaces/policies-prod.yml
identifier: policies-ui-backend-prod
output: stdout
queries:
  # Check how many records were created since policies-history was enabled in policies-engine
  - "select count(id) from policies_history;"
  # Check max length for all varchar fields
  - "select max(length(tenant_id)), max(length(policy_id)), max(length(host_id)), max(length(host_name)) from policies_history;"
