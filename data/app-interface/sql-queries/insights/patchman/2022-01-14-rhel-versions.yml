---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2022-01-14-rhel-versions
namespace:
  $ref: /services/insights/patchman/namespaces/patchman-engine-prod.yml
identifier: patchman-prod
output: stdout
queries:
  - select 'RHEL versions NULL', count(id) from inventory.hosts ih where ih.system_profile->'operating_system'->>'name' is null or ih.system_profile->'operating_system'->>'major' is null or ih.system_profile->'operating_system'->>'minor' is null;
  - select 'RHEL versions empty', count(id) from inventory.hosts ih where ih.system_profile->'operating_system'->>'name' = '' or ih.system_profile->'operating_system'->>'major' = '' or ih.system_profile->'operating_system'->>'minor' = '';
