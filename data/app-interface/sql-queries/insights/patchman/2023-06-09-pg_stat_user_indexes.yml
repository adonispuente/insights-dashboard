---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2023-06-09-pg-stat-user-indexes
namespace:
  $ref: /services/insights/patchman/namespaces/patchman-engine-prod.yml
identifier: patchman-prod
output: stdout
queries:
  - SELECT indexrelname, idx_scan, idx_tup_read, idx_tup_fetch, pg_size_pretty(pg_relation_size(relid)) FROM pg_stat_user_indexes WHERE schemaname = 'inventory' ORDER BY idx_scan DESC;
  - select pg_size_pretty(pg_table_size(indexrelid)), indexrelname from pg_stat_user_indexes where schemaname = 'inventory';
  - select pg_size_pretty(pg_relation_size(relid)), pg_size_pretty(pg_table_size(indexrelid)), indexrelname from pg_stat_user_indexes where schemaname = 'inventory'; 
