---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2021-01-25-patch-cve-list-count
namespace:
  $ref: /services/insights/patchman/namespaces/patchman-engine-prod.yml
identifier: patchman-prod
output: stdout
queries:
    - select 'all advisories', count(id) from advisory_metadata;
    - select 'jsonb array', count(id) from advisory_metadata where jsonb_typeof(cve_list) = 'array';
    - select 'jsonb object', count(id) from advisory_metadata where jsonb_typeof(cve_list) = 'object';
    - select 'null str', count(id) from advisory_metadata where jsonb_typeof(cve_list) = 'null';
    - select 'is null', count(id) from advisory_metadata where cve_list IS NULL;
