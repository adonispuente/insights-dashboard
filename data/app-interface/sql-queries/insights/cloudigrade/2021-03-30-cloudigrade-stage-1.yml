---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2021-03-30-cloudigrade-stage-1
namespace:
  $ref: /services/insights/cloudigrade/namespaces/stage-cloudigrade-stage.yml
identifier: cloudigrade-stage
output: stdout
queries:
  - select id, created_at, updated_at, date, user_id from api_concurrentusage where user_id = 910 order by date;
  - select cu.date, count(distinct r.instance_id) from api_concurrentusage cu join api_concurrentusage_potentially_related_runs cur on cu.id = cur.concurrentusage_id join api_run r on r.id = cur.run_id where cu.user_id = 910 group by cu.date order by cu.date;
  - select cu.date, r.instance_id from api_concurrentusage cu join api_concurrentusage_potentially_related_runs cur on cu.id = cur.concurrentusage_id join api_run r on r.id = cur.run_id where cu.user_id = 910 group by cu.date, r.instance_id order by cu.date, r.instance_id;
  - select cur.concurrentusage_id, cu.date, cu.user_id, cur.run_id, r.instance_id, r.start_time, r.end_time from api_concurrentusage cu join api_concurrentusage_potentially_related_runs cur on cu.id = cur.concurrentusage_id join api_run r on r.id = cur.run_id where cu.user_id = 910 order by cu.user_id, cu.date, r.instance_id, r.start_time;

