---
$schema: /app-interface/app-interface-sql-query-1.yml
name: 2022-02-24-get-duplicate-records-multiple-queries
labels: {}
namespace:
  $ref: /services/insights/rbac/namespaces/rbac-prod.yml
identifier: rbac-prod
output: stdout
queries:
  - |
    SELECT id, permission, tenant_id
    FROM public.management_permission
    WHERE tenant_id NOT IN
        (SELECT id
         FROM public.api_tenant
         WHERE SCHEMA_NAME = 'public');
  - |
    SELECT id, name, created, system, platform_default, tenant_id
    FROM public.management_role
    WHERE SYSTEM = TRUE
      AND tenant_id NOT IN
        (SELECT id
         FROM public.api_tenant
         WHERE SCHEMA_NAME = 'public');
  - |
    SELECT id, name, created, system, platform_default, tenant_id
    FROM public.management_group
    WHERE SYSTEM = TRUE
      AND tenant_id NOT IN
        (SELECT id
         FROM public.api_tenant
         WHERE SCHEMA_NAME = 'public');
