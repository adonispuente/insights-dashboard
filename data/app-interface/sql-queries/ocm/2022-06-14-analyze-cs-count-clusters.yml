---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2022-06-14-analyze-cs-count-clusters
namespace:
  $ref: /services/ocm/namespaces/uhc-production.yml
identifier: clusters-service-production
output: stdout
queries:
  - EXPLAIN ANALYZE SELECT COUNT(clusters.id) FROM clusters LEFT JOIN metrics ON metrics.external_id = clusters.external_id LEFT JOIN versions ON versions.id = clusters.version_id WHERE ((clusters.external_id = 'dd3c9a03-d508-4fa3-bfaf-649932710619' OR clusters.display_name = 'dd3c9a03-d508-4fa3-bfaf-649932710619') AND (clusters.organization_id = ANY('{"1Hjy0dhTVwN0oQ29KY6J47w0K8n"}') OR clusters.id = ANY('{"15jlnqbdv6i4mhfr83u2loj9tcfiv3n1"}')));
  - EXPLAIN ANALYZE SELECT COUNT(clusters.id) FROM clusters WHERE ((clusters.external_id = 'dd3c9a03-d508-4fa3-bfaf-649932710619' OR clusters.display_name = 'dd3c9a03-d508-4fa3-bfaf-649932710619') AND (clusters.organization_id = ANY('{"1Hjy0dhTVwN0oQ29KY6J47w0K8n"}') OR clusters.id = ANY('{"15jlnqbdv6i4mhfr83u2loj9tcfiv3n1"}')));
