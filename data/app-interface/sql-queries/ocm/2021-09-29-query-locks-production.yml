---
$schema: /app-interface/app-interface-sql-query-1.yml
labels: {}
name: 2021-09-29-query-locks-production
namespace:
  $ref: /services/ocm/namespaces/uhc-production.yml
identifier: clusters-service-production
output: stdout
queries:
  - select locktype, database, relation, page, tuple, virtualxid, transactionid, classid, objid, objsubid, virtualtransaction, pid, mode, granted, fastpath from pg_locks;
  - select datid, datname, pid, usesysid, usename, application_name, client_addr, client_hostname, client_port, backend_start, xact_start, query_start, state_change, wait_event_type, wait_event, state, backend_xid, backend_xmin, query, backend_type from pg_stat_activity;
  - select relname, oid from pg_class where relkind = 'r' and relname not like 'pg_%' and relname not like 'sql_%';
